{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yacov.gorovoy\\\\Documents\\\\Cursor-workspace\\\\procurement-prototype\\\\src\\\\pages\\\\RequestForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Sidebar from '../components/Sidebar';\nimport Header from '../components/Header';\nimport Button from '../components/Button';\nimport BackLink from '../components/BackLink';\nimport Stepper from '../components/Stepper';\nimport FormInput from '../components/FormInput';\nimport FormSelect from '../components/FormSelect';\nimport FormTextarea from '../components/FormTextarea';\nimport LineItemsTable from '../components/LineItemsTable';\nimport Badge from '../components/Badge';\nimport { SUPPLIERS, PURCHASE_TYPES, SUBSIDIARIES, saveDraft, getDraft, generateDraftId, saveCurrentDraft, clearCurrentDraft, SAMPLE_HOME_REQUESTS } from '../utils/mockData';\nimport { localDB } from '../utils/localDB';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RequestForm({\n  onNavigate,\n  draftId,\n  aiData\n}) {\n  _s();\n  var _steps$currentStep;\n  const [currentStep, setCurrentStep] = useState(0);\n  const [formData, setFormData] = useState({\n    id: draftId || generateDraftId(),\n    title: '',\n    supplier: '',\n    purchaseType: '',\n    subsidiary: '',\n    description: '',\n    lineItems: [{\n      currency: 'USD',\n      amount: '',\n      quantity: '1',\n      desc: ''\n    }],\n    supplierInfo: {\n      companyName: '',\n      contactName: '',\n      email: '',\n      phone: '',\n      address: '',\n      taxId: ''\n    },\n    security: {\n      riskLevel: '',\n      complianceRequired: false,\n      securityNotes: ''\n    }\n  });\n  const [errors, setErrors] = useState({});\n  const [isNewVendor, setIsNewVendor] = useState(false);\n  const [newVendorName, setNewVendorName] = useState('');\n  useEffect(() => {\n    // Load existing draft if draftId provided\n    if (draftId) {\n      const existingDraft = localDB.getById(draftId);\n      if (existingDraft) {\n        // Synthesize lineItems if missing\n        let lineItems = existingDraft.lineItems;\n        if (!lineItems) {\n          let amt = 0;\n          if (existingDraft.amount) {\n            const match = String(existingDraft.amount).match(/([\\d,.]+)/);\n            amt = match ? parseFloat(match[1].replace(/,/g, '')) : 0;\n          }\n          lineItems = [{\n            currency: 'USD',\n            amount: amt,\n            quantity: '1',\n            desc: 'demo'\n          }];\n        }\n        setFormData({\n          ...existingDraft,\n          lineItems\n        });\n        setIsNewVendor(existingDraft.supplier === 'new_vendor');\n        if (existingDraft.supplier === 'new_vendor') {\n          var _existingDraft$suppli, _existingDraft$suppli2;\n          // Set newVendorName from vendor field if present\n          setNewVendorName(existingDraft.vendor || ((_existingDraft$suppli = existingDraft.supplierInfo) === null || _existingDraft$suppli === void 0 ? void 0 : _existingDraft$suppli.companyName) || '');\n          // Ensure supplierInfo.companyName is set\n          if (!((_existingDraft$suppli2 = existingDraft.supplierInfo) !== null && _existingDraft$suppli2 !== void 0 && _existingDraft$suppli2.companyName) && existingDraft.vendor) {\n            setFormData(prev => ({\n              ...prev,\n              supplierInfo: {\n                ...prev.supplierInfo,\n                companyName: existingDraft.vendor\n              }\n            }));\n          }\n        }\n      }\n    }\n\n    // Load AI data if provided\n    if (aiData) {\n      setFormData(prev => ({\n        ...prev,\n        title: aiData.title || '',\n        supplier: aiData.supplier || '',\n        purchaseType: aiData.purchaseType || '',\n        subsidiary: aiData.subsidiary || '',\n        description: aiData.description || '',\n        lineItems: aiData.lineItems || [{\n          currency: 'USD',\n          amount: '',\n          quantity: '1',\n          desc: ''\n        }]\n      }));\n      setIsNewVendor(aiData.supplier === 'new_vendor');\n    }\n  }, [draftId, aiData]);\n  useEffect(() => {\n    // Save current draft to session storage\n    saveCurrentDraft(formData);\n  }, [formData]);\n  const steps = [{\n    label: 'Purchase details',\n    active: currentStep === 0,\n    completed: currentStep > 0\n  }, {\n    label: 'Supplier info',\n    active: currentStep === 1,\n    completed: currentStep > 1,\n    required: isNewVendor\n  }, {\n    label: 'Security',\n    active: currentStep === 2,\n    completed: currentStep > 2,\n    required: isNewVendor\n  }, {\n    label: 'Review & Submit',\n    active: currentStep === 3,\n    completed: false\n  }].filter(step => !step.required || step.required === isNewVendor);\n  const validateCurrentStep = () => {\n    const newErrors = {};\n    if (currentStep === 0) {\n      if (!formData.title.trim()) newErrors.title = 'Title is required';\n      if (!formData.supplier) newErrors.supplier = 'Supplier is required';\n      if (!formData.purchaseType) newErrors.purchaseType = 'Purchase type is required';\n      if (!formData.subsidiary) newErrors.subsidiary = 'Subsidiary is required';\n      if (!formData.description.trim()) newErrors.description = 'Description is required';\n\n      // Validate line items\n      const lineItemErrors = formData.lineItems.map(item => {\n        const itemErrors = {};\n        if (!item.amount || parseFloat(item.amount) <= 0) itemErrors.amount = 'Valid amount is required';\n        if (!item.desc.trim()) itemErrors.desc = 'Description is required';\n        return itemErrors;\n      });\n      if (lineItemErrors.some(errors => Object.keys(errors).length > 0)) {\n        newErrors.lineItems = lineItemErrors;\n      }\n    }\n    if (currentStep === 1 && isNewVendor) {\n      if (!formData.supplierInfo.companyName.trim()) newErrors.companyName = 'Company name is required';\n      if (!formData.supplierInfo.contactName.trim()) newErrors.contactName = 'Contact name is required';\n      if (!formData.supplierInfo.email.trim()) newErrors.email = 'Email is required';\n    }\n    if (currentStep === 2 && isNewVendor) {\n      if (!formData.security.riskLevel) newErrors.riskLevel = 'Risk level is required';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleNext = () => {\n    // Sync newVendorName to formData.supplierInfo.companyName if needed\n    if (formData.supplier === 'new_vendor' && newVendorName && !formData.supplierInfo.companyName) {\n      setFormData(prev => ({\n        ...prev,\n        supplierInfo: {\n          ...prev.supplierInfo,\n          companyName: newVendorName\n        }\n      }));\n    }\n    if (validateCurrentStep()) {\n      if (currentStep < steps.length - 1) {\n        setCurrentStep(currentStep + 1);\n      } else {\n        handleSubmit();\n      }\n    }\n  };\n  const handleBack = () => {\n    if (currentStep > 0) {\n      setCurrentStep(currentStep - 1);\n    } else {\n      onNavigate('home');\n    }\n  };\n  const handleSaveDraft = () => {\n    // Determine vendor name\n    let vendor = '';\n    if (formData.supplier === 'new_vendor') {\n      vendor = formData.supplierInfo.companyName || 'New Vendor';\n    } else {\n      const supplierObj = SUPPLIERS.find(s => s.value === formData.supplier);\n      vendor = supplierObj ? supplierObj.label : formData.supplier;\n    }\n    const isNewVendorFlag = formData.supplier === 'new_vendor';\n    // Save draft with vendor and isNewVendor fields\n    const updatedDraft = {\n      ...formData,\n      vendor,\n      isNewVendor: isNewVendorFlag\n    };\n    // Update in localDB\n    localDB.update(formData.id, updatedDraft);\n    onNavigate('home');\n  };\n  const handleSubmit = () => {\n    if (validateCurrentStep()) {\n      // Save as submitted request (in real app, this would go to backend)\n      const updatedDraft = {\n        ...formData,\n        status: 'Pending approval',\n        updatedAt: new Date().toISOString()\n      };\n      localDB.update(formData.id, updatedDraft);\n      onNavigate('home');\n    }\n  };\n  const handleSupplierChange = value => {\n    setFormData(prev => ({\n      ...prev,\n      supplier: value\n    }));\n    setIsNewVendor(value === 'new_vendor');\n    if (value !== 'new_vendor') setNewVendorName('');\n  };\n  const handleLineItemsChange = items => {\n    setFormData(prev => ({\n      ...prev,\n      lineItems: items\n    }));\n  };\n\n  // Merge all vendors from SUPPLIERS, SAMPLE_HOME_REQUESTS, and all requests in localDB\n  const allVendorsSet = new Set([...SUPPLIERS.map(s => s.label), ...SAMPLE_HOME_REQUESTS.map(r => r.vendor), ...localDB.getAll().map(r => r.vendor)]);\n  const allVendors = Array.from(allVendorsSet).filter(Boolean);\n  const vendorOptions = allVendors.map(vendor => {\n    const supplier = SUPPLIERS.find(s => s.label === vendor);\n    return supplier ? {\n      value: supplier.value,\n      label: supplier.label\n    } : {\n      value: vendor,\n      label: vendor\n    };\n  });\n  vendorOptions.push({\n    value: 'new_vendor',\n    label: 'Add new vendor...'\n  });\n  // Sort vendor options alphabetically (except 'Add new vendor...' stays last)\n  const sortedVendorOptions = vendorOptions.slice(0, -1).sort((a, b) => a.label.localeCompare(b.label));\n  sortedVendorOptions.push(vendorOptions[vendorOptions.length - 1]);\n  const renderStepContent = () => {\n    switch (currentStep) {\n      case 0:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(FormInput, {\n            label: \"Request Title\",\n            value: formData.title,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              title: e.target.value\n            })),\n            placeholder: \"e.g., Zoom Premium Licenses for Sales Team\",\n            required: true,\n            className: errors.title ? 'border-red-500' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), errors.title && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-500 text-sm\",\n            children: errors.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(FormSelect, {\n            label: \"Supplier\",\n            value: (() => {\n              // Try to match supplier value, otherwise match by vendor label\n              if (formData.supplier) return formData.supplier;\n              const found = sortedVendorOptions.find(opt => opt.label === formData.vendor);\n              return found ? found.value : '';\n            })(),\n            onChange: handleSupplierChange,\n            options: sortedVendorOptions,\n            placeholder: \"Select supplier\",\n            required: true,\n            searchPlaceholder: \"Search suppliers...\",\n            action: {\n              label: 'Add new vendor',\n              onClick: () => handleSupplierChange('new_vendor')\n            },\n            onActionWithSearch: search => {\n              setNewVendorName(search);\n              setFormData(prev => ({\n                ...prev,\n                supplier: 'new_vendor'\n              }));\n              setIsNewVendor(true);\n            },\n            selectedDisplay: formData.supplier === 'new_vendor' && newVendorName ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"flex items-center gap-2\",\n              children: [newVendorName, /*#__PURE__*/_jsxDEV(Badge, {\n                text: \"New vendor\",\n                color: \"bg-green-100 text-green-800\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 21\n            }, this) : undefined\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this), errors.supplier && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-500 text-sm\",\n            children: errors.supplier\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(FormSelect, {\n            label: \"Purchase Type\",\n            value: formData.purchaseType,\n            onChange: value => setFormData(prev => ({\n              ...prev,\n              purchaseType: value\n            })),\n            options: [...PURCHASE_TYPES].sort((a, b) => a.label.localeCompare(b.label)),\n            placeholder: \"Select purchase type\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this), errors.purchaseType && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-500 text-sm\",\n            children: errors.purchaseType\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(FormSelect, {\n            label: \"Subsidiary\",\n            value: formData.subsidiary,\n            onChange: value => setFormData(prev => ({\n              ...prev,\n              subsidiary: value\n            })),\n            options: [...SUBSIDIARIES].sort((a, b) => a.label.localeCompare(b.label)),\n            placeholder: \"Select subsidiary\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this), errors.subsidiary && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-500 text-sm\",\n            children: errors.subsidiary\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 35\n          }, this), /*#__PURE__*/_jsxDEV(FormTextarea, {\n            label: \"Description\",\n            value: formData.description,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              description: e.target.value\n            })),\n            placeholder: \"Describe the purpose and details of this purchase request\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this), errors.description && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-500 text-sm\",\n            children: errors.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 36\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block mb-2 font-medium text-gray-600\",\n              children: \"Line Items\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(LineItemsTable, {\n              items: formData.lineItems,\n              onItemChange: handleLineItemsChange,\n              maxItems: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this);\n      case 1:\n        if (!isNewVendor) return null;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(FormInput, {\n            label: \"Company Name\",\n            value: formData.supplierInfo.companyName,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              supplierInfo: {\n                ...prev.supplierInfo,\n                companyName: e.target.value\n              }\n            })),\n            placeholder: \"Enter company name\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this), errors.companyName && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-500 text-sm\",\n            children: errors.companyName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 36\n          }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n            label: \"Contact Name\",\n            value: formData.supplierInfo.contactName,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              supplierInfo: {\n                ...prev.supplierInfo,\n                contactName: e.target.value\n              }\n            })),\n            placeholder: \"Enter contact person name\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this), errors.contactName && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-500 text-sm\",\n            children: errors.contactName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 36\n          }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n            label: \"Email\",\n            type: \"email\",\n            value: formData.supplierInfo.email,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              supplierInfo: {\n                ...prev.supplierInfo,\n                email: e.target.value\n              }\n            })),\n            placeholder: \"Enter contact email\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this), errors.email && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-500 text-sm\",\n            children: errors.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n            label: \"Phone\",\n            value: formData.supplierInfo.phone,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              supplierInfo: {\n                ...prev.supplierInfo,\n                phone: e.target.value\n              }\n            })),\n            placeholder: \"Enter contact phone\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormTextarea, {\n            label: \"Address\",\n            value: formData.supplierInfo.address,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              supplierInfo: {\n                ...prev.supplierInfo,\n                address: e.target.value\n              }\n            })),\n            placeholder: \"Enter company address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n            label: \"Tax ID\",\n            value: formData.supplierInfo.taxId,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              supplierInfo: {\n                ...prev.supplierInfo,\n                taxId: e.target.value\n              }\n            })),\n            placeholder: \"Enter tax identification number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this);\n      case 2:\n        if (!isNewVendor) return null;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(FormSelect, {\n            label: \"Risk Level\",\n            value: formData.security.riskLevel,\n            onChange: value => setFormData(prev => ({\n              ...prev,\n              security: {\n                ...prev.security,\n                riskLevel: value\n              }\n            })),\n            options: [{\n              value: 'low',\n              label: 'Low Risk'\n            }, {\n              value: 'medium',\n              label: 'Medium Risk'\n            }, {\n              value: 'high',\n              label: 'High Risk'\n            }],\n            placeholder: \"Select risk level\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this), errors.riskLevel && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-500 text-sm\",\n            children: errors.riskLevel\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 34\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                checked: formData.security.complianceRequired,\n                onChange: e => setFormData(prev => ({\n                  ...prev,\n                  security: {\n                    ...prev.security,\n                    complianceRequired: e.target.checked\n                  }\n                })),\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-medium text-gray-700\",\n                children: \"Compliance review required\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormTextarea, {\n            label: \"Security Notes\",\n            value: formData.security.securityNotes,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              security: {\n                ...prev.security,\n                securityNotes: e.target.value\n              }\n            })),\n            placeholder: \"Any additional security considerations or notes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this);\n      case 3:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 rounded-lg p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-medium text-gray-800 mb-4\",\n              children: \"Request Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Title:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 22\n                }, this), \" \", formData.title]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Supplier:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 22\n                }, this), \" \", formData.supplier]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Type:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 22\n                }, this), \" \", formData.purchaseType]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Subsidiary:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 22\n                }, this), \" \", formData.subsidiary]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Description:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 22\n                }, this), \" \", formData.description]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Total Items:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 453,\n                  columnNumber: 22\n                }, this), \" \", formData.lineItems.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Total Amount:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 22\n                }, this), \" USD \", formData.lineItems.reduce((sum, item) => sum + (parseFloat(item.amount) || 0) * (parseInt(item.quantity) || 1), 0).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }, this);\n      default:\n        return null;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex min-h-screen bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      active: \"home\",\n      onNavClick: key => console.log('Nav:', key),\n      logo: process.env.PUBLIC_URL + '/logo192.png'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col min-h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        sectionTitle: \"Create purchase request\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-1 w-full max-w-7xl mx-auto pl-2 pr-8 py-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-64 pr-8\",\n          children: [/*#__PURE__*/_jsxDEV(BackLink, {\n            onClick: handleBack,\n            children: \"Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Stepper, {\n            steps: steps,\n            onStepClick: setCurrentStep\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 flex flex-col\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-3xl\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-2xl font-bold text-gray-800 mb-2\",\n                children: (_steps$currentStep = steps[currentStep]) === null || _steps$currentStep === void 0 ? void 0 : _steps$currentStep.label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: [currentStep === 0 && 'Enter the basic details of your purchase request', currentStep === 1 && 'Provide information about the new supplier', currentStep === 2 && 'Complete security assessment for the new vendor', currentStep === 3 && 'Review your request before submission']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white rounded-lg border border-gray-200 p-8\",\n              children: [renderStepContent(), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between mt-8 pt-6 border-t border-gray-200\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"secondary\",\n                  onClick: handleSaveDraft,\n                  children: \"Save Draft\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 497,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex space-x-4\",\n                  children: [currentStep > 0 && /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"secondary\",\n                    onClick: handleBack,\n                    children: \"Back\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 502,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"primary\",\n                    onClick: handleNext,\n                    children: currentStep === steps.length - 1 ? 'Submit Request' : 'Next'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 506,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 500,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 468,\n    columnNumber: 5\n  }, this);\n}\n_s(RequestForm, \"WVFHyP8376ea6Azoh0xvLHQUaC4=\");\n_c = RequestForm;\nvar _c;\n$RefreshReg$(_c, \"RequestForm\");","map":{"version":3,"names":["React","useState","useEffect","Sidebar","Header","Button","BackLink","Stepper","FormInput","FormSelect","FormTextarea","LineItemsTable","Badge","SUPPLIERS","PURCHASE_TYPES","SUBSIDIARIES","saveDraft","getDraft","generateDraftId","saveCurrentDraft","clearCurrentDraft","SAMPLE_HOME_REQUESTS","localDB","jsxDEV","_jsxDEV","RequestForm","onNavigate","draftId","aiData","_s","_steps$currentStep","currentStep","setCurrentStep","formData","setFormData","id","title","supplier","purchaseType","subsidiary","description","lineItems","currency","amount","quantity","desc","supplierInfo","companyName","contactName","email","phone","address","taxId","security","riskLevel","complianceRequired","securityNotes","errors","setErrors","isNewVendor","setIsNewVendor","newVendorName","setNewVendorName","existingDraft","getById","amt","match","String","parseFloat","replace","_existingDraft$suppli","_existingDraft$suppli2","vendor","prev","steps","label","active","completed","required","filter","step","validateCurrentStep","newErrors","trim","lineItemErrors","map","item","itemErrors","some","Object","keys","length","handleNext","handleSubmit","handleBack","handleSaveDraft","supplierObj","find","s","value","isNewVendorFlag","updatedDraft","update","status","updatedAt","Date","toISOString","handleSupplierChange","handleLineItemsChange","items","allVendorsSet","Set","r","getAll","allVendors","Array","from","Boolean","vendorOptions","push","sortedVendorOptions","slice","sort","a","b","localeCompare","renderStepContent","className","children","onChange","e","target","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","found","opt","options","searchPlaceholder","action","onClick","onActionWithSearch","search","selectedDisplay","text","color","undefined","onItemChange","maxItems","type","checked","reduce","sum","parseInt","toFixed","onNavClick","key","console","log","logo","process","env","PUBLIC_URL","sectionTitle","onStepClick","variant","_c","$RefreshReg$"],"sources":["C:/Users/yacov.gorovoy/Documents/Cursor-workspace/procurement-prototype/src/pages/RequestForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Sidebar from '../components/Sidebar';\r\nimport Header from '../components/Header';\r\nimport Button from '../components/Button';\r\nimport BackLink from '../components/BackLink';\r\nimport Stepper from '../components/Stepper';\r\nimport FormInput from '../components/FormInput';\r\nimport FormSelect from '../components/FormSelect';\r\nimport FormTextarea from '../components/FormTextarea';\r\nimport LineItemsTable from '../components/LineItemsTable';\r\nimport Badge from '../components/Badge';\r\nimport { \r\n  SUPPLIERS, \r\n  PURCHASE_TYPES, \r\n  SUBSIDIARIES, \r\n  saveDraft, \r\n  getDraft, \r\n  generateDraftId,\r\n  saveCurrentDraft,\r\n  clearCurrentDraft,\r\n  SAMPLE_HOME_REQUESTS\r\n} from '../utils/mockData';\r\nimport { localDB } from '../utils/localDB';\r\n\r\nexport default function RequestForm({ onNavigate, draftId, aiData }) {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [formData, setFormData] = useState({\r\n    id: draftId || generateDraftId(),\r\n    title: '',\r\n    supplier: '',\r\n    purchaseType: '',\r\n    subsidiary: '',\r\n    description: '',\r\n    lineItems: [{ currency: 'USD', amount: '', quantity: '1', desc: '' }],\r\n    supplierInfo: {\r\n      companyName: '',\r\n      contactName: '',\r\n      email: '',\r\n      phone: '',\r\n      address: '',\r\n      taxId: ''\r\n    },\r\n    security: {\r\n      riskLevel: '',\r\n      complianceRequired: false,\r\n      securityNotes: ''\r\n    }\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const [isNewVendor, setIsNewVendor] = useState(false);\r\n  const [newVendorName, setNewVendorName] = useState('');\r\n\r\n  useEffect(() => {\r\n    // Load existing draft if draftId provided\r\n    if (draftId) {\r\n      const existingDraft = localDB.getById(draftId);\r\n      if (existingDraft) {\r\n        // Synthesize lineItems if missing\r\n        let lineItems = existingDraft.lineItems;\r\n        if (!lineItems) {\r\n          let amt = 0;\r\n          if (existingDraft.amount) {\r\n            const match = String(existingDraft.amount).match(/([\\d,.]+)/);\r\n            amt = match ? parseFloat(match[1].replace(/,/g, '')) : 0;\r\n          }\r\n          lineItems = [{ currency: 'USD', amount: amt, quantity: '1', desc: 'demo' }];\r\n        }\r\n        setFormData({ ...existingDraft, lineItems });\r\n        setIsNewVendor(existingDraft.supplier === 'new_vendor');\r\n        if (existingDraft.supplier === 'new_vendor') {\r\n          // Set newVendorName from vendor field if present\r\n          setNewVendorName(existingDraft.vendor || existingDraft.supplierInfo?.companyName || '');\r\n          // Ensure supplierInfo.companyName is set\r\n          if (!existingDraft.supplierInfo?.companyName && existingDraft.vendor) {\r\n            setFormData(prev => ({\r\n              ...prev,\r\n              supplierInfo: { ...prev.supplierInfo, companyName: existingDraft.vendor }\r\n            }));\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Load AI data if provided\r\n    if (aiData) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        title: aiData.title || '',\r\n        supplier: aiData.supplier || '',\r\n        purchaseType: aiData.purchaseType || '',\r\n        subsidiary: aiData.subsidiary || '',\r\n        description: aiData.description || '',\r\n        lineItems: aiData.lineItems || [{ currency: 'USD', amount: '', quantity: '1', desc: '' }]\r\n      }));\r\n      setIsNewVendor(aiData.supplier === 'new_vendor');\r\n    }\r\n  }, [draftId, aiData]);\r\n\r\n  useEffect(() => {\r\n    // Save current draft to session storage\r\n    saveCurrentDraft(formData);\r\n  }, [formData]);\r\n\r\n  const steps = [\r\n    { label: 'Purchase details', active: currentStep === 0, completed: currentStep > 0 },\r\n    { label: 'Supplier info', active: currentStep === 1, completed: currentStep > 1, required: isNewVendor },\r\n    { label: 'Security', active: currentStep === 2, completed: currentStep > 2, required: isNewVendor },\r\n    { label: 'Review & Submit', active: currentStep === 3, completed: false }\r\n  ].filter(step => !step.required || step.required === isNewVendor);\r\n\r\n  const validateCurrentStep = () => {\r\n    const newErrors = {};\r\n    \r\n    if (currentStep === 0) {\r\n      if (!formData.title.trim()) newErrors.title = 'Title is required';\r\n      if (!formData.supplier) newErrors.supplier = 'Supplier is required';\r\n      if (!formData.purchaseType) newErrors.purchaseType = 'Purchase type is required';\r\n      if (!formData.subsidiary) newErrors.subsidiary = 'Subsidiary is required';\r\n      if (!formData.description.trim()) newErrors.description = 'Description is required';\r\n      \r\n      // Validate line items\r\n      const lineItemErrors = formData.lineItems.map(item => {\r\n        const itemErrors = {};\r\n        if (!item.amount || parseFloat(item.amount) <= 0) itemErrors.amount = 'Valid amount is required';\r\n        if (!item.desc.trim()) itemErrors.desc = 'Description is required';\r\n        return itemErrors;\r\n      });\r\n      if (lineItemErrors.some(errors => Object.keys(errors).length > 0)) {\r\n        newErrors.lineItems = lineItemErrors;\r\n      }\r\n    }\r\n    \r\n    if (currentStep === 1 && isNewVendor) {\r\n      if (!formData.supplierInfo.companyName.trim()) newErrors.companyName = 'Company name is required';\r\n      if (!formData.supplierInfo.contactName.trim()) newErrors.contactName = 'Contact name is required';\r\n      if (!formData.supplierInfo.email.trim()) newErrors.email = 'Email is required';\r\n    }\r\n    \r\n    if (currentStep === 2 && isNewVendor) {\r\n      if (!formData.security.riskLevel) newErrors.riskLevel = 'Risk level is required';\r\n    }\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleNext = () => {\r\n    // Sync newVendorName to formData.supplierInfo.companyName if needed\r\n    if (formData.supplier === 'new_vendor' && newVendorName && !formData.supplierInfo.companyName) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        supplierInfo: { ...prev.supplierInfo, companyName: newVendorName }\r\n      }));\r\n    }\r\n    if (validateCurrentStep()) {\r\n      if (currentStep < steps.length - 1) {\r\n        setCurrentStep(currentStep + 1);\r\n      } else {\r\n        handleSubmit();\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    if (currentStep > 0) {\r\n      setCurrentStep(currentStep - 1);\r\n    } else {\r\n      onNavigate('home');\r\n    }\r\n  };\r\n\r\n  const handleSaveDraft = () => {\r\n    // Determine vendor name\r\n    let vendor = '';\r\n    if (formData.supplier === 'new_vendor') {\r\n      vendor = formData.supplierInfo.companyName || 'New Vendor';\r\n    } else {\r\n      const supplierObj = SUPPLIERS.find(s => s.value === formData.supplier);\r\n      vendor = supplierObj ? supplierObj.label : formData.supplier;\r\n    }\r\n    const isNewVendorFlag = formData.supplier === 'new_vendor';\r\n    // Save draft with vendor and isNewVendor fields\r\n    const updatedDraft = {\r\n      ...formData,\r\n      vendor,\r\n      isNewVendor: isNewVendorFlag,\r\n    };\r\n    // Update in localDB\r\n    localDB.update(formData.id, updatedDraft);\r\n    onNavigate('home');\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (validateCurrentStep()) {\r\n      // Save as submitted request (in real app, this would go to backend)\r\n      const updatedDraft = {\r\n        ...formData,\r\n        status: 'Pending approval',\r\n        updatedAt: new Date().toISOString(),\r\n      };\r\n      localDB.update(formData.id, updatedDraft);\r\n      onNavigate('home');\r\n    }\r\n  };\r\n\r\n  const handleSupplierChange = (value) => {\r\n    setFormData(prev => ({ ...prev, supplier: value }));\r\n    setIsNewVendor(value === 'new_vendor');\r\n    if (value !== 'new_vendor') setNewVendorName('');\r\n  };\r\n\r\n  const handleLineItemsChange = (items) => {\r\n    setFormData(prev => ({ ...prev, lineItems: items }));\r\n  };\r\n\r\n  // Merge all vendors from SUPPLIERS, SAMPLE_HOME_REQUESTS, and all requests in localDB\r\n  const allVendorsSet = new Set([\r\n    ...SUPPLIERS.map(s => s.label),\r\n    ...SAMPLE_HOME_REQUESTS.map(r => r.vendor),\r\n    ...localDB.getAll().map(r => r.vendor)\r\n  ]);\r\n  const allVendors = Array.from(allVendorsSet).filter(Boolean);\r\n  const vendorOptions = allVendors.map(vendor => {\r\n    const supplier = SUPPLIERS.find(s => s.label === vendor);\r\n    return supplier\r\n      ? { value: supplier.value, label: supplier.label }\r\n      : { value: vendor, label: vendor };\r\n  });\r\n  vendorOptions.push({ value: 'new_vendor', label: 'Add new vendor...' });\r\n  // Sort vendor options alphabetically (except 'Add new vendor...' stays last)\r\n  const sortedVendorOptions = vendorOptions.slice(0, -1).sort((a, b) => a.label.localeCompare(b.label));\r\n  sortedVendorOptions.push(vendorOptions[vendorOptions.length - 1]);\r\n\r\n  const renderStepContent = () => {\r\n    switch (currentStep) {\r\n      case 0:\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <FormInput\r\n              label=\"Request Title\"\r\n              value={formData.title}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\r\n              placeholder=\"e.g., Zoom Premium Licenses for Sales Team\"\r\n              required\r\n              className={errors.title ? 'border-red-500' : ''}\r\n            />\r\n            {errors.title && <p className=\"text-red-500 text-sm\">{errors.title}</p>}\r\n            \r\n            <FormSelect\r\n              label=\"Supplier\"\r\n              value={(() => {\r\n                // Try to match supplier value, otherwise match by vendor label\r\n                if (formData.supplier) return formData.supplier;\r\n                const found = sortedVendorOptions.find(opt => opt.label === formData.vendor);\r\n                return found ? found.value : '';\r\n              })()}\r\n              onChange={handleSupplierChange}\r\n              options={sortedVendorOptions}\r\n              placeholder=\"Select supplier\"\r\n              required\r\n              searchPlaceholder=\"Search suppliers...\"\r\n              action={{ label: 'Add new vendor', onClick: () => handleSupplierChange('new_vendor') }}\r\n              onActionWithSearch={\r\n                (search) => {\r\n                  setNewVendorName(search);\r\n                  setFormData(prev => ({ ...prev, supplier: 'new_vendor' }));\r\n                  setIsNewVendor(true);\r\n                }\r\n              }\r\n              selectedDisplay={\r\n                formData.supplier === 'new_vendor' && newVendorName\r\n                  ? <span className=\"flex items-center gap-2\">\r\n                      {newVendorName}\r\n                      <Badge text=\"New vendor\" color=\"bg-green-100 text-green-800\" />\r\n                    </span>\r\n                  : undefined\r\n              }\r\n            />\r\n            {errors.supplier && <p className=\"text-red-500 text-sm\">{errors.supplier}</p>}\r\n            \r\n            <FormSelect\r\n              label=\"Purchase Type\"\r\n              value={formData.purchaseType}\r\n              onChange={(value) => setFormData(prev => ({ ...prev, purchaseType: value }))}\r\n              options={[...PURCHASE_TYPES].sort((a, b) => a.label.localeCompare(b.label))}\r\n              placeholder=\"Select purchase type\"\r\n              required\r\n            />\r\n            {errors.purchaseType && <p className=\"text-red-500 text-sm\">{errors.purchaseType}</p>}\r\n            \r\n            <FormSelect\r\n              label=\"Subsidiary\"\r\n              value={formData.subsidiary}\r\n              onChange={(value) => setFormData(prev => ({ ...prev, subsidiary: value }))}\r\n              options={[...SUBSIDIARIES].sort((a, b) => a.label.localeCompare(b.label))}\r\n              placeholder=\"Select subsidiary\"\r\n              required\r\n            />\r\n            {errors.subsidiary && <p className=\"text-red-500 text-sm\">{errors.subsidiary}</p>}\r\n            \r\n            <FormTextarea\r\n              label=\"Description\"\r\n              value={formData.description}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\r\n              placeholder=\"Describe the purpose and details of this purchase request\"\r\n              required\r\n            />\r\n            {errors.description && <p className=\"text-red-500 text-sm\">{errors.description}</p>}\r\n            \r\n            <div>\r\n              <label className=\"block mb-2 font-medium text-gray-600\">Line Items</label>\r\n              <LineItemsTable\r\n                items={formData.lineItems}\r\n                onItemChange={handleLineItemsChange}\r\n                maxItems={20}\r\n              />\r\n            </div>\r\n          </div>\r\n        );\r\n        \r\n      case 1:\r\n        if (!isNewVendor) return null;\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <FormInput\r\n              label=\"Company Name\"\r\n              value={formData.supplierInfo.companyName}\r\n              onChange={(e) => setFormData(prev => ({ \r\n                ...prev, \r\n                supplierInfo: { ...prev.supplierInfo, companyName: e.target.value }\r\n              }))}\r\n              placeholder=\"Enter company name\"\r\n              required\r\n            />\r\n            {errors.companyName && <p className=\"text-red-500 text-sm\">{errors.companyName}</p>}\r\n            \r\n            <FormInput\r\n              label=\"Contact Name\"\r\n              value={formData.supplierInfo.contactName}\r\n              onChange={(e) => setFormData(prev => ({ \r\n                ...prev, \r\n                supplierInfo: { ...prev.supplierInfo, contactName: e.target.value }\r\n              }))}\r\n              placeholder=\"Enter contact person name\"\r\n              required\r\n            />\r\n            {errors.contactName && <p className=\"text-red-500 text-sm\">{errors.contactName}</p>}\r\n            \r\n            <FormInput\r\n              label=\"Email\"\r\n              type=\"email\"\r\n              value={formData.supplierInfo.email}\r\n              onChange={(e) => setFormData(prev => ({ \r\n                ...prev, \r\n                supplierInfo: { ...prev.supplierInfo, email: e.target.value }\r\n              }))}\r\n              placeholder=\"Enter contact email\"\r\n              required\r\n            />\r\n            {errors.email && <p className=\"text-red-500 text-sm\">{errors.email}</p>}\r\n            \r\n            <FormInput\r\n              label=\"Phone\"\r\n              value={formData.supplierInfo.phone}\r\n              onChange={(e) => setFormData(prev => ({ \r\n                ...prev, \r\n                supplierInfo: { ...prev.supplierInfo, phone: e.target.value }\r\n              }))}\r\n              placeholder=\"Enter contact phone\"\r\n            />\r\n            \r\n            <FormTextarea\r\n              label=\"Address\"\r\n              value={formData.supplierInfo.address}\r\n              onChange={(e) => setFormData(prev => ({ \r\n                ...prev, \r\n                supplierInfo: { ...prev.supplierInfo, address: e.target.value }\r\n              }))}\r\n              placeholder=\"Enter company address\"\r\n            />\r\n            \r\n            <FormInput\r\n              label=\"Tax ID\"\r\n              value={formData.supplierInfo.taxId}\r\n              onChange={(e) => setFormData(prev => ({ \r\n                ...prev, \r\n                supplierInfo: { ...prev.supplierInfo, taxId: e.target.value }\r\n              }))}\r\n              placeholder=\"Enter tax identification number\"\r\n            />\r\n          </div>\r\n        );\r\n        \r\n      case 2:\r\n        if (!isNewVendor) return null;\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <FormSelect\r\n              label=\"Risk Level\"\r\n              value={formData.security.riskLevel}\r\n              onChange={(value) => setFormData(prev => ({ \r\n                ...prev, \r\n                security: { ...prev.security, riskLevel: value }\r\n              }))}\r\n              options={[\r\n                { value: 'low', label: 'Low Risk' },\r\n                { value: 'medium', label: 'Medium Risk' },\r\n                { value: 'high', label: 'High Risk' }\r\n              ]}\r\n              placeholder=\"Select risk level\"\r\n              required\r\n            />\r\n            {errors.riskLevel && <p className=\"text-red-500 text-sm\">{errors.riskLevel}</p>}\r\n            \r\n            <div>\r\n              <label className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={formData.security.complianceRequired}\r\n                  onChange={(e) => setFormData(prev => ({ \r\n                    ...prev, \r\n                    security: { ...prev.security, complianceRequired: e.target.checked }\r\n                  }))}\r\n                  className=\"mr-2\"\r\n                />\r\n                <span className=\"text-sm font-medium text-gray-700\">Compliance review required</span>\r\n              </label>\r\n            </div>\r\n            \r\n            <FormTextarea\r\n              label=\"Security Notes\"\r\n              value={formData.security.securityNotes}\r\n              onChange={(e) => setFormData(prev => ({ \r\n                ...prev, \r\n                security: { ...prev.security, securityNotes: e.target.value }\r\n              }))}\r\n              placeholder=\"Any additional security considerations or notes\"\r\n            />\r\n          </div>\r\n        );\r\n        \r\n      case 3:\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"bg-gray-50 rounded-lg p-6\">\r\n              <h3 className=\"font-medium text-gray-800 mb-4\">Request Summary</h3>\r\n              <div className=\"space-y-3 text-sm\">\r\n                <div><span className=\"font-medium\">Title:</span> {formData.title}</div>\r\n                <div><span className=\"font-medium\">Supplier:</span> {formData.supplier}</div>\r\n                <div><span className=\"font-medium\">Type:</span> {formData.purchaseType}</div>\r\n                <div><span className=\"font-medium\">Subsidiary:</span> {formData.subsidiary}</div>\r\n                <div><span className=\"font-medium\">Description:</span> {formData.description}</div>\r\n                <div><span className=\"font-medium\">Total Items:</span> {formData.lineItems.length}</div>\r\n                <div><span className=\"font-medium\">Total Amount:</span> USD {formData.lineItems.reduce((sum, item) => \r\n                  sum + (parseFloat(item.amount) || 0) * (parseInt(item.quantity) || 1), 0\r\n                ).toFixed(2)}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n        \r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen bg-gray-50\">\r\n      <Sidebar active=\"home\" onNavClick={key => console.log('Nav:', key)} logo={process.env.PUBLIC_URL + '/logo192.png'} />\r\n      <div className=\"flex-1 flex flex-col min-h-screen\">\r\n        {/* Header bar spanning full width */}\r\n        <Header sectionTitle=\"Create purchase request\" />\r\n        {/* Main content: Stepper left, form right */}\r\n        <div className=\"flex flex-1 w-full max-w-7xl mx-auto pl-2 pr-8 py-10\">\r\n          {/* Stepper on the left */}\r\n          <div className=\"w-64 pr-8\">\r\n            <BackLink onClick={handleBack}>Back</BackLink>\r\n            <Stepper steps={steps} onStepClick={setCurrentStep} />\r\n          </div>\r\n          {/* Form content on the right */}\r\n          <div className=\"flex-1 flex flex-col\">\r\n            <div className=\"max-w-3xl\">\r\n              <div className=\"mb-8\">\r\n                <h1 className=\"text-2xl font-bold text-gray-800 mb-2\">\r\n                  {steps[currentStep]?.label}\r\n                </h1>\r\n                <p className=\"text-gray-600\">\r\n                  {currentStep === 0 && 'Enter the basic details of your purchase request'}\r\n                  {currentStep === 1 && 'Provide information about the new supplier'}\r\n                  {currentStep === 2 && 'Complete security assessment for the new vendor'}\r\n                  {currentStep === 3 && 'Review your request before submission'}\r\n                </p>\r\n              </div>\r\n              <div className=\"bg-white rounded-lg border border-gray-200 p-8\">\r\n                {renderStepContent()}\r\n                <div className=\"flex justify-between mt-8 pt-6 border-t border-gray-200\">\r\n                  <Button variant=\"secondary\" onClick={handleSaveDraft}>\r\n                    Save Draft\r\n                  </Button>\r\n                  <div className=\"flex space-x-4\">\r\n                    {currentStep > 0 && (\r\n                      <Button variant=\"secondary\" onClick={handleBack}>\r\n                        Back\r\n                      </Button>\r\n                    )}\r\n                    <Button \r\n                      variant=\"primary\" \r\n                      onClick={handleNext}\r\n                    >\r\n                      {currentStep === steps.length - 1 ? 'Submit Request' : 'Next'}\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}