{"ast":null,"code":"import React,{useState,useRef}from'react';import Badge from'./Badge';/**\r\n * Search component with grouped dropdown results and highlighting.\r\n * @param {string} value - The search input value\r\n * @param {function} onChange - Input change handler\r\n * @param {object} results - { requests: [...], vendors: [...] }\r\n * @param {function} onResultClick - Handler for clicking a result (optional)\r\n * @param {function} onSeeAllClick - Handler for 'See all results' (optional)\r\n * @param {string} placeholder - Input placeholder\r\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Search(_ref){let{value,onChange,results={requests:[],vendors:[]},onResultClick,onSeeAllClick,placeholder='Search items by name'}=_ref;const[expanded,setExpanded]=useState(false);const inputRef=useRef();// Highlight search term in text\nfunction highlight(text,term){if(!term)return text;const regex=new RegExp(\"(\".concat(term.replace(/[.*+?^${}()|[\\]\\\\]/g,'\\\\$&'),\")\"),'ig');return text.split(regex).map((part,i)=>regex.test(part)?/*#__PURE__*/_jsx(\"mark\",{className:\"bg-yellow-200 px-0.5 rounded\",children:part},i):part);}// Expand on focus or typing\nfunction handleFocus(){setExpanded(true);}function handleBlur(e){// Collapse only if focus leaves the whole search area\nsetTimeout(()=>setExpanded(false),100);}return/*#__PURE__*/_jsxs(\"div\",{className:\"relative transition-all duration-200 \".concat(expanded?'w-[480px]':'w-[320px]',\" max-w-full\"),onBlur:handleBlur,tabIndex:-1,children:[/*#__PURE__*/_jsx(\"input\",{ref:inputRef,type:\"text\",value:value,onChange:onChange,onFocus:handleFocus,placeholder:placeholder,className:\"form-input pl-10 py-2 rounded border border-gray-300 focus:ring-2 focus:ring-blue-200 w-full\",autoComplete:\"off\"}),/*#__PURE__*/_jsxs(\"svg\",{className:\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"11\",cy:\"11\",r:\"8\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"21\",y1:\"21\",x2:\"16.65\",y2:\"16.65\"})]}),expanded&&value&&(results.requests.length>0||results.vendors.length>0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute left-0 mt-2 w-full bg-white rounded-lg shadow-xl z-30 border border-gray-200 py-2 px-0\",children:[results.requests.length>0&&/*#__PURE__*/_jsx(\"div\",{children:results.requests.map((req,idx)=>/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center w-full px-4 py-3 hover:bg-gray-50 transition text-left\",onClick:()=>onResultClick&&onResultClick(req,'request'),type:\"button\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 mr-3\",children:req.icon||/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"rect\",{x:\"4\",y:\"4\",width:\"16\",height:\"16\",rx:\"4\",fill:\"#F3F4F6\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M8 8h8v2H8V8zm0 4h5v2H8v-2z\",fill:\"#9CA3AF\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-base text-gray-900 truncate\",children:highlight(req.vendor,value)}),req.status&&/*#__PURE__*/_jsx(Badge,{text:req.status,color:\"bg-indigo-100 text-indigo-800\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600 flex gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:req.amount}),/*#__PURE__*/_jsx(\"span\",{children:req.date})]})]})]},req.id||idx))}),results.vendors.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"pt-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 pb-1 text-xs font-semibold text-gray-500 uppercase tracking-wider\",children:\"Vendors\"}),results.vendors.map((vendor,idx)=>/*#__PURE__*/_jsx(\"button\",{className:\"flex items-center w-full px-4 py-2 hover:bg-gray-50 transition text-left\",onClick:()=>onResultClick&&onResultClick(vendor,'vendor'),type:\"button\",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-base text-gray-900 truncate\",children:highlight(vendor.name,value)})},vendor.id||idx))]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t mt-2 pt-2 px-4\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"w-full text-left text-sm text-blue-700 font-medium hover:underline py-2\",onClick:()=>onSeeAllClick&&onSeeAllClick(value),type:\"button\",children:[\"See all results for '\",value,\"' \\u2192\"]})})]})]});}","map":{"version":3,"names":["React","useState","useRef","Badge","jsx","_jsx","jsxs","_jsxs","Search","_ref","value","onChange","results","requests","vendors","onResultClick","onSeeAllClick","placeholder","expanded","setExpanded","inputRef","highlight","text","term","regex","RegExp","concat","replace","split","map","part","i","test","className","children","handleFocus","handleBlur","e","setTimeout","onBlur","tabIndex","ref","type","onFocus","autoComplete","fill","stroke","strokeWidth","viewBox","cx","cy","r","x1","y1","x2","y2","length","req","idx","onClick","icon","width","height","x","y","rx","d","vendor","status","color","amount","date","id","name"],"sources":["C:/Users/yacov.gorovoy/Documents/Cursor-workspace/procurement-prototype/src/components/Search.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport Badge from './Badge';\r\n\r\n/**\r\n * Search component with grouped dropdown results and highlighting.\r\n * @param {string} value - The search input value\r\n * @param {function} onChange - Input change handler\r\n * @param {object} results - { requests: [...], vendors: [...] }\r\n * @param {function} onResultClick - Handler for clicking a result (optional)\r\n * @param {function} onSeeAllClick - Handler for 'See all results' (optional)\r\n * @param {string} placeholder - Input placeholder\r\n */\r\nexport default function Search({\r\n  value,\r\n  onChange,\r\n  results = { requests: [], vendors: [] },\r\n  onResultClick,\r\n  onSeeAllClick,\r\n  placeholder = 'Search items by name',\r\n}) {\r\n  const [expanded, setExpanded] = useState(false);\r\n  const inputRef = useRef();\r\n\r\n  // Highlight search term in text\r\n  function highlight(text, term) {\r\n    if (!term) return text;\r\n    const regex = new RegExp(`(${term.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'ig');\r\n    return text.split(regex).map((part, i) =>\r\n      regex.test(part) ? <mark key={i} className=\"bg-yellow-200 px-0.5 rounded\">{part}</mark> : part\r\n    );\r\n  }\r\n\r\n  // Expand on focus or typing\r\n  function handleFocus() {\r\n    setExpanded(true);\r\n  }\r\n  function handleBlur(e) {\r\n    // Collapse only if focus leaves the whole search area\r\n    setTimeout(() => setExpanded(false), 100);\r\n  }\r\n\r\n  return (\r\n    <div className={`relative transition-all duration-200 ${expanded ? 'w-[480px]' : 'w-[320px]'} max-w-full`}\r\n      onBlur={handleBlur}\r\n      tabIndex={-1}\r\n    >\r\n      <input\r\n        ref={inputRef}\r\n        type=\"text\"\r\n        value={value}\r\n        onChange={onChange}\r\n        onFocus={handleFocus}\r\n        placeholder={placeholder}\r\n        className=\"form-input pl-10 py-2 rounded border border-gray-300 focus:ring-2 focus:ring-blue-200 w-full\"\r\n        autoComplete=\"off\"\r\n      />\r\n      <svg className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\"><circle cx=\"11\" cy=\"11\" r=\"8\" /><line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" /></svg>\r\n      {/* Dropdown */}\r\n      {expanded && value && (results.requests.length > 0 || results.vendors.length > 0) && (\r\n        <div className=\"absolute left-0 mt-2 w-full bg-white rounded-lg shadow-xl z-30 border border-gray-200 py-2 px-0\">\r\n          {/* Requests group */}\r\n          {results.requests.length > 0 && (\r\n            <div>\r\n              {results.requests.map((req, idx) => (\r\n                <button\r\n                  key={req.id || idx}\r\n                  className=\"flex items-center w-full px-4 py-3 hover:bg-gray-50 transition text-left\"\r\n                  onClick={() => onResultClick && onResultClick(req, 'request')}\r\n                  type=\"button\"\r\n                >\r\n                  <span className=\"flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 mr-3\">\r\n                    {req.icon || (\r\n                      <svg width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"4\" fill=\"#F3F4F6\" /><path d=\"M8 8h8v2H8V8zm0 4h5v2H8v-2z\" fill=\"#9CA3AF\" /></svg>\r\n                    )}\r\n                  </span>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <span className=\"font-semibold text-base text-gray-900 truncate\">{highlight(req.vendor, value)}</span>\r\n                      {req.status && <Badge text={req.status} color=\"bg-indigo-100 text-indigo-800\" />}\r\n                    </div>\r\n                    <div className=\"text-xs text-gray-600 flex gap-2\">\r\n                      <span>{req.amount}</span>\r\n                      <span>{req.date}</span>\r\n                    </div>\r\n                  </div>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n          {/* Vendors group */}\r\n          {results.vendors.length > 0 && (\r\n            <div className=\"pt-2\">\r\n              <div className=\"px-4 pb-1 text-xs font-semibold text-gray-500 uppercase tracking-wider\">Vendors</div>\r\n              {results.vendors.map((vendor, idx) => (\r\n                <button\r\n                  key={vendor.id || idx}\r\n                  className=\"flex items-center w-full px-4 py-2 hover:bg-gray-50 transition text-left\"\r\n                  onClick={() => onResultClick && onResultClick(vendor, 'vendor')}\r\n                  type=\"button\"\r\n                >\r\n                  <span className=\"font-semibold text-base text-gray-900 truncate\">{highlight(vendor.name, value)}</span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n          {/* See all results */}\r\n          <div className=\"border-t mt-2 pt-2 px-4\">\r\n            <button\r\n              className=\"w-full text-left text-sm text-blue-700 font-medium hover:underline py-2\"\r\n              onClick={() => onSeeAllClick && onSeeAllClick(value)}\r\n              type=\"button\"\r\n            >\r\n              See all results for '{value}' →\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}