{"ast":null,"code":"// Local database utility for managing procurement records\nimport { ALL_SAMPLE_REQUESTS } from './mockData';\nconst DB_KEY = 'procurement_records';\n\n// Initialize database with sample requests\nconst initializeDB = () => {\n  const existingData = localStorage.getItem(DB_KEY);\n  if (!existingData) {\n    const sampleData = ALL_SAMPLE_REQUESTS;\n    localStorage.setItem(DB_KEY, JSON.stringify(sampleData));\n    return sampleData;\n  }\n\n  // Check if existing data has the new structure\n  const parsedData = JSON.parse(existingData);\n  const hasNewStructure = parsedData.length > 0 && parsedData[0].approvalFlow && parsedData[0].requestNumber;\n  if (!hasNewStructure) {\n    // Force refresh with new structure\n    const sampleData = ALL_SAMPLE_REQUESTS;\n    localStorage.setItem(DB_KEY, JSON.stringify(sampleData));\n    return sampleData;\n  }\n  return parsedData;\n};\n\n// Force refresh function to clear and reinitialize data\nexport const forceRefreshData = () => {\n  localStorage.removeItem(DB_KEY);\n  return initializeDB();\n};\n\n// CRUD Operations\nexport const localDB = {\n  // Get all records\n  getAll: () => {\n    const data = localStorage.getItem(DB_KEY);\n    return data ? JSON.parse(data) : initializeDB();\n  },\n  // Get record by ID\n  getById: id => {\n    const records = localDB.getAll();\n    return records.find(record => record.id === id);\n  },\n  // Get counts for each tab and filter\n  getCounts: () => {\n    const records = localDB.getAll();\n\n    // Count for \"To do\" tab\n    const toDoRecords = records.filter(record => record.status === 'Draft' || record.status === 'Pending approval');\n    const toSubmitCount = records.filter(record => record.status === 'Draft').length;\n    const toApproveCount = records.filter(record => record.status === 'Pending approval').length;\n\n    // Count for \"All my items\" tab\n    const allItemsCount = records.length;\n    return {\n      toDo: {\n        total: toDoRecords.length,\n        toSubmit: toSubmitCount,\n        toApprove: toApproveCount\n      },\n      allItems: {\n        total: allItemsCount,\n        myItems: records.filter(record => record.requester === 'Luca.M').length,\n        activeOnly: records.filter(record => record.status !== 'Completed' && record.status !== 'Cancelled').length\n      }\n    };\n  },\n  // Get records with filters\n  getFiltered: ({\n    tab = 'toDo',\n    // 'toDo' or 'allMyItems'\n    filter = 'all',\n    // 'toSubmit', 'toApprove', 'myItems', 'activeOnly'\n    search = '',\n    type = 'all',\n    // 'all', 'requests', 'bills', 'expenses'\n    status = 'all',\n    page = 1,\n    limit = 20\n  } = {}) => {\n    let records = localDB.getAll();\n\n    // Tab filtering\n    if (tab === 'toDo') {\n      records = records.filter(record => record.status === 'Draft' || record.status === 'Pending approval');\n    }\n\n    // Sub-filter filtering\n    if (filter === 'toSubmit') {\n      records = records.filter(record => record.status === 'Draft');\n    } else if (filter === 'toApprove') {\n      records = records.filter(record => record.status === 'Pending approval');\n    } else if (filter === 'myItems') {\n      records = records.filter(record => record.requester === 'Luca.M');\n    } else if (filter === 'activeOnly') {\n      records = records.filter(record => record.status !== 'Completed' && record.status !== 'Cancelled');\n    }\n\n    // Search filtering\n    if (search) {\n      const searchLower = search.toLowerCase();\n      records = records.filter(record => record.title && record.title.toLowerCase().includes(searchLower) || record.vendor && record.vendor.toLowerCase().includes(searchLower) || record.requester && record.requester.toLowerCase().includes(searchLower));\n    }\n\n    // Type filtering (focus on requests for this prototype)\n    if (type !== 'all') {\n      const typeMap = {\n        'requests': 'request',\n        'bills': 'bill',\n        'expenses': 'expense'\n      };\n      records = records.filter(record => record.type === typeMap[type]);\n    }\n\n    // Status filtering\n    if (status !== 'all') {\n      records = records.filter(record => record.status === status);\n    }\n\n    // Sort by date (newest first)\n    records.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n\n    // Pagination\n    const startIndex = (page - 1) * limit;\n    const endIndex = startIndex + limit;\n    const paginatedRecords = records.slice(startIndex, endIndex);\n    return {\n      records: paginatedRecords,\n      totalCount: records.length,\n      hasMore: endIndex < records.length,\n      page,\n      limit\n    };\n  },\n  // Search for grouped results (for search dropdown)\n  search: query => {\n    if (!query) return {\n      requests: [],\n      bills: [],\n      expenses: [],\n      vendors: [],\n      employees: []\n    };\n    const records = localDB.getAll();\n    const queryLower = query.toLowerCase();\n    const requests = records.filter(record => record.type === 'request' && (record.title && record.title.toLowerCase().includes(queryLower) || record.vendor && record.vendor.toLowerCase().includes(queryLower))).slice(0, 5);\n    const bills = records.filter(record => record.type === 'bill' && (record.title && record.title.toLowerCase().includes(queryLower) || record.vendor && record.vendor.toLowerCase().includes(queryLower))).slice(0, 5);\n    const expenses = records.filter(record => record.type === 'expense' && (record.title && record.title.toLowerCase().includes(queryLower) || record.vendor && record.vendor.toLowerCase().includes(queryLower))).slice(0, 5);\n\n    // Extract unique vendors\n    const vendors = [...new Set(records.map(r => r.vendor))].filter(vendor => vendor && vendor.toLowerCase().includes(queryLower)).slice(0, 5).map(name => ({\n      id: name,\n      name\n    }));\n\n    // Extract unique employees (from requesters)\n    const employees = [...new Set(records.map(r => r.requester))].filter(employee => employee && employee.toLowerCase().includes(queryLower)).slice(0, 5).map(name => ({\n      id: name,\n      name\n    }));\n    return {\n      requests,\n      bills,\n      expenses,\n      vendors,\n      employees\n    };\n  },\n  // Update record\n  update: (id, updates) => {\n    const records = localDB.getAll();\n    const index = records.findIndex(record => record.id === id);\n    if (index !== -1) {\n      records[index] = {\n        ...records[index],\n        ...updates,\n        updatedAt: new Date().toISOString()\n      };\n      localStorage.setItem(DB_KEY, JSON.stringify(records));\n      return records[index];\n    }\n    return null;\n  },\n  // Bulk update records\n  bulkUpdate: (ids, updates) => {\n    const records = localDB.getAll();\n    let updateCount = 0;\n    ids.forEach(id => {\n      const index = records.findIndex(record => record.id === id);\n      if (index !== -1) {\n        records[index] = {\n          ...records[index],\n          ...updates,\n          updatedAt: new Date().toISOString()\n        };\n        updateCount++;\n      }\n    });\n    if (updateCount > 0) {\n      localStorage.setItem(DB_KEY, JSON.stringify(records));\n    }\n    return updateCount;\n  },\n  // Add new record\n  add: record => {\n    const records = localDB.getAll();\n    const newRecord = {\n      ...record,\n      id: Date.now().toString(),\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    };\n    records.unshift(newRecord);\n    localStorage.setItem(DB_KEY, JSON.stringify(records));\n    return newRecord;\n  },\n  // Delete record\n  delete: id => {\n    const records = localDB.getAll();\n    const filteredRecords = records.filter(record => record.id !== id);\n    if (filteredRecords.length !== records.length) {\n      localStorage.setItem(DB_KEY, JSON.stringify(filteredRecords));\n      return true;\n    }\n    return false;\n  },\n  // Reset database (for testing)\n  reset: () => {\n    localStorage.removeItem(DB_KEY);\n    return initializeDB();\n  }\n};","map":{"version":3,"names":["ALL_SAMPLE_REQUESTS","DB_KEY","initializeDB","existingData","localStorage","getItem","sampleData","setItem","JSON","stringify","parsedData","parse","hasNewStructure","length","approvalFlow","requestNumber","forceRefreshData","removeItem","localDB","getAll","data","getById","id","records","find","record","getCounts","toDoRecords","filter","status","toSubmitCount","toApproveCount","allItemsCount","toDo","total","toSubmit","toApprove","allItems","myItems","requester","activeOnly","getFiltered","tab","search","type","page","limit","searchLower","toLowerCase","title","includes","vendor","typeMap","sort","a","b","Date","createdAt","startIndex","endIndex","paginatedRecords","slice","totalCount","hasMore","query","requests","bills","expenses","vendors","employees","queryLower","Set","map","r","name","employee","update","updates","index","findIndex","updatedAt","toISOString","bulkUpdate","ids","updateCount","forEach","add","newRecord","now","toString","unshift","delete","filteredRecords","reset"],"sources":["C:/Users/yacov.gorovoy/Documents/Cursor-workspace/procurement-prototype/src/utils/localDB.js"],"sourcesContent":["// Local database utility for managing procurement records\r\nimport { ALL_SAMPLE_REQUESTS } from './mockData';\r\n\r\nconst DB_KEY = 'procurement_records';\r\n\r\n// Initialize database with sample requests\r\nconst initializeDB = () => {\r\n  const existingData = localStorage.getItem(DB_KEY);\r\n  if (!existingData) {\r\n    const sampleData = ALL_SAMPLE_REQUESTS;\r\n    localStorage.setItem(DB_KEY, JSON.stringify(sampleData));\r\n    return sampleData;\r\n  }\r\n  \r\n  // Check if existing data has the new structure\r\n  const parsedData = JSON.parse(existingData);\r\n  const hasNewStructure = parsedData.length > 0 && parsedData[0].approvalFlow && parsedData[0].requestNumber;\r\n  \r\n  if (!hasNewStructure) {\r\n    // Force refresh with new structure\r\n    const sampleData = ALL_SAMPLE_REQUESTS;\r\n    localStorage.setItem(DB_KEY, JSON.stringify(sampleData));\r\n    return sampleData;\r\n  }\r\n  \r\n  return parsedData;\r\n};\r\n\r\n// Force refresh function to clear and reinitialize data\r\nexport const forceRefreshData = () => {\r\n  localStorage.removeItem(DB_KEY);\r\n  return initializeDB();\r\n};\r\n\r\n// CRUD Operations\r\nexport const localDB = {\r\n  // Get all records\r\n  getAll: () => {\r\n    const data = localStorage.getItem(DB_KEY);\r\n    return data ? JSON.parse(data) : initializeDB();\r\n  },\r\n  \r\n  // Get record by ID\r\n  getById: (id) => {\r\n    const records = localDB.getAll();\r\n    return records.find(record => record.id === id);\r\n  },\r\n  \r\n  // Get counts for each tab and filter\r\n  getCounts: () => {\r\n    const records = localDB.getAll();\r\n    \r\n    // Count for \"To do\" tab\r\n    const toDoRecords = records.filter(record => \r\n      record.status === 'Draft' || record.status === 'Pending approval'\r\n    );\r\n    \r\n    const toSubmitCount = records.filter(record => record.status === 'Draft').length;\r\n    const toApproveCount = records.filter(record => record.status === 'Pending approval').length;\r\n    \r\n    // Count for \"All my items\" tab\r\n    const allItemsCount = records.length;\r\n    \r\n    return {\r\n      toDo: {\r\n        total: toDoRecords.length,\r\n        toSubmit: toSubmitCount,\r\n        toApprove: toApproveCount\r\n      },\r\n      allItems: {\r\n        total: allItemsCount,\r\n        myItems: records.filter(record => record.requester === 'Luca.M').length,\r\n        activeOnly: records.filter(record => \r\n          record.status !== 'Completed' && record.status !== 'Cancelled'\r\n        ).length\r\n      }\r\n    };\r\n  },\r\n  \r\n  // Get records with filters\r\n  getFiltered: ({\r\n    tab = 'toDo', // 'toDo' or 'allMyItems'\r\n    filter = 'all', // 'toSubmit', 'toApprove', 'myItems', 'activeOnly'\r\n    search = '',\r\n    type = 'all', // 'all', 'requests', 'bills', 'expenses'\r\n    status = 'all',\r\n    page = 1,\r\n    limit = 20\r\n  } = {}) => {\r\n    let records = localDB.getAll();\r\n    \r\n    // Tab filtering\r\n    if (tab === 'toDo') {\r\n      records = records.filter(record => \r\n        record.status === 'Draft' || record.status === 'Pending approval'\r\n      );\r\n    }\r\n    \r\n    // Sub-filter filtering\r\n    if (filter === 'toSubmit') {\r\n      records = records.filter(record => record.status === 'Draft');\r\n    } else if (filter === 'toApprove') {\r\n      records = records.filter(record => record.status === 'Pending approval');\r\n    } else if (filter === 'myItems') {\r\n      records = records.filter(record => record.requester === 'Luca.M');\r\n    } else if (filter === 'activeOnly') {\r\n      records = records.filter(record => \r\n        record.status !== 'Completed' && record.status !== 'Cancelled'\r\n      );\r\n    }\r\n    \r\n    // Search filtering\r\n    if (search) {\r\n      const searchLower = search.toLowerCase();\r\n      records = records.filter(record =>\r\n        (record.title && record.title.toLowerCase().includes(searchLower)) ||\r\n        (record.vendor && record.vendor.toLowerCase().includes(searchLower)) ||\r\n        (record.requester && record.requester.toLowerCase().includes(searchLower))\r\n      );\r\n    }\r\n    \r\n    // Type filtering (focus on requests for this prototype)\r\n    if (type !== 'all') {\r\n      const typeMap = {\r\n        'requests': 'request',\r\n        'bills': 'bill',\r\n        'expenses': 'expense'\r\n      };\r\n      records = records.filter(record => record.type === typeMap[type]);\r\n    }\r\n    \r\n    // Status filtering\r\n    if (status !== 'all') {\r\n      records = records.filter(record => record.status === status);\r\n    }\r\n    \r\n    // Sort by date (newest first)\r\n    records.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\r\n    \r\n    // Pagination\r\n    const startIndex = (page - 1) * limit;\r\n    const endIndex = startIndex + limit;\r\n    const paginatedRecords = records.slice(startIndex, endIndex);\r\n    \r\n    return {\r\n      records: paginatedRecords,\r\n      totalCount: records.length,\r\n      hasMore: endIndex < records.length,\r\n      page,\r\n      limit\r\n    };\r\n  },\r\n  \r\n  // Search for grouped results (for search dropdown)\r\n  search: (query) => {\r\n    if (!query) return { requests: [], bills: [], expenses: [], vendors: [], employees: [] };\r\n    \r\n    const records = localDB.getAll();\r\n    const queryLower = query.toLowerCase();\r\n    \r\n    const requests = records\r\n      .filter(record => record.type === 'request' && \r\n        ((record.title && record.title.toLowerCase().includes(queryLower)) || \r\n         (record.vendor && record.vendor.toLowerCase().includes(queryLower))))\r\n      .slice(0, 5);\r\n    \r\n    const bills = records\r\n      .filter(record => record.type === 'bill' && \r\n        ((record.title && record.title.toLowerCase().includes(queryLower)) || \r\n         (record.vendor && record.vendor.toLowerCase().includes(queryLower))))\r\n      .slice(0, 5);\r\n    \r\n    const expenses = records\r\n      .filter(record => record.type === 'expense' && \r\n        ((record.title && record.title.toLowerCase().includes(queryLower)) || \r\n         (record.vendor && record.vendor.toLowerCase().includes(queryLower))))\r\n      .slice(0, 5);\r\n    \r\n    // Extract unique vendors\r\n    const vendors = [...new Set(records.map(r => r.vendor))]\r\n      .filter(vendor => vendor && vendor.toLowerCase().includes(queryLower))\r\n      .slice(0, 5)\r\n      .map(name => ({ id: name, name }));\r\n    \r\n    // Extract unique employees (from requesters)\r\n    const employees = [...new Set(records.map(r => r.requester))]\r\n      .filter(employee => employee && employee.toLowerCase().includes(queryLower))\r\n      .slice(0, 5)\r\n      .map(name => ({ id: name, name }));\r\n    \r\n    return {\r\n      requests,\r\n      bills,\r\n      expenses,\r\n      vendors,\r\n      employees\r\n    };\r\n  },\r\n  \r\n  // Update record\r\n  update: (id, updates) => {\r\n    const records = localDB.getAll();\r\n    const index = records.findIndex(record => record.id === id);\r\n    \r\n    if (index !== -1) {\r\n      records[index] = { ...records[index], ...updates, updatedAt: new Date().toISOString() };\r\n      localStorage.setItem(DB_KEY, JSON.stringify(records));\r\n      return records[index];\r\n    }\r\n    \r\n    return null;\r\n  },\r\n  \r\n  // Bulk update records\r\n  bulkUpdate: (ids, updates) => {\r\n    const records = localDB.getAll();\r\n    let updateCount = 0;\r\n    \r\n    ids.forEach(id => {\r\n      const index = records.findIndex(record => record.id === id);\r\n      if (index !== -1) {\r\n        records[index] = { ...records[index], ...updates, updatedAt: new Date().toISOString() };\r\n        updateCount++;\r\n      }\r\n    });\r\n    \r\n    if (updateCount > 0) {\r\n      localStorage.setItem(DB_KEY, JSON.stringify(records));\r\n    }\r\n    \r\n    return updateCount;\r\n  },\r\n  \r\n  // Add new record\r\n  add: (record) => {\r\n    const records = localDB.getAll();\r\n    const newRecord = {\r\n      ...record,\r\n      id: Date.now().toString(),\r\n      createdAt: new Date().toISOString(),\r\n      updatedAt: new Date().toISOString()\r\n    };\r\n    \r\n    records.unshift(newRecord);\r\n    localStorage.setItem(DB_KEY, JSON.stringify(records));\r\n    return newRecord;\r\n  },\r\n  \r\n  // Delete record\r\n  delete: (id) => {\r\n    const records = localDB.getAll();\r\n    const filteredRecords = records.filter(record => record.id !== id);\r\n    \r\n    if (filteredRecords.length !== records.length) {\r\n      localStorage.setItem(DB_KEY, JSON.stringify(filteredRecords));\r\n      return true;\r\n    }\r\n    \r\n    return false;\r\n  },\r\n  \r\n  // Reset database (for testing)\r\n  reset: () => {\r\n    localStorage.removeItem(DB_KEY);\r\n    return initializeDB();\r\n  }\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}