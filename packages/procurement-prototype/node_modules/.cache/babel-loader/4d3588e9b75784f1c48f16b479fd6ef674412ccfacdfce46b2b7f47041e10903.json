{"ast":null,"code":"import _objectSpread from\"C:/Users/yacov.gorovoy/Documents/Cursor-workspace/procurement-prototype/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import Sidebar from'../components/Sidebar';import Header from'../components/Header';import BackLink from'../components/BackLink';import RequestSummaryHeader from'../components/RequestSummaryHeader';import ProcessFlow from'../components/ProcessFlow';import Tabs from'../components/Tabs';import Typography from'../components/Typography';import FormInput from'../components/FormInput';import FormSelect from'../components/FormSelect';import FormTextarea from'../components/FormTextarea';import DatePicker from'../components/DatePicker';import FileUploadInput from'../components/FileUploadInput';import LineItemsTable from'../components/LineItemsTable';import CommentsSection from'../components/CommentsSection';import Button from'../components/Button';import Badge from'../components/Badge';import{localDB,forceRefreshData}from'../utils/localDB';import{PURCHASE_TYPES,SUBSIDIARIES}from'../utils/mockData';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function RequestApprovalScreen(_ref){var _request$approvalFlow2,_request$approvalFlow3,_request$approvalFlow4,_request$purchaseDeta,_request$purchaseDeta2,_request$purchaseDeta3,_request$purchaseDeta4,_request$purchaseDeta5,_request$vendorInfo,_request$vendorInfo2,_request$vendorInfo3,_request$vendorInfo4,_request$legal3,_request$legal3$contr,_request$legal4,_request$legal4$contr,_request$legal5,_request$legal6,_request$legal7,_request$legal8,_request$finance,_request$finance2,_request$finance3;let{onNavigate,requestId}=_ref;const[request,setRequest]=useState(null);const[activeTab,setActiveTab]=useState('purchase');const[loading,setLoading]=useState(true);const[sidebarExpanded,setSidebarExpanded]=useState(true);const[showApprovalModal,setShowApprovalModal]=useState(false);const[approvalAction,setApprovalAction]=useState(null);// Load request data\nuseEffect(()=>{// Force refresh data to ensure we have the latest structure\nforceRefreshData();if(requestId){const requestData=localDB.getById(requestId);if(requestData){setRequest(requestData);}setLoading(false);}},[requestId]);// Handle field updates\nconst handleFieldUpdate=(field,value)=>{if(!request)return;const updatedRequest=_objectSpread({},request);// Update based on field path\nif(field.startsWith('purchaseDetails.')){const subField=field.replace('purchaseDetails.','');updatedRequest.purchaseDetails=_objectSpread(_objectSpread({},updatedRequest.purchaseDetails),{},{[subField]:value});}else if(field.startsWith('vendorInfo.')){const subField=field.replace('vendorInfo.','');updatedRequest.vendorInfo=_objectSpread(_objectSpread({},updatedRequest.vendorInfo),{},{[subField]:value});}else if(field.startsWith('security.')){const subField=field.replace('security.','');updatedRequest.security=_objectSpread(_objectSpread({},updatedRequest.security),{},{[subField]:value});}else if(field.startsWith('legal.')){const subField=field.replace('legal.','');updatedRequest.legal=_objectSpread(_objectSpread({},updatedRequest.legal),{},{[subField]:value});}else if(field.startsWith('finance.')){const subField=field.replace('finance.','');updatedRequest.finance=_objectSpread(_objectSpread({},updatedRequest.finance),{},{[subField]:value});}else{updatedRequest[field]=value;}setRequest(updatedRequest);localDB.update(requestId,updatedRequest);};// Handle line items update\nconst handleLineItemsUpdate=lineItems=>{if(!request)return;const updatedRequest=_objectSpread({},request);updatedRequest.purchaseDetails.lineItems=lineItems;updatedRequest.lineItems=lineItems;setRequest(updatedRequest);localDB.update(requestId,updatedRequest);};// Handle comments\nconst handleAddComment=comment=>{if(!request)return;const newComment={id:\"comment-\".concat(Date.now()),user:{email:'yacov.gorovoy+brandonhyde@tipalti.com'},timestamp:'Just now',message:comment};const updatedRequest=_objectSpread(_objectSpread({},request),{},{comments:[...(request.comments||[]),newComment]});setRequest(updatedRequest);localDB.update(requestId,updatedRequest);};// Handle approval/rejection\nconst handleApprovalAction=action=>{setApprovalAction(action);setShowApprovalModal(true);};const confirmApprovalAction=()=>{if(!request||!approvalAction)return;const updatedRequest=_objectSpread({},request);if(approvalAction==='approve'){var _updatedRequest$appro;// Update approval flow\nif((_updatedRequest$appro=updatedRequest.approvalFlow)!==null&&_updatedRequest$appro!==void 0&&_updatedRequest$appro.steps){const currentStepIndex=updatedRequest.approvalFlow.steps.findIndex(step=>step.status==='current');if(currentStepIndex!==-1){updatedRequest.approvalFlow.steps[currentStepIndex].status='completed';updatedRequest.approvalFlow.steps[currentStepIndex].completedAt=new Date().toISOString();updatedRequest.approvalFlow.steps[currentStepIndex].tooltip=\"Approved \".concat(new Date().toLocaleDateString());// Move to next step or complete\nif(currentStepIndex+1<updatedRequest.approvalFlow.steps.length){updatedRequest.approvalFlow.steps[currentStepIndex+1].status='current';}else{updatedRequest.status='Completed';updatedRequest.statusLabel='COMPLETED';}}}}else if(approvalAction==='reject'){updatedRequest.status='Rejected';updatedRequest.statusLabel='REJECTED';}setRequest(updatedRequest);localDB.update(requestId,updatedRequest);setShowApprovalModal(false);setApprovalAction(null);};// Get tab counts for pending items\nconst getTabCounts=()=>{var _request$security,_request$legal,_request$legal2,_request$legal2$contr;if(!request)return{};const counts={};// Security tab count\nif(!((_request$security=request.security)!==null&&_request$security!==void 0&&_request$security.soc2File)){counts.security=1;}// Legal tab count\nlet legalCount=0;if(!((_request$legal=request.legal)!==null&&_request$legal!==void 0&&_request$legal.contract))legalCount++;if(!((_request$legal2=request.legal)!==null&&_request$legal2!==void 0&&(_request$legal2$contr=_request$legal2.contractPeriod)!==null&&_request$legal2$contr!==void 0&&_request$legal2$contr.startDate))legalCount++;counts.legal=legalCount;return counts;};// Get mentionable users for comments\nconst getMentionableUsers=()=>{var _request$approvalFlow;if(!request)return[];const users=[];// Add approvers from approval flow\nif((_request$approvalFlow=request.approvalFlow)!==null&&_request$approvalFlow!==void 0&&_request$approvalFlow.steps){request.approvalFlow.steps.forEach(step=>{if(step.approver&&step.approver!=='4 possible approvers'){users.push({email:\"\".concat(step.approver.toLowerCase().replace(' ','.'),\"@tipalti.com\"),name:step.approver});}});}// Add existing commenters\nif(request.comments){request.comments.forEach(comment=>{var _comment$user;if((_comment$user=comment.user)!==null&&_comment$user!==void 0&&_comment$user.email){const existingUser=users.find(u=>u.email===comment.user.email);if(!existingUser){users.push({email:comment.user.email,name:comment.user.email.split('@')[0].replace(/\\./g,' ')});}}});}return users;};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"Loading request...\"})})});}if(!request){return/*#__PURE__*/_jsx(\"div\",{className:\"flex min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"Request not found\"})})});}const tabCounts=getTabCounts();const mentionableUsers=getMentionableUsers();return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-gray-50 overflow-hidden\",children:[/*#__PURE__*/_jsx(Sidebar,{active:\"home\",onNavClick:key=>console.log('Nav:',key),expanded:sidebarExpanded,setExpanded:setSidebarExpanded}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col flex-1 transition-all duration-300 min-w-0 \".concat(sidebarExpanded?'ml-48':'ml-16'),children:[/*#__PURE__*/_jsx(Header,{sectionTitle:\"Request Approval\",companyName:\"Acme Corp\",userAvatar:'https://ui-avatars.com/api/?name=User&background=E0E7EF&color=374151&size=64',userEmail:\"yacov.gorovoy@acmecorp.com\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-1 min-h-0 overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col min-w-0 overflow-hidden min-w-[800px]\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mb-3\",children:[/*#__PURE__*/_jsx(BackLink,{onClick:()=>onNavigate('home'),children:\"Back\"}),/*#__PURE__*/_jsx(RequestSummaryHeader,{title:request.title||'Untitled',requestNumber:request.requestNumber||'N/A',status:request.status==='Pending approval'?'Pending Approval':request.status||'Unknown',statusColor:request.status==='Pending approval'?'blue':request.status==='Completed'?'green':'gray',amount:\"\".concat(request.amount||'0.00',\" \").concat(request.currency||'USD'),vendor:request.vendor||'Unknown',category:request.category||'Other'})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 mt-3\",children:[/*#__PURE__*/_jsx(ProcessFlow,{steps:((_request$approvalFlow2=request.approvalFlow)===null||_request$approvalFlow2===void 0?void 0:_request$approvalFlow2.steps)||[]}),((_request$approvalFlow3=request.approvalFlow)===null||_request$approvalFlow3===void 0?void 0:(_request$approvalFlow4=_request$approvalFlow3.reopenedSteps)===null||_request$approvalFlow4===void 0?void 0:_request$approvalFlow4.length)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"text-blue-600 hover:text-blue-800 text-sm\",children:\"Hide previous approvals\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-6 mt-3\",children:/*#__PURE__*/_jsx(Tabs,{tabs:[{label:'Purchase details',key:'purchase'},{label:'Vendor info',key:'vendor'},{label:'Security',key:'security',count:tabCounts.security||0},{label:'Legal',key:'legal',count:tabCounts.legal||0},{label:'Finance',key:'finance'}],activeTab:activeTab,onTabClick:setActiveTab,showCounts:true})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 p-6 pt-3 overflow-y-auto min-h-0\",children:[activeTab==='purchase'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h2\",children:\"Purchase details\"}),/*#__PURE__*/_jsx(FormInput,{label:\"Title *\",value:((_request$purchaseDeta=request.purchaseDetails)===null||_request$purchaseDeta===void 0?void 0:_request$purchaseDeta.title)||'',variant:\"inline\",readOnly:true,onSave:value=>handleFieldUpdate('purchaseDetails.title',value)}),/*#__PURE__*/_jsx(FormSelect,{label:\"Purchase type *\",value:((_request$purchaseDeta2=request.purchaseDetails)===null||_request$purchaseDeta2===void 0?void 0:_request$purchaseDeta2.purchaseType)||'',options:PURCHASE_TYPES,variant:\"inline\",readOnly:true,onSave:value=>handleFieldUpdate('purchaseDetails.purchaseType',value)}),/*#__PURE__*/_jsx(FormInput,{label:\"Vendor name *\",value:((_request$purchaseDeta3=request.purchaseDetails)===null||_request$purchaseDeta3===void 0?void 0:_request$purchaseDeta3.vendorName)||'',variant:\"inline\",readOnly:true,onSave:value=>handleFieldUpdate('purchaseDetails.vendorName',value)}),/*#__PURE__*/_jsx(FormTextarea,{label:\"Description *\",value:((_request$purchaseDeta4=request.purchaseDetails)===null||_request$purchaseDeta4===void 0?void 0:_request$purchaseDeta4.description)||'',variant:\"inline\",readOnly:true,onSave:value=>handleFieldUpdate('purchaseDetails.description',value)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",className:\"mb-3\",children:\"Line items\"}),/*#__PURE__*/_jsx(LineItemsTable,{items:((_request$purchaseDeta5=request.purchaseDetails)===null||_request$purchaseDeta5===void 0?void 0:_request$purchaseDeta5.lineItems)||[],onItemChange:handleLineItemsUpdate,variant:\"inline\",readOnly:true,onEdit:()=>{},onSave:items=>handleLineItemsUpdate(items),onCancel:()=>{}})]})]}),activeTab==='vendor'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h2\",children:\"Vendor info\"}),/*#__PURE__*/_jsx(FormInput,{label:\"Vendor name\",value:((_request$vendorInfo=request.vendorInfo)===null||_request$vendorInfo===void 0?void 0:_request$vendorInfo.vendorName)||'',variant:\"inline\",readOnly:true,onSave:value=>handleFieldUpdate('vendorInfo.vendorName',value)}),/*#__PURE__*/_jsx(FormInput,{label:\"Vendor email\",value:((_request$vendorInfo2=request.vendorInfo)===null||_request$vendorInfo2===void 0?void 0:_request$vendorInfo2.vendorEmail)||'',variant:\"inline\",readOnly:true,onSave:value=>handleFieldUpdate('vendorInfo.vendorEmail',value)}),/*#__PURE__*/_jsx(FormInput,{label:\"Vendor phone\",value:((_request$vendorInfo3=request.vendorInfo)===null||_request$vendorInfo3===void 0?void 0:_request$vendorInfo3.vendorPhone)||'',variant:\"inline\",readOnly:true,onSave:value=>handleFieldUpdate('vendorInfo.vendorPhone',value)}),/*#__PURE__*/_jsx(FormTextarea,{label:\"Vendor address\",value:((_request$vendorInfo4=request.vendorInfo)===null||_request$vendorInfo4===void 0?void 0:_request$vendorInfo4.vendorAddress)||'',variant:\"inline\",readOnly:true,onSave:value=>handleFieldUpdate('vendorInfo.vendorAddress',value)})]}),activeTab==='security'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h2\",children:\"Security\"}),/*#__PURE__*/_jsx(FileUploadInput,{label:\"SOC2 file *\",onFileSelect:file=>handleFieldUpdate('security.soc2File',file),acceptedTypes:['.pdf','.doc','.docx'],maxSize:5*1024*1024,placeholder:\"Upload file...\",required:true,variant:\"inline\",readOnly:true,onSave:file=>handleFieldUpdate('security.soc2File',file)})]}),activeTab==='legal'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h2\",children:\"Legal\"}),/*#__PURE__*/_jsx(FileUploadInput,{label:\"Contract\",onFileSelect:file=>handleFieldUpdate('legal.contract',file),acceptedTypes:['.pdf','.doc','.docx'],maxSize:10*1024*1024,placeholder:\"Upload file...\",variant:\"inline\",readOnly:true,onSave:file=>handleFieldUpdate('legal.contract',file)}),/*#__PURE__*/_jsx(DatePicker,{variant:\"range\",startDate:(_request$legal3=request.legal)!==null&&_request$legal3!==void 0&&(_request$legal3$contr=_request$legal3.contractPeriod)!==null&&_request$legal3$contr!==void 0&&_request$legal3$contr.startDate?new Date(request.legal.contractPeriod.startDate):null,endDate:(_request$legal4=request.legal)!==null&&_request$legal4!==void 0&&(_request$legal4$contr=_request$legal4.contractPeriod)!==null&&_request$legal4$contr!==void 0&&_request$legal4$contr.endDate?new Date(request.legal.contractPeriod.endDate):null,onChange:(start,end)=>{handleFieldUpdate('legal.contractPeriod.startDate',start?start.toISOString().split('T')[0]:null);handleFieldUpdate('legal.contractPeriod.endDate',end?end.toISOString().split('T')[0]:null);},label:\"Contract period\",placeholder:\"Select Date\",inputVariant:\"inline\",readOnly:true}),/*#__PURE__*/_jsx(FormSelect,{label:\"Has auto-renewal clause? (Optional)\",value:((_request$legal5=request.legal)===null||_request$legal5===void 0?void 0:_request$legal5.autoRenewalClause)||'',options:[{label:'Yes',value:'yes'},{label:'No',value:'no'},{label:'Not specified',value:'not_specified'}],variant:\"inline\",readOnly:true,onSave:value=>handleFieldUpdate('legal.autoRenewalClause',value)}),/*#__PURE__*/_jsx(FormInput,{label:\"Service start date\",value:((_request$legal6=request.legal)===null||_request$legal6===void 0?void 0:_request$legal6.serviceStartDate)||'',variant:\"inline\",readOnly:true,onSave:value=>handleFieldUpdate('legal.serviceStartDate',value)}),/*#__PURE__*/_jsx(FormInput,{label:\"Service end date *\",value:((_request$legal7=request.legal)===null||_request$legal7===void 0?void 0:_request$legal7.serviceEndDate)||'',variant:\"inline\",readOnly:true,onSave:value=>handleFieldUpdate('legal.serviceEndDate',value)}),/*#__PURE__*/_jsx(FormInput,{label:\"Amortization Period *\",value:((_request$legal8=request.legal)===null||_request$legal8===void 0?void 0:_request$legal8.amortizationPeriod)||'',variant:\"inline\",readOnly:true,onSave:value=>handleFieldUpdate('legal.amortizationPeriod',value)})]}),activeTab==='finance'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h2\",children:\"Finance\"}),/*#__PURE__*/_jsx(FormInput,{label:\"Budget\",value:((_request$finance=request.finance)===null||_request$finance===void 0?void 0:_request$finance.budget)||'',variant:\"inline\",readOnly:true,onSave:value=>handleFieldUpdate('finance.budget',value)}),/*#__PURE__*/_jsx(FormInput,{label:\"Cost Center\",value:((_request$finance2=request.finance)===null||_request$finance2===void 0?void 0:_request$finance2.costCenter)||'',variant:\"inline\",readOnly:true,onSave:value=>handleFieldUpdate('finance.costCenter',value)}),/*#__PURE__*/_jsx(FormInput,{label:\"GL Account\",value:((_request$finance3=request.finance)===null||_request$finance3===void 0?void 0:_request$finance3.glAccount)||'',variant:\"inline\",readOnly:true,onSave:value=>handleFieldUpdate('finance.glAccount',value)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-t bg-white flex-shrink-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"secondary\",onClick:()=>handleApprovalAction('reject'),className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"svg\",{width:\"16\",height:\"16\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M6 18L18 6M6 6l12 12\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Reject\"})]}),/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:()=>handleApprovalAction('approve'),className:\"flex items-center space-x-2 bg-yellow-500 hover:bg-yellow-600\",children:[/*#__PURE__*/_jsx(\"svg\",{width:\"16\",height:\"16\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M5 13l4 4L19 7\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Approve\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"To approve, complete the form in Security, Legal\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-80 bg-white border-l flex-shrink-0 overflow-hidden min-w-[320px]\",children:/*#__PURE__*/_jsx(CommentsSection,{comments:request.comments||[],mentionableUsers:mentionableUsers,onAddComment:handleAddComment,width:\"md\"})})]})]}),showApprovalModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",className:\"capitalize\",children:approvalAction}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowApprovalModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:approvalAction==='approve'?/*#__PURE__*/_jsx(\"p\",{children:\"Please complete mandatory fields before approving.\"}):/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to reject this request?\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:confirmApprovalAction,className:\"bg-yellow-500 hover:bg-yellow-600\",children:\"Ok\"})})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","Sidebar","Header","BackLink","RequestSummaryHeader","ProcessFlow","Tabs","Typography","FormInput","FormSelect","FormTextarea","DatePicker","FileUploadInput","LineItemsTable","CommentsSection","Button","Badge","localDB","forceRefreshData","PURCHASE_TYPES","SUBSIDIARIES","jsx","_jsx","jsxs","_jsxs","RequestApprovalScreen","_ref","_request$approvalFlow2","_request$approvalFlow3","_request$approvalFlow4","_request$purchaseDeta","_request$purchaseDeta2","_request$purchaseDeta3","_request$purchaseDeta4","_request$purchaseDeta5","_request$vendorInfo","_request$vendorInfo2","_request$vendorInfo3","_request$vendorInfo4","_request$legal3","_request$legal3$contr","_request$legal4","_request$legal4$contr","_request$legal5","_request$legal6","_request$legal7","_request$legal8","_request$finance","_request$finance2","_request$finance3","onNavigate","requestId","request","setRequest","activeTab","setActiveTab","loading","setLoading","sidebarExpanded","setSidebarExpanded","showApprovalModal","setShowApprovalModal","approvalAction","setApprovalAction","requestData","getById","handleFieldUpdate","field","value","updatedRequest","_objectSpread","startsWith","subField","replace","purchaseDetails","vendorInfo","security","legal","finance","update","handleLineItemsUpdate","lineItems","handleAddComment","comment","newComment","id","concat","Date","now","user","email","timestamp","message","comments","handleApprovalAction","action","confirmApprovalAction","_updatedRequest$appro","approvalFlow","steps","currentStepIndex","findIndex","step","status","completedAt","toISOString","tooltip","toLocaleDateString","length","statusLabel","getTabCounts","_request$security","_request$legal","_request$legal2","_request$legal2$contr","counts","soc2File","legalCount","contract","contractPeriod","startDate","getMentionableUsers","_request$approvalFlow","users","forEach","approver","push","toLowerCase","name","_comment$user","existingUser","find","u","split","className","children","tabCounts","mentionableUsers","active","onNavClick","key","console","log","expanded","setExpanded","sectionTitle","companyName","userAvatar","userEmail","onClick","title","requestNumber","statusColor","amount","currency","vendor","category","reopenedSteps","tabs","label","count","onTabClick","showCounts","variant","readOnly","onSave","purchaseType","options","vendorName","description","items","onItemChange","onEdit","onCancel","vendorEmail","vendorPhone","vendorAddress","onFileSelect","file","acceptedTypes","maxSize","placeholder","required","endDate","onChange","start","end","inputVariant","autoRenewalClause","serviceStartDate","serviceEndDate","amortizationPeriod","budget","costCenter","glAccount","width","height","fill","stroke","strokeWidth","viewBox","d","onAddComment"],"sources":["C:/Users/yacov.gorovoy/Documents/Cursor-workspace/procurement-prototype/src/pages/RequestApprovalScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Sidebar from '../components/Sidebar';\r\nimport Header from '../components/Header';\r\nimport BackLink from '../components/BackLink';\r\nimport RequestSummaryHeader from '../components/RequestSummaryHeader';\r\nimport ProcessFlow from '../components/ProcessFlow';\r\nimport Tabs from '../components/Tabs';\r\nimport Typography from '../components/Typography';\r\nimport FormInput from '../components/FormInput';\r\nimport FormSelect from '../components/FormSelect';\r\nimport FormTextarea from '../components/FormTextarea';\r\nimport DatePicker from '../components/DatePicker';\r\nimport FileUploadInput from '../components/FileUploadInput';\r\nimport LineItemsTable from '../components/LineItemsTable';\r\nimport CommentsSection from '../components/CommentsSection';\r\nimport Button from '../components/Button';\r\nimport Badge from '../components/Badge';\r\nimport { localDB, forceRefreshData } from '../utils/localDB';\r\nimport { PURCHASE_TYPES, SUBSIDIARIES } from '../utils/mockData';\r\n\r\nexport default function RequestApprovalScreen({ onNavigate, requestId }) {\r\n  const [request, setRequest] = useState(null);\r\n  const [activeTab, setActiveTab] = useState('purchase');\r\n  const [loading, setLoading] = useState(true);\r\n  const [sidebarExpanded, setSidebarExpanded] = useState(true);\r\n  const [showApprovalModal, setShowApprovalModal] = useState(false);\r\n  const [approvalAction, setApprovalAction] = useState(null);\r\n\r\n  // Load request data\r\n  useEffect(() => {\r\n    // Force refresh data to ensure we have the latest structure\r\n    forceRefreshData();\r\n    \r\n    if (requestId) {\r\n      const requestData = localDB.getById(requestId);\r\n      if (requestData) {\r\n        setRequest(requestData);\r\n      }\r\n      setLoading(false);\r\n    }\r\n  }, [requestId]);\r\n\r\n  // Handle field updates\r\n  const handleFieldUpdate = (field, value) => {\r\n    if (!request) return;\r\n    \r\n    const updatedRequest = { ...request };\r\n    \r\n    // Update based on field path\r\n    if (field.startsWith('purchaseDetails.')) {\r\n      const subField = field.replace('purchaseDetails.', '');\r\n      updatedRequest.purchaseDetails = {\r\n        ...updatedRequest.purchaseDetails,\r\n        [subField]: value\r\n      };\r\n    } else if (field.startsWith('vendorInfo.')) {\r\n      const subField = field.replace('vendorInfo.', '');\r\n      updatedRequest.vendorInfo = {\r\n        ...updatedRequest.vendorInfo,\r\n        [subField]: value\r\n      };\r\n    } else if (field.startsWith('security.')) {\r\n      const subField = field.replace('security.', '');\r\n      updatedRequest.security = {\r\n        ...updatedRequest.security,\r\n        [subField]: value\r\n      };\r\n    } else if (field.startsWith('legal.')) {\r\n      const subField = field.replace('legal.', '');\r\n      updatedRequest.legal = {\r\n        ...updatedRequest.legal,\r\n        [subField]: value\r\n      };\r\n    } else if (field.startsWith('finance.')) {\r\n      const subField = field.replace('finance.', '');\r\n      updatedRequest.finance = {\r\n        ...updatedRequest.finance,\r\n        [subField]: value\r\n      };\r\n    } else {\r\n      updatedRequest[field] = value;\r\n    }\r\n    \r\n    setRequest(updatedRequest);\r\n    localDB.update(requestId, updatedRequest);\r\n  };\r\n\r\n  // Handle line items update\r\n  const handleLineItemsUpdate = (lineItems) => {\r\n    if (!request) return;\r\n    \r\n    const updatedRequest = { ...request };\r\n    updatedRequest.purchaseDetails.lineItems = lineItems;\r\n    updatedRequest.lineItems = lineItems;\r\n    \r\n    setRequest(updatedRequest);\r\n    localDB.update(requestId, updatedRequest);\r\n  };\r\n\r\n  // Handle comments\r\n  const handleAddComment = (comment) => {\r\n    if (!request) return;\r\n    \r\n    const newComment = {\r\n      id: `comment-${Date.now()}`,\r\n      user: { email: 'yacov.gorovoy+brandonhyde@tipalti.com' },\r\n      timestamp: 'Just now',\r\n      message: comment\r\n    };\r\n    \r\n    const updatedRequest = {\r\n      ...request,\r\n      comments: [...(request.comments || []), newComment]\r\n    };\r\n    \r\n    setRequest(updatedRequest);\r\n    localDB.update(requestId, updatedRequest);\r\n  };\r\n\r\n  // Handle approval/rejection\r\n  const handleApprovalAction = (action) => {\r\n    setApprovalAction(action);\r\n    setShowApprovalModal(true);\r\n  };\r\n\r\n  const confirmApprovalAction = () => {\r\n    if (!request || !approvalAction) return;\r\n    \r\n    const updatedRequest = { ...request };\r\n    \r\n    if (approvalAction === 'approve') {\r\n      // Update approval flow\r\n      if (updatedRequest.approvalFlow?.steps) {\r\n        const currentStepIndex = updatedRequest.approvalFlow.steps.findIndex(step => step.status === 'current');\r\n        if (currentStepIndex !== -1) {\r\n          updatedRequest.approvalFlow.steps[currentStepIndex].status = 'completed';\r\n          updatedRequest.approvalFlow.steps[currentStepIndex].completedAt = new Date().toISOString();\r\n          updatedRequest.approvalFlow.steps[currentStepIndex].tooltip = `Approved ${new Date().toLocaleDateString()}`;\r\n          \r\n          // Move to next step or complete\r\n          if (currentStepIndex + 1 < updatedRequest.approvalFlow.steps.length) {\r\n            updatedRequest.approvalFlow.steps[currentStepIndex + 1].status = 'current';\r\n          } else {\r\n            updatedRequest.status = 'Completed';\r\n            updatedRequest.statusLabel = 'COMPLETED';\r\n          }\r\n        }\r\n      }\r\n    } else if (approvalAction === 'reject') {\r\n      updatedRequest.status = 'Rejected';\r\n      updatedRequest.statusLabel = 'REJECTED';\r\n    }\r\n    \r\n    setRequest(updatedRequest);\r\n    localDB.update(requestId, updatedRequest);\r\n    setShowApprovalModal(false);\r\n    setApprovalAction(null);\r\n  };\r\n\r\n  // Get tab counts for pending items\r\n  const getTabCounts = () => {\r\n    if (!request) return {};\r\n    \r\n    const counts = {};\r\n    \r\n    // Security tab count\r\n    if (!request.security?.soc2File) {\r\n      counts.security = 1;\r\n    }\r\n    \r\n    // Legal tab count\r\n    let legalCount = 0;\r\n    if (!request.legal?.contract) legalCount++;\r\n    if (!request.legal?.contractPeriod?.startDate) legalCount++;\r\n    counts.legal = legalCount;\r\n    \r\n    return counts;\r\n  };\r\n\r\n  // Get mentionable users for comments\r\n  const getMentionableUsers = () => {\r\n    if (!request) return [];\r\n    \r\n    const users = [];\r\n    \r\n    // Add approvers from approval flow\r\n    if (request.approvalFlow?.steps) {\r\n      request.approvalFlow.steps.forEach(step => {\r\n        if (step.approver && step.approver !== '4 possible approvers') {\r\n          users.push({\r\n            email: `${step.approver.toLowerCase().replace(' ', '.')}@tipalti.com`,\r\n            name: step.approver\r\n          });\r\n        }\r\n      });\r\n    }\r\n    \r\n    // Add existing commenters\r\n    if (request.comments) {\r\n      request.comments.forEach(comment => {\r\n        if (comment.user?.email) {\r\n          const existingUser = users.find(u => u.email === comment.user.email);\r\n          if (!existingUser) {\r\n            users.push({\r\n              email: comment.user.email,\r\n              name: comment.user.email.split('@')[0].replace(/\\./g, ' ')\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n    \r\n    return users;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex min-h-screen bg-gray-50\">\r\n        <div className=\"flex-1 flex items-center justify-center\">\r\n          <div className=\"text-gray-500\">Loading request...</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!request) {\r\n    return (\r\n      <div className=\"flex min-h-screen bg-gray-50\">\r\n        <div className=\"flex-1 flex items-center justify-center\">\r\n          <div className=\"text-gray-500\">Request not found</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const tabCounts = getTabCounts();\r\n  const mentionableUsers = getMentionableUsers();\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-50 overflow-hidden\">\r\n      {/* Left Sidebar */}\r\n      <Sidebar active=\"home\" onNavClick={key => console.log('Nav:', key)} expanded={sidebarExpanded} setExpanded={setSidebarExpanded} />\r\n      \r\n      <div className={`flex flex-col flex-1 transition-all duration-300 min-w-0 ${sidebarExpanded ? 'ml-48' : 'ml-16'}`}>\r\n        {/* Header */}\r\n        <Header sectionTitle=\"Request Approval\" companyName=\"Acme Corp\" userAvatar={'https://ui-avatars.com/api/?name=User&background=E0E7EF&color=374151&size=64'} userEmail=\"yacov.gorovoy@acmecorp.com\" />\r\n        \r\n        {/* Main Content */}\r\n        <div className=\"flex flex-1 min-h-0 overflow-hidden\">\r\n          {/* Center Content */}\r\n          <div className=\"flex-1 flex flex-col min-w-0 overflow-hidden min-w-[800px]\">\r\n            {/* Back Link and Request Summary Header */}\r\n            <div className=\"px-6 py-3\">\r\n              <div className=\"flex items-center gap-4 mb-3\">\r\n                <BackLink onClick={() => onNavigate('home')}>Back</BackLink>\r\n                <RequestSummaryHeader\r\n                  title={request.title || 'Untitled'}\r\n                  requestNumber={request.requestNumber || 'N/A'}\r\n                  status={request.status === 'Pending approval' ? 'Pending Approval' : request.status || 'Unknown'}\r\n                  statusColor={request.status === 'Pending approval' ? 'blue' : request.status === 'Completed' ? 'green' : 'gray'}\r\n                  amount={`${request.amount || '0.00'} ${request.currency || 'USD'}`}\r\n                  vendor={request.vendor || 'Unknown'}\r\n                  category={request.category || 'Other'}\r\n                />\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Approval Flow */}\r\n            <div className=\"px-6 mt-3\">\r\n              <ProcessFlow steps={request.approvalFlow?.steps || []} />\r\n              {request.approvalFlow?.reopenedSteps?.length > 0 && (\r\n                <div className=\"mt-3\">\r\n                  <button className=\"text-blue-600 hover:text-blue-800 text-sm\">\r\n                    Hide previous approvals\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            {/* Tabs */}\r\n            <div className=\"px-6 mt-3\">\r\n              <Tabs\r\n                tabs={[\r\n                  { label: 'Purchase details', key: 'purchase' },\r\n                  { label: 'Vendor info', key: 'vendor' },\r\n                  { label: 'Security', key: 'security', count: tabCounts.security || 0 },\r\n                  { label: 'Legal', key: 'legal', count: tabCounts.legal || 0 },\r\n                  { label: 'Finance', key: 'finance' }\r\n                ]}\r\n                activeTab={activeTab}\r\n                onTabClick={setActiveTab}\r\n                showCounts={true}\r\n              />\r\n            </div>\r\n            \r\n            {/* Tab Content */}\r\n            <div className=\"flex-1 p-6 pt-3 overflow-y-auto min-h-0\">\r\n              {activeTab === 'purchase' && (\r\n                <div className=\"space-y-4\">\r\n                  <Typography variant=\"h2\">Purchase details</Typography>\r\n                  \r\n                  <FormInput\r\n                    label=\"Title *\"\r\n                    value={request.purchaseDetails?.title || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('purchaseDetails.title', value)}\r\n                  />\r\n                  \r\n                  <FormSelect\r\n                    label=\"Purchase type *\"\r\n                    value={request.purchaseDetails?.purchaseType || ''}\r\n                    options={PURCHASE_TYPES}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('purchaseDetails.purchaseType', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"Vendor name *\"\r\n                    value={request.purchaseDetails?.vendorName || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('purchaseDetails.vendorName', value)}\r\n                  />\r\n                  \r\n                  <FormTextarea\r\n                    label=\"Description *\"\r\n                    value={request.purchaseDetails?.description || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('purchaseDetails.description', value)}\r\n                  />\r\n                  \r\n                  <div>\r\n                    <Typography variant=\"h3\" className=\"mb-3\">Line items</Typography>\r\n                    <LineItemsTable\r\n                      items={request.purchaseDetails?.lineItems || []}\r\n                      onItemChange={handleLineItemsUpdate}\r\n                      variant=\"inline\"\r\n                      readOnly={true}\r\n                      onEdit={() => {}}\r\n                      onSave={(items) => handleLineItemsUpdate(items)}\r\n                      onCancel={() => {}}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n              \r\n              {activeTab === 'vendor' && (\r\n                <div className=\"space-y-4\">\r\n                  <Typography variant=\"h2\">Vendor info</Typography>\r\n                  \r\n                  <FormInput\r\n                    label=\"Vendor name\"\r\n                    value={request.vendorInfo?.vendorName || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('vendorInfo.vendorName', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"Vendor email\"\r\n                    value={request.vendorInfo?.vendorEmail || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('vendorInfo.vendorEmail', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"Vendor phone\"\r\n                    value={request.vendorInfo?.vendorPhone || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('vendorInfo.vendorPhone', value)}\r\n                  />\r\n                  \r\n                  <FormTextarea\r\n                    label=\"Vendor address\"\r\n                    value={request.vendorInfo?.vendorAddress || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('vendorInfo.vendorAddress', value)}\r\n                  />\r\n                </div>\r\n              )}\r\n              \r\n              {activeTab === 'security' && (\r\n                <div className=\"space-y-4\">\r\n                  <Typography variant=\"h2\">Security</Typography>\r\n                  \r\n                  <FileUploadInput\r\n                    label=\"SOC2 file *\"\r\n                    onFileSelect={(file) => handleFieldUpdate('security.soc2File', file)}\r\n                    acceptedTypes={['.pdf', '.doc', '.docx']}\r\n                    maxSize={5 * 1024 * 1024}\r\n                    placeholder=\"Upload file...\"\r\n                    required\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(file) => handleFieldUpdate('security.soc2File', file)}\r\n                  />\r\n                </div>\r\n              )}\r\n              \r\n              {activeTab === 'legal' && (\r\n                <div className=\"space-y-4\">\r\n                  <Typography variant=\"h2\">Legal</Typography>\r\n                  \r\n                  <FileUploadInput\r\n                    label=\"Contract\"\r\n                    onFileSelect={(file) => handleFieldUpdate('legal.contract', file)}\r\n                    acceptedTypes={['.pdf', '.doc', '.docx']}\r\n                    maxSize={10 * 1024 * 1024}\r\n                    placeholder=\"Upload file...\"\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(file) => handleFieldUpdate('legal.contract', file)}\r\n                  />\r\n                  \r\n                  <DatePicker\r\n                    variant=\"range\"\r\n                    startDate={request.legal?.contractPeriod?.startDate ? new Date(request.legal.contractPeriod.startDate) : null}\r\n                    endDate={request.legal?.contractPeriod?.endDate ? new Date(request.legal.contractPeriod.endDate) : null}\r\n                    onChange={(start, end) => {\r\n                      handleFieldUpdate('legal.contractPeriod.startDate', start ? start.toISOString().split('T')[0] : null);\r\n                      handleFieldUpdate('legal.contractPeriod.endDate', end ? end.toISOString().split('T')[0] : null);\r\n                    }}\r\n                    label=\"Contract period\"\r\n                    placeholder=\"Select Date\"\r\n                    inputVariant=\"inline\"\r\n                    readOnly={true}\r\n                  />\r\n                  \r\n                  <FormSelect\r\n                    label=\"Has auto-renewal clause? (Optional)\"\r\n                    value={request.legal?.autoRenewalClause || ''}\r\n                    options={[\r\n                      { label: 'Yes', value: 'yes' },\r\n                      { label: 'No', value: 'no' },\r\n                      { label: 'Not specified', value: 'not_specified' }\r\n                    ]}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('legal.autoRenewalClause', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"Service start date\"\r\n                    value={request.legal?.serviceStartDate || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('legal.serviceStartDate', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"Service end date *\"\r\n                    value={request.legal?.serviceEndDate || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('legal.serviceEndDate', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"Amortization Period *\"\r\n                    value={request.legal?.amortizationPeriod || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('legal.amortizationPeriod', value)}\r\n                  />\r\n                </div>\r\n              )}\r\n              \r\n              {activeTab === 'finance' && (\r\n                <div className=\"space-y-4\">\r\n                  <Typography variant=\"h2\">Finance</Typography>\r\n                  \r\n                  <FormInput\r\n                    label=\"Budget\"\r\n                    value={request.finance?.budget || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('finance.budget', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"Cost Center\"\r\n                    value={request.finance?.costCenter || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('finance.costCenter', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"GL Account\"\r\n                    value={request.finance?.glAccount || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('finance.glAccount', value)}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            {/* Action Buttons */}\r\n            <div className=\"p-6 border-t bg-white flex-shrink-0\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex space-x-4\">\r\n                  <Button\r\n                    variant=\"secondary\"\r\n                    onClick={() => handleApprovalAction('reject')}\r\n                    className=\"flex items-center space-x-2\"\r\n                  >\r\n                    <svg width=\"16\" height=\"16\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n                      <path d=\"M6 18L18 6M6 6l12 12\"/>\r\n                    </svg>\r\n                    <span>Reject</span>\r\n                  </Button>\r\n                  \r\n                  <Button\r\n                    variant=\"primary\"\r\n                    onClick={() => handleApprovalAction('approve')}\r\n                    className=\"flex items-center space-x-2 bg-yellow-500 hover:bg-yellow-600\"\r\n                  >\r\n                    <svg width=\"16\" height=\"16\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n                      <path d=\"M5 13l4 4L19 7\"/>\r\n                    </svg>\r\n                    <span>Approve</span>\r\n                  </Button>\r\n                </div>\r\n                \r\n                <div className=\"text-sm text-gray-500\">\r\n                  To approve, complete the form in Security, Legal\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Right Sidebar - Comments */}\r\n          <div className=\"w-80 bg-white border-l flex-shrink-0 overflow-hidden min-w-[320px]\">\r\n            <CommentsSection\r\n              comments={request.comments || []}\r\n              mentionableUsers={mentionableUsers}\r\n              onAddComment={handleAddComment}\r\n              width=\"md\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Approval Modal */}\r\n      {showApprovalModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <Typography variant=\"h3\" className=\"capitalize\">{approvalAction}</Typography>\r\n              <button\r\n                onClick={() => setShowApprovalModal(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <svg width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n                  <path d=\"M6 18L18 6M6 6l12 12\"/>\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"mb-6\">\r\n              {approvalAction === 'approve' ? (\r\n                <p>Please complete mandatory fields before approving.</p>\r\n              ) : (\r\n                <p>Are you sure you want to reject this request?</p>\r\n              )}\r\n            </div>\r\n            \r\n            <div className=\"flex justify-end\">\r\n              <Button\r\n                variant=\"primary\"\r\n                onClick={confirmApprovalAction}\r\n                className=\"bg-yellow-500 hover:bg-yellow-600\"\r\n              >\r\n                Ok\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n} "],"mappings":"4JAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,OAAO,KAAM,uBAAuB,CAC3C,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAC7C,MAAO,CAAAC,oBAAoB,KAAM,oCAAoC,CACrE,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,MAAO,CAAAC,IAAI,KAAM,oBAAoB,CACrC,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAC/C,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,CAAAC,YAAY,KAAM,4BAA4B,CACrD,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,CAAAC,eAAe,KAAM,+BAA+B,CAC3D,MAAO,CAAAC,cAAc,KAAM,8BAA8B,CACzD,MAAO,CAAAC,eAAe,KAAM,+BAA+B,CAC3D,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,KAAK,KAAM,qBAAqB,CACvC,OAASC,OAAO,CAAEC,gBAAgB,KAAQ,kBAAkB,CAC5D,OAASC,cAAc,CAAEC,YAAY,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjE,cAAe,SAAS,CAAAC,qBAAqBA,CAAAC,IAAA,CAA4B,KAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,mBAAA,CAAAC,oBAAA,CAAAC,oBAAA,CAAAC,oBAAA,CAAAC,eAAA,CAAAC,qBAAA,CAAAC,eAAA,CAAAC,qBAAA,CAAAC,eAAA,CAAAC,eAAA,CAAAC,eAAA,CAAAC,eAAA,CAAAC,gBAAA,CAAAC,iBAAA,CAAAC,iBAAA,IAA3B,CAAEC,UAAU,CAAEC,SAAU,CAAC,CAAAzB,IAAA,CACrE,KAAM,CAAC0B,OAAO,CAAEC,UAAU,CAAC,CAAGtD,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACuD,SAAS,CAAEC,YAAY,CAAC,CAAGxD,QAAQ,CAAC,UAAU,CAAC,CACtD,KAAM,CAACyD,OAAO,CAAEC,UAAU,CAAC,CAAG1D,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC2D,eAAe,CAAEC,kBAAkB,CAAC,CAAG5D,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAAC6D,iBAAiB,CAAEC,oBAAoB,CAAC,CAAG9D,QAAQ,CAAC,KAAK,CAAC,CACjE,KAAM,CAAC+D,cAAc,CAAEC,iBAAiB,CAAC,CAAGhE,QAAQ,CAAC,IAAI,CAAC,CAE1D;AACAC,SAAS,CAAC,IAAM,CACd;AACAkB,gBAAgB,CAAC,CAAC,CAElB,GAAIiC,SAAS,CAAE,CACb,KAAM,CAAAa,WAAW,CAAG/C,OAAO,CAACgD,OAAO,CAACd,SAAS,CAAC,CAC9C,GAAIa,WAAW,CAAE,CACfX,UAAU,CAACW,WAAW,CAAC,CACzB,CACAP,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACN,SAAS,CAAC,CAAC,CAEf;AACA,KAAM,CAAAe,iBAAiB,CAAGA,CAACC,KAAK,CAAEC,KAAK,GAAK,CAC1C,GAAI,CAAChB,OAAO,CAAE,OAEd,KAAM,CAAAiB,cAAc,CAAAC,aAAA,IAAQlB,OAAO,CAAE,CAErC;AACA,GAAIe,KAAK,CAACI,UAAU,CAAC,kBAAkB,CAAC,CAAE,CACxC,KAAM,CAAAC,QAAQ,CAAGL,KAAK,CAACM,OAAO,CAAC,kBAAkB,CAAE,EAAE,CAAC,CACtDJ,cAAc,CAACK,eAAe,CAAAJ,aAAA,CAAAA,aAAA,IACzBD,cAAc,CAACK,eAAe,MACjC,CAACF,QAAQ,EAAGJ,KAAK,EAClB,CACH,CAAC,IAAM,IAAID,KAAK,CAACI,UAAU,CAAC,aAAa,CAAC,CAAE,CAC1C,KAAM,CAAAC,QAAQ,CAAGL,KAAK,CAACM,OAAO,CAAC,aAAa,CAAE,EAAE,CAAC,CACjDJ,cAAc,CAACM,UAAU,CAAAL,aAAA,CAAAA,aAAA,IACpBD,cAAc,CAACM,UAAU,MAC5B,CAACH,QAAQ,EAAGJ,KAAK,EAClB,CACH,CAAC,IAAM,IAAID,KAAK,CAACI,UAAU,CAAC,WAAW,CAAC,CAAE,CACxC,KAAM,CAAAC,QAAQ,CAAGL,KAAK,CAACM,OAAO,CAAC,WAAW,CAAE,EAAE,CAAC,CAC/CJ,cAAc,CAACO,QAAQ,CAAAN,aAAA,CAAAA,aAAA,IAClBD,cAAc,CAACO,QAAQ,MAC1B,CAACJ,QAAQ,EAAGJ,KAAK,EAClB,CACH,CAAC,IAAM,IAAID,KAAK,CAACI,UAAU,CAAC,QAAQ,CAAC,CAAE,CACrC,KAAM,CAAAC,QAAQ,CAAGL,KAAK,CAACM,OAAO,CAAC,QAAQ,CAAE,EAAE,CAAC,CAC5CJ,cAAc,CAACQ,KAAK,CAAAP,aAAA,CAAAA,aAAA,IACfD,cAAc,CAACQ,KAAK,MACvB,CAACL,QAAQ,EAAGJ,KAAK,EAClB,CACH,CAAC,IAAM,IAAID,KAAK,CAACI,UAAU,CAAC,UAAU,CAAC,CAAE,CACvC,KAAM,CAAAC,QAAQ,CAAGL,KAAK,CAACM,OAAO,CAAC,UAAU,CAAE,EAAE,CAAC,CAC9CJ,cAAc,CAACS,OAAO,CAAAR,aAAA,CAAAA,aAAA,IACjBD,cAAc,CAACS,OAAO,MACzB,CAACN,QAAQ,EAAGJ,KAAK,EAClB,CACH,CAAC,IAAM,CACLC,cAAc,CAACF,KAAK,CAAC,CAAGC,KAAK,CAC/B,CAEAf,UAAU,CAACgB,cAAc,CAAC,CAC1BpD,OAAO,CAAC8D,MAAM,CAAC5B,SAAS,CAAEkB,cAAc,CAAC,CAC3C,CAAC,CAED;AACA,KAAM,CAAAW,qBAAqB,CAAIC,SAAS,EAAK,CAC3C,GAAI,CAAC7B,OAAO,CAAE,OAEd,KAAM,CAAAiB,cAAc,CAAAC,aAAA,IAAQlB,OAAO,CAAE,CACrCiB,cAAc,CAACK,eAAe,CAACO,SAAS,CAAGA,SAAS,CACpDZ,cAAc,CAACY,SAAS,CAAGA,SAAS,CAEpC5B,UAAU,CAACgB,cAAc,CAAC,CAC1BpD,OAAO,CAAC8D,MAAM,CAAC5B,SAAS,CAAEkB,cAAc,CAAC,CAC3C,CAAC,CAED;AACA,KAAM,CAAAa,gBAAgB,CAAIC,OAAO,EAAK,CACpC,GAAI,CAAC/B,OAAO,CAAE,OAEd,KAAM,CAAAgC,UAAU,CAAG,CACjBC,EAAE,YAAAC,MAAA,CAAaC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAE,CAC3BC,IAAI,CAAE,CAAEC,KAAK,CAAE,uCAAwC,CAAC,CACxDC,SAAS,CAAE,UAAU,CACrBC,OAAO,CAAET,OACX,CAAC,CAED,KAAM,CAAAd,cAAc,CAAAC,aAAA,CAAAA,aAAA,IACflB,OAAO,MACVyC,QAAQ,CAAE,CAAC,IAAIzC,OAAO,CAACyC,QAAQ,EAAI,EAAE,CAAC,CAAET,UAAU,CAAC,EACpD,CAED/B,UAAU,CAACgB,cAAc,CAAC,CAC1BpD,OAAO,CAAC8D,MAAM,CAAC5B,SAAS,CAAEkB,cAAc,CAAC,CAC3C,CAAC,CAED;AACA,KAAM,CAAAyB,oBAAoB,CAAIC,MAAM,EAAK,CACvChC,iBAAiB,CAACgC,MAAM,CAAC,CACzBlC,oBAAoB,CAAC,IAAI,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAmC,qBAAqB,CAAGA,CAAA,GAAM,CAClC,GAAI,CAAC5C,OAAO,EAAI,CAACU,cAAc,CAAE,OAEjC,KAAM,CAAAO,cAAc,CAAAC,aAAA,IAAQlB,OAAO,CAAE,CAErC,GAAIU,cAAc,GAAK,SAAS,CAAE,KAAAmC,qBAAA,CAChC;AACA,IAAAA,qBAAA,CAAI5B,cAAc,CAAC6B,YAAY,UAAAD,qBAAA,WAA3BA,qBAAA,CAA6BE,KAAK,CAAE,CACtC,KAAM,CAAAC,gBAAgB,CAAG/B,cAAc,CAAC6B,YAAY,CAACC,KAAK,CAACE,SAAS,CAACC,IAAI,EAAIA,IAAI,CAACC,MAAM,GAAK,SAAS,CAAC,CACvG,GAAIH,gBAAgB,GAAK,CAAC,CAAC,CAAE,CAC3B/B,cAAc,CAAC6B,YAAY,CAACC,KAAK,CAACC,gBAAgB,CAAC,CAACG,MAAM,CAAG,WAAW,CACxElC,cAAc,CAAC6B,YAAY,CAACC,KAAK,CAACC,gBAAgB,CAAC,CAACI,WAAW,CAAG,GAAI,CAAAjB,IAAI,CAAC,CAAC,CAACkB,WAAW,CAAC,CAAC,CAC1FpC,cAAc,CAAC6B,YAAY,CAACC,KAAK,CAACC,gBAAgB,CAAC,CAACM,OAAO,aAAApB,MAAA,CAAe,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACoB,kBAAkB,CAAC,CAAC,CAAE,CAE3G;AACA,GAAIP,gBAAgB,CAAG,CAAC,CAAG/B,cAAc,CAAC6B,YAAY,CAACC,KAAK,CAACS,MAAM,CAAE,CACnEvC,cAAc,CAAC6B,YAAY,CAACC,KAAK,CAACC,gBAAgB,CAAG,CAAC,CAAC,CAACG,MAAM,CAAG,SAAS,CAC5E,CAAC,IAAM,CACLlC,cAAc,CAACkC,MAAM,CAAG,WAAW,CACnClC,cAAc,CAACwC,WAAW,CAAG,WAAW,CAC1C,CACF,CACF,CACF,CAAC,IAAM,IAAI/C,cAAc,GAAK,QAAQ,CAAE,CACtCO,cAAc,CAACkC,MAAM,CAAG,UAAU,CAClClC,cAAc,CAACwC,WAAW,CAAG,UAAU,CACzC,CAEAxD,UAAU,CAACgB,cAAc,CAAC,CAC1BpD,OAAO,CAAC8D,MAAM,CAAC5B,SAAS,CAAEkB,cAAc,CAAC,CACzCR,oBAAoB,CAAC,KAAK,CAAC,CAC3BE,iBAAiB,CAAC,IAAI,CAAC,CACzB,CAAC,CAED;AACA,KAAM,CAAA+C,YAAY,CAAGA,CAAA,GAAM,KAAAC,iBAAA,CAAAC,cAAA,CAAAC,eAAA,CAAAC,qBAAA,CACzB,GAAI,CAAC9D,OAAO,CAAE,MAAO,CAAC,CAAC,CAEvB,KAAM,CAAA+D,MAAM,CAAG,CAAC,CAAC,CAEjB;AACA,GAAI,GAAAJ,iBAAA,CAAC3D,OAAO,CAACwB,QAAQ,UAAAmC,iBAAA,WAAhBA,iBAAA,CAAkBK,QAAQ,EAAE,CAC/BD,MAAM,CAACvC,QAAQ,CAAG,CAAC,CACrB,CAEA;AACA,GAAI,CAAAyC,UAAU,CAAG,CAAC,CAClB,GAAI,GAAAL,cAAA,CAAC5D,OAAO,CAACyB,KAAK,UAAAmC,cAAA,WAAbA,cAAA,CAAeM,QAAQ,EAAED,UAAU,EAAE,CAC1C,GAAI,GAAAJ,eAAA,CAAC7D,OAAO,CAACyB,KAAK,UAAAoC,eAAA,YAAAC,qBAAA,CAAbD,eAAA,CAAeM,cAAc,UAAAL,qBAAA,WAA7BA,qBAAA,CAA+BM,SAAS,EAAEH,UAAU,EAAE,CAC3DF,MAAM,CAACtC,KAAK,CAAGwC,UAAU,CAEzB,MAAO,CAAAF,MAAM,CACf,CAAC,CAED;AACA,KAAM,CAAAM,mBAAmB,CAAGA,CAAA,GAAM,KAAAC,qBAAA,CAChC,GAAI,CAACtE,OAAO,CAAE,MAAO,EAAE,CAEvB,KAAM,CAAAuE,KAAK,CAAG,EAAE,CAEhB;AACA,IAAAD,qBAAA,CAAItE,OAAO,CAAC8C,YAAY,UAAAwB,qBAAA,WAApBA,qBAAA,CAAsBvB,KAAK,CAAE,CAC/B/C,OAAO,CAAC8C,YAAY,CAACC,KAAK,CAACyB,OAAO,CAACtB,IAAI,EAAI,CACzC,GAAIA,IAAI,CAACuB,QAAQ,EAAIvB,IAAI,CAACuB,QAAQ,GAAK,sBAAsB,CAAE,CAC7DF,KAAK,CAACG,IAAI,CAAC,CACTpC,KAAK,IAAAJ,MAAA,CAAKgB,IAAI,CAACuB,QAAQ,CAACE,WAAW,CAAC,CAAC,CAACtD,OAAO,CAAC,GAAG,CAAE,GAAG,CAAC,gBAAc,CACrEuD,IAAI,CAAE1B,IAAI,CAACuB,QACb,CAAC,CAAC,CACJ,CACF,CAAC,CAAC,CACJ,CAEA;AACA,GAAIzE,OAAO,CAACyC,QAAQ,CAAE,CACpBzC,OAAO,CAACyC,QAAQ,CAAC+B,OAAO,CAACzC,OAAO,EAAI,KAAA8C,aAAA,CAClC,IAAAA,aAAA,CAAI9C,OAAO,CAACM,IAAI,UAAAwC,aAAA,WAAZA,aAAA,CAAcvC,KAAK,CAAE,CACvB,KAAM,CAAAwC,YAAY,CAAGP,KAAK,CAACQ,IAAI,CAACC,CAAC,EAAIA,CAAC,CAAC1C,KAAK,GAAKP,OAAO,CAACM,IAAI,CAACC,KAAK,CAAC,CACpE,GAAI,CAACwC,YAAY,CAAE,CACjBP,KAAK,CAACG,IAAI,CAAC,CACTpC,KAAK,CAAEP,OAAO,CAACM,IAAI,CAACC,KAAK,CACzBsC,IAAI,CAAE7C,OAAO,CAACM,IAAI,CAACC,KAAK,CAAC2C,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC5D,OAAO,CAAC,KAAK,CAAE,GAAG,CAC3D,CAAC,CAAC,CACJ,CACF,CACF,CAAC,CAAC,CACJ,CAEA,MAAO,CAAAkD,KAAK,CACd,CAAC,CAED,GAAInE,OAAO,CAAE,CACX,mBACElC,IAAA,QAAKgH,SAAS,CAAC,8BAA8B,CAAAC,QAAA,cAC3CjH,IAAA,QAAKgH,SAAS,CAAC,yCAAyC,CAAAC,QAAA,cACtDjH,IAAA,QAAKgH,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,oBAAkB,CAAK,CAAC,CACpD,CAAC,CACH,CAAC,CAEV,CAEA,GAAI,CAACnF,OAAO,CAAE,CACZ,mBACE9B,IAAA,QAAKgH,SAAS,CAAC,8BAA8B,CAAAC,QAAA,cAC3CjH,IAAA,QAAKgH,SAAS,CAAC,yCAAyC,CAAAC,QAAA,cACtDjH,IAAA,QAAKgH,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,mBAAiB,CAAK,CAAC,CACnD,CAAC,CACH,CAAC,CAEV,CAEA,KAAM,CAAAC,SAAS,CAAG1B,YAAY,CAAC,CAAC,CAChC,KAAM,CAAA2B,gBAAgB,CAAGhB,mBAAmB,CAAC,CAAC,CAE9C,mBACEjG,KAAA,QAAK8G,SAAS,CAAC,0CAA0C,CAAAC,QAAA,eAEvDjH,IAAA,CAACrB,OAAO,EAACyI,MAAM,CAAC,MAAM,CAACC,UAAU,CAAEC,GAAG,EAAIC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAEF,GAAG,CAAE,CAACG,QAAQ,CAAErF,eAAgB,CAACsF,WAAW,CAAErF,kBAAmB,CAAE,CAAC,cAElInC,KAAA,QAAK8G,SAAS,6DAAAhD,MAAA,CAA8D5B,eAAe,CAAG,OAAO,CAAG,OAAO,CAAG,CAAA6E,QAAA,eAEhHjH,IAAA,CAACpB,MAAM,EAAC+I,YAAY,CAAC,kBAAkB,CAACC,WAAW,CAAC,WAAW,CAACC,UAAU,CAAE,8EAA+E,CAACC,SAAS,CAAC,4BAA4B,CAAE,CAAC,cAGrM5H,KAAA,QAAK8G,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAElD/G,KAAA,QAAK8G,SAAS,CAAC,4DAA4D,CAAAC,QAAA,eAEzEjH,IAAA,QAAKgH,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxB/G,KAAA,QAAK8G,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC3CjH,IAAA,CAACnB,QAAQ,EAACkJ,OAAO,CAAEA,CAAA,GAAMnG,UAAU,CAAC,MAAM,CAAE,CAAAqF,QAAA,CAAC,MAAI,CAAU,CAAC,cAC5DjH,IAAA,CAAClB,oBAAoB,EACnBkJ,KAAK,CAAElG,OAAO,CAACkG,KAAK,EAAI,UAAW,CACnCC,aAAa,CAAEnG,OAAO,CAACmG,aAAa,EAAI,KAAM,CAC9ChD,MAAM,CAAEnD,OAAO,CAACmD,MAAM,GAAK,kBAAkB,CAAG,kBAAkB,CAAGnD,OAAO,CAACmD,MAAM,EAAI,SAAU,CACjGiD,WAAW,CAAEpG,OAAO,CAACmD,MAAM,GAAK,kBAAkB,CAAG,MAAM,CAAGnD,OAAO,CAACmD,MAAM,GAAK,WAAW,CAAG,OAAO,CAAG,MAAO,CAChHkD,MAAM,IAAAnE,MAAA,CAAKlC,OAAO,CAACqG,MAAM,EAAI,MAAM,MAAAnE,MAAA,CAAIlC,OAAO,CAACsG,QAAQ,EAAI,KAAK,CAAG,CACnEC,MAAM,CAAEvG,OAAO,CAACuG,MAAM,EAAI,SAAU,CACpCC,QAAQ,CAAExG,OAAO,CAACwG,QAAQ,EAAI,OAAQ,CACvC,CAAC,EACC,CAAC,CACH,CAAC,cAGNpI,KAAA,QAAK8G,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjH,IAAA,CAACjB,WAAW,EAAC8F,KAAK,CAAE,EAAAxE,sBAAA,CAAAyB,OAAO,CAAC8C,YAAY,UAAAvE,sBAAA,iBAApBA,sBAAA,CAAsBwE,KAAK,GAAI,EAAG,CAAE,CAAC,CACxD,EAAAvE,sBAAA,CAAAwB,OAAO,CAAC8C,YAAY,UAAAtE,sBAAA,kBAAAC,sBAAA,CAApBD,sBAAA,CAAsBiI,aAAa,UAAAhI,sBAAA,iBAAnCA,sBAAA,CAAqC+E,MAAM,EAAG,CAAC,eAC9CtF,IAAA,QAAKgH,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnBjH,IAAA,WAAQgH,SAAS,CAAC,2CAA2C,CAAAC,QAAA,CAAC,yBAE9D,CAAQ,CAAC,CACN,CACN,EACE,CAAC,cAGNjH,IAAA,QAAKgH,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBjH,IAAA,CAAChB,IAAI,EACHwJ,IAAI,CAAE,CACJ,CAAEC,KAAK,CAAE,kBAAkB,CAAEnB,GAAG,CAAE,UAAW,CAAC,CAC9C,CAAEmB,KAAK,CAAE,aAAa,CAAEnB,GAAG,CAAE,QAAS,CAAC,CACvC,CAAEmB,KAAK,CAAE,UAAU,CAAEnB,GAAG,CAAE,UAAU,CAAEoB,KAAK,CAAExB,SAAS,CAAC5D,QAAQ,EAAI,CAAE,CAAC,CACtE,CAAEmF,KAAK,CAAE,OAAO,CAAEnB,GAAG,CAAE,OAAO,CAAEoB,KAAK,CAAExB,SAAS,CAAC3D,KAAK,EAAI,CAAE,CAAC,CAC7D,CAAEkF,KAAK,CAAE,SAAS,CAAEnB,GAAG,CAAE,SAAU,CAAC,CACpC,CACFtF,SAAS,CAAEA,SAAU,CACrB2G,UAAU,CAAE1G,YAAa,CACzB2G,UAAU,CAAE,IAAK,CAClB,CAAC,CACC,CAAC,cAGN1I,KAAA,QAAK8G,SAAS,CAAC,yCAAyC,CAAAC,QAAA,EACrDjF,SAAS,GAAK,UAAU,eACvB9B,KAAA,QAAK8G,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjH,IAAA,CAACf,UAAU,EAAC4J,OAAO,CAAC,IAAI,CAAA5B,QAAA,CAAC,kBAAgB,CAAY,CAAC,cAEtDjH,IAAA,CAACd,SAAS,EACRuJ,KAAK,CAAC,SAAS,CACf3F,KAAK,CAAE,EAAAtC,qBAAA,CAAAsB,OAAO,CAACsB,eAAe,UAAA5C,qBAAA,iBAAvBA,qBAAA,CAAyBwH,KAAK,GAAI,EAAG,CAC5Ca,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGjG,KAAK,EAAKF,iBAAiB,CAAC,uBAAuB,CAAEE,KAAK,CAAE,CACtE,CAAC,cAEF9C,IAAA,CAACb,UAAU,EACTsJ,KAAK,CAAC,iBAAiB,CACvB3F,KAAK,CAAE,EAAArC,sBAAA,CAAAqB,OAAO,CAACsB,eAAe,UAAA3C,sBAAA,iBAAvBA,sBAAA,CAAyBuI,YAAY,GAAI,EAAG,CACnDC,OAAO,CAAEpJ,cAAe,CACxBgJ,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGjG,KAAK,EAAKF,iBAAiB,CAAC,8BAA8B,CAAEE,KAAK,CAAE,CAC7E,CAAC,cAEF9C,IAAA,CAACd,SAAS,EACRuJ,KAAK,CAAC,eAAe,CACrB3F,KAAK,CAAE,EAAApC,sBAAA,CAAAoB,OAAO,CAACsB,eAAe,UAAA1C,sBAAA,iBAAvBA,sBAAA,CAAyBwI,UAAU,GAAI,EAAG,CACjDL,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGjG,KAAK,EAAKF,iBAAiB,CAAC,4BAA4B,CAAEE,KAAK,CAAE,CAC3E,CAAC,cAEF9C,IAAA,CAACZ,YAAY,EACXqJ,KAAK,CAAC,eAAe,CACrB3F,KAAK,CAAE,EAAAnC,sBAAA,CAAAmB,OAAO,CAACsB,eAAe,UAAAzC,sBAAA,iBAAvBA,sBAAA,CAAyBwI,WAAW,GAAI,EAAG,CAClDN,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGjG,KAAK,EAAKF,iBAAiB,CAAC,6BAA6B,CAAEE,KAAK,CAAE,CAC5E,CAAC,cAEF5C,KAAA,QAAA+G,QAAA,eACEjH,IAAA,CAACf,UAAU,EAAC4J,OAAO,CAAC,IAAI,CAAC7B,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,YAAU,CAAY,CAAC,cACjEjH,IAAA,CAACT,cAAc,EACb6J,KAAK,CAAE,EAAAxI,sBAAA,CAAAkB,OAAO,CAACsB,eAAe,UAAAxC,sBAAA,iBAAvBA,sBAAA,CAAyB+C,SAAS,GAAI,EAAG,CAChD0F,YAAY,CAAE3F,qBAAsB,CACpCmF,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfQ,MAAM,CAAEA,CAAA,GAAM,CAAC,CAAE,CACjBP,MAAM,CAAGK,KAAK,EAAK1F,qBAAqB,CAAC0F,KAAK,CAAE,CAChDG,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAE,CACpB,CAAC,EACC,CAAC,EACH,CACN,CAEAvH,SAAS,GAAK,QAAQ,eACrB9B,KAAA,QAAK8G,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjH,IAAA,CAACf,UAAU,EAAC4J,OAAO,CAAC,IAAI,CAAA5B,QAAA,CAAC,aAAW,CAAY,CAAC,cAEjDjH,IAAA,CAACd,SAAS,EACRuJ,KAAK,CAAC,aAAa,CACnB3F,KAAK,CAAE,EAAAjC,mBAAA,CAAAiB,OAAO,CAACuB,UAAU,UAAAxC,mBAAA,iBAAlBA,mBAAA,CAAoBqI,UAAU,GAAI,EAAG,CAC5CL,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGjG,KAAK,EAAKF,iBAAiB,CAAC,uBAAuB,CAAEE,KAAK,CAAE,CACtE,CAAC,cAEF9C,IAAA,CAACd,SAAS,EACRuJ,KAAK,CAAC,cAAc,CACpB3F,KAAK,CAAE,EAAAhC,oBAAA,CAAAgB,OAAO,CAACuB,UAAU,UAAAvC,oBAAA,iBAAlBA,oBAAA,CAAoB0I,WAAW,GAAI,EAAG,CAC7CX,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGjG,KAAK,EAAKF,iBAAiB,CAAC,wBAAwB,CAAEE,KAAK,CAAE,CACvE,CAAC,cAEF9C,IAAA,CAACd,SAAS,EACRuJ,KAAK,CAAC,cAAc,CACpB3F,KAAK,CAAE,EAAA/B,oBAAA,CAAAe,OAAO,CAACuB,UAAU,UAAAtC,oBAAA,iBAAlBA,oBAAA,CAAoB0I,WAAW,GAAI,EAAG,CAC7CZ,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGjG,KAAK,EAAKF,iBAAiB,CAAC,wBAAwB,CAAEE,KAAK,CAAE,CACvE,CAAC,cAEF9C,IAAA,CAACZ,YAAY,EACXqJ,KAAK,CAAC,gBAAgB,CACtB3F,KAAK,CAAE,EAAA9B,oBAAA,CAAAc,OAAO,CAACuB,UAAU,UAAArC,oBAAA,iBAAlBA,oBAAA,CAAoB0I,aAAa,GAAI,EAAG,CAC/Cb,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGjG,KAAK,EAAKF,iBAAiB,CAAC,0BAA0B,CAAEE,KAAK,CAAE,CACzE,CAAC,EACC,CACN,CAEAd,SAAS,GAAK,UAAU,eACvB9B,KAAA,QAAK8G,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjH,IAAA,CAACf,UAAU,EAAC4J,OAAO,CAAC,IAAI,CAAA5B,QAAA,CAAC,UAAQ,CAAY,CAAC,cAE9CjH,IAAA,CAACV,eAAe,EACdmJ,KAAK,CAAC,aAAa,CACnBkB,YAAY,CAAGC,IAAI,EAAKhH,iBAAiB,CAAC,mBAAmB,CAAEgH,IAAI,CAAE,CACrEC,aAAa,CAAE,CAAC,MAAM,CAAE,MAAM,CAAE,OAAO,CAAE,CACzCC,OAAO,CAAE,CAAC,CAAG,IAAI,CAAG,IAAK,CACzBC,WAAW,CAAC,gBAAgB,CAC5BC,QAAQ,MACRnB,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGa,IAAI,EAAKhH,iBAAiB,CAAC,mBAAmB,CAAEgH,IAAI,CAAE,CAChE,CAAC,EACC,CACN,CAEA5H,SAAS,GAAK,OAAO,eACpB9B,KAAA,QAAK8G,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjH,IAAA,CAACf,UAAU,EAAC4J,OAAO,CAAC,IAAI,CAAA5B,QAAA,CAAC,OAAK,CAAY,CAAC,cAE3CjH,IAAA,CAACV,eAAe,EACdmJ,KAAK,CAAC,UAAU,CAChBkB,YAAY,CAAGC,IAAI,EAAKhH,iBAAiB,CAAC,gBAAgB,CAAEgH,IAAI,CAAE,CAClEC,aAAa,CAAE,CAAC,MAAM,CAAE,MAAM,CAAE,OAAO,CAAE,CACzCC,OAAO,CAAE,EAAE,CAAG,IAAI,CAAG,IAAK,CAC1BC,WAAW,CAAC,gBAAgB,CAC5BlB,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGa,IAAI,EAAKhH,iBAAiB,CAAC,gBAAgB,CAAEgH,IAAI,CAAE,CAC7D,CAAC,cAEF5J,IAAA,CAACX,UAAU,EACTwJ,OAAO,CAAC,OAAO,CACf3C,SAAS,CAAE,CAAAjF,eAAA,CAAAa,OAAO,CAACyB,KAAK,UAAAtC,eAAA,YAAAC,qBAAA,CAAbD,eAAA,CAAegF,cAAc,UAAA/E,qBAAA,WAA7BA,qBAAA,CAA+BgF,SAAS,CAAG,GAAI,CAAAjC,IAAI,CAACnC,OAAO,CAACyB,KAAK,CAAC0C,cAAc,CAACC,SAAS,CAAC,CAAG,IAAK,CAC9G+D,OAAO,CAAE,CAAA9I,eAAA,CAAAW,OAAO,CAACyB,KAAK,UAAApC,eAAA,YAAAC,qBAAA,CAAbD,eAAA,CAAe8E,cAAc,UAAA7E,qBAAA,WAA7BA,qBAAA,CAA+B6I,OAAO,CAAG,GAAI,CAAAhG,IAAI,CAACnC,OAAO,CAACyB,KAAK,CAAC0C,cAAc,CAACgE,OAAO,CAAC,CAAG,IAAK,CACxGC,QAAQ,CAAEA,CAACC,KAAK,CAAEC,GAAG,GAAK,CACxBxH,iBAAiB,CAAC,gCAAgC,CAAEuH,KAAK,CAAGA,KAAK,CAAChF,WAAW,CAAC,CAAC,CAAC4B,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAG,IAAI,CAAC,CACrGnE,iBAAiB,CAAC,8BAA8B,CAAEwH,GAAG,CAAGA,GAAG,CAACjF,WAAW,CAAC,CAAC,CAAC4B,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAG,IAAI,CAAC,CACjG,CAAE,CACF0B,KAAK,CAAC,iBAAiB,CACvBsB,WAAW,CAAC,aAAa,CACzBM,YAAY,CAAC,QAAQ,CACrBvB,QAAQ,CAAE,IAAK,CAChB,CAAC,cAEF9I,IAAA,CAACb,UAAU,EACTsJ,KAAK,CAAC,qCAAqC,CAC3C3F,KAAK,CAAE,EAAAzB,eAAA,CAAAS,OAAO,CAACyB,KAAK,UAAAlC,eAAA,iBAAbA,eAAA,CAAeiJ,iBAAiB,GAAI,EAAG,CAC9CrB,OAAO,CAAE,CACP,CAAER,KAAK,CAAE,KAAK,CAAE3F,KAAK,CAAE,KAAM,CAAC,CAC9B,CAAE2F,KAAK,CAAE,IAAI,CAAE3F,KAAK,CAAE,IAAK,CAAC,CAC5B,CAAE2F,KAAK,CAAE,eAAe,CAAE3F,KAAK,CAAE,eAAgB,CAAC,CAClD,CACF+F,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGjG,KAAK,EAAKF,iBAAiB,CAAC,yBAAyB,CAAEE,KAAK,CAAE,CACxE,CAAC,cAEF9C,IAAA,CAACd,SAAS,EACRuJ,KAAK,CAAC,oBAAoB,CAC1B3F,KAAK,CAAE,EAAAxB,eAAA,CAAAQ,OAAO,CAACyB,KAAK,UAAAjC,eAAA,iBAAbA,eAAA,CAAeiJ,gBAAgB,GAAI,EAAG,CAC7C1B,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGjG,KAAK,EAAKF,iBAAiB,CAAC,wBAAwB,CAAEE,KAAK,CAAE,CACvE,CAAC,cAEF9C,IAAA,CAACd,SAAS,EACRuJ,KAAK,CAAC,oBAAoB,CAC1B3F,KAAK,CAAE,EAAAvB,eAAA,CAAAO,OAAO,CAACyB,KAAK,UAAAhC,eAAA,iBAAbA,eAAA,CAAeiJ,cAAc,GAAI,EAAG,CAC3C3B,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGjG,KAAK,EAAKF,iBAAiB,CAAC,sBAAsB,CAAEE,KAAK,CAAE,CACrE,CAAC,cAEF9C,IAAA,CAACd,SAAS,EACRuJ,KAAK,CAAC,uBAAuB,CAC7B3F,KAAK,CAAE,EAAAtB,eAAA,CAAAM,OAAO,CAACyB,KAAK,UAAA/B,eAAA,iBAAbA,eAAA,CAAeiJ,kBAAkB,GAAI,EAAG,CAC/C5B,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGjG,KAAK,EAAKF,iBAAiB,CAAC,0BAA0B,CAAEE,KAAK,CAAE,CACzE,CAAC,EACC,CACN,CAEAd,SAAS,GAAK,SAAS,eACtB9B,KAAA,QAAK8G,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjH,IAAA,CAACf,UAAU,EAAC4J,OAAO,CAAC,IAAI,CAAA5B,QAAA,CAAC,SAAO,CAAY,CAAC,cAE7CjH,IAAA,CAACd,SAAS,EACRuJ,KAAK,CAAC,QAAQ,CACd3F,KAAK,CAAE,EAAArB,gBAAA,CAAAK,OAAO,CAAC0B,OAAO,UAAA/B,gBAAA,iBAAfA,gBAAA,CAAiBiJ,MAAM,GAAI,EAAG,CACrC7B,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGjG,KAAK,EAAKF,iBAAiB,CAAC,gBAAgB,CAAEE,KAAK,CAAE,CAC/D,CAAC,cAEF9C,IAAA,CAACd,SAAS,EACRuJ,KAAK,CAAC,aAAa,CACnB3F,KAAK,CAAE,EAAApB,iBAAA,CAAAI,OAAO,CAAC0B,OAAO,UAAA9B,iBAAA,iBAAfA,iBAAA,CAAiBiJ,UAAU,GAAI,EAAG,CACzC9B,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGjG,KAAK,EAAKF,iBAAiB,CAAC,oBAAoB,CAAEE,KAAK,CAAE,CACnE,CAAC,cAEF9C,IAAA,CAACd,SAAS,EACRuJ,KAAK,CAAC,YAAY,CAClB3F,KAAK,CAAE,EAAAnB,iBAAA,CAAAG,OAAO,CAAC0B,OAAO,UAAA7B,iBAAA,iBAAfA,iBAAA,CAAiBiJ,SAAS,GAAI,EAAG,CACxC/B,OAAO,CAAC,QAAQ,CAChBC,QAAQ,CAAE,IAAK,CACfC,MAAM,CAAGjG,KAAK,EAAKF,iBAAiB,CAAC,mBAAmB,CAAEE,KAAK,CAAE,CAClE,CAAC,EACC,CACN,EACE,CAAC,cAGN9C,IAAA,QAAKgH,SAAS,CAAC,qCAAqC,CAAAC,QAAA,cAClD/G,KAAA,QAAK8G,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD/G,KAAA,QAAK8G,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B/G,KAAA,CAACT,MAAM,EACLoJ,OAAO,CAAC,WAAW,CACnBd,OAAO,CAAEA,CAAA,GAAMvD,oBAAoB,CAAC,QAAQ,CAAE,CAC9CwC,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAEvCjH,IAAA,QAAK6K,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,OAAO,CAAC,WAAW,CAAAjE,QAAA,cAC/FjH,IAAA,SAAMmL,CAAC,CAAC,sBAAsB,CAAC,CAAC,CAC7B,CAAC,cACNnL,IAAA,SAAAiH,QAAA,CAAM,QAAM,CAAM,CAAC,EACb,CAAC,cAET/G,KAAA,CAACT,MAAM,EACLoJ,OAAO,CAAC,SAAS,CACjBd,OAAO,CAAEA,CAAA,GAAMvD,oBAAoB,CAAC,SAAS,CAAE,CAC/CwC,SAAS,CAAC,+DAA+D,CAAAC,QAAA,eAEzEjH,IAAA,QAAK6K,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,OAAO,CAAC,WAAW,CAAAjE,QAAA,cAC/FjH,IAAA,SAAMmL,CAAC,CAAC,gBAAgB,CAAC,CAAC,CACvB,CAAC,cACNnL,IAAA,SAAAiH,QAAA,CAAM,SAAO,CAAM,CAAC,EACd,CAAC,EACN,CAAC,cAENjH,IAAA,QAAKgH,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,kDAEvC,CAAK,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,cAGNjH,IAAA,QAAKgH,SAAS,CAAC,oEAAoE,CAAAC,QAAA,cACjFjH,IAAA,CAACR,eAAe,EACd+E,QAAQ,CAAEzC,OAAO,CAACyC,QAAQ,EAAI,EAAG,CACjC4C,gBAAgB,CAAEA,gBAAiB,CACnCiE,YAAY,CAAExH,gBAAiB,CAC/BiH,KAAK,CAAC,IAAI,CACX,CAAC,CACC,CAAC,EACH,CAAC,EACH,CAAC,CAGLvI,iBAAiB,eAChBtC,IAAA,QAAKgH,SAAS,CAAC,4EAA4E,CAAAC,QAAA,cACzF/G,KAAA,QAAK8G,SAAS,CAAC,8CAA8C,CAAAC,QAAA,eAC3D/G,KAAA,QAAK8G,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDjH,IAAA,CAACf,UAAU,EAAC4J,OAAO,CAAC,IAAI,CAAC7B,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAEzE,cAAc,CAAa,CAAC,cAC7ExC,IAAA,WACE+H,OAAO,CAAEA,CAAA,GAAMxF,oBAAoB,CAAC,KAAK,CAAE,CAC3CyE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,cAE7CjH,IAAA,QAAK6K,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,OAAO,CAAC,WAAW,CAAAjE,QAAA,cAC/FjH,IAAA,SAAMmL,CAAC,CAAC,sBAAsB,CAAC,CAAC,CAC7B,CAAC,CACA,CAAC,EACN,CAAC,cAENnL,IAAA,QAAKgH,SAAS,CAAC,MAAM,CAAAC,QAAA,CAClBzE,cAAc,GAAK,SAAS,cAC3BxC,IAAA,MAAAiH,QAAA,CAAG,oDAAkD,CAAG,CAAC,cAEzDjH,IAAA,MAAAiH,QAAA,CAAG,+CAA6C,CAAG,CACpD,CACE,CAAC,cAENjH,IAAA,QAAKgH,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC/BjH,IAAA,CAACP,MAAM,EACLoJ,OAAO,CAAC,SAAS,CACjBd,OAAO,CAAErD,qBAAsB,CAC/BsC,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAC9C,IAED,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,CACH,CACN,EACE,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}