{"ast":null,"code":"import _objectSpread from\"C:/Users/yacov.gorovoy/Documents/Cursor-workspace/procurement-prototype/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import Sidebar from'../components/Sidebar';import Header from'../components/Header';import Button from'../components/Button';import BackLink from'../components/BackLink';import Stepper from'../components/Stepper';import FormInput from'../components/FormInput';import FormSelect from'../components/FormSelect';import FormTextarea from'../components/FormTextarea';import LineItemsTable from'../components/LineItemsTable';import Badge from'../components/Badge';import{SUPPLIERS,PURCHASE_TYPES,SUBSIDIARIES,saveDraft,getDraft,generateDraftId,saveCurrentDraft,clearCurrentDraft}from'../utils/mockData';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function RequestForm(_ref){var _steps$currentStep;let{onNavigate,draftId,aiData}=_ref;const[currentStep,setCurrentStep]=useState(0);const[formData,setFormData]=useState({id:draftId||generateDraftId(),title:'',supplier:'',purchaseType:'',subsidiary:'',description:'',lineItems:[{currency:'USD',amount:'',quantity:'1',desc:''}],supplierInfo:{companyName:'',contactName:'',email:'',phone:'',address:'',taxId:''},security:{riskLevel:'',complianceRequired:false,securityNotes:''}});const[errors,setErrors]=useState({});const[isNewVendor,setIsNewVendor]=useState(false);const[newVendorName,setNewVendorName]=useState('');useEffect(()=>{// Load existing draft if draftId provided\nif(draftId){const existingDraft=getDraft(draftId);if(existingDraft){setFormData(existingDraft);setIsNewVendor(existingDraft.supplier==='new_vendor');}}// Load AI data if provided\nif(aiData){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{title:aiData.title||'',supplier:aiData.supplier||'',purchaseType:aiData.purchaseType||'',subsidiary:aiData.subsidiary||'',description:aiData.description||'',lineItems:aiData.lineItems||[{currency:'USD',amount:'',quantity:'1',desc:''}]}));setIsNewVendor(aiData.supplier==='new_vendor');}},[draftId,aiData]);useEffect(()=>{// Save current draft to session storage\nsaveCurrentDraft(formData);},[formData]);const steps=[{label:'Purchase details',active:currentStep===0,completed:currentStep>0},{label:'Supplier info',active:currentStep===1,completed:currentStep>1,required:isNewVendor},{label:'Security',active:currentStep===2,completed:currentStep>2,required:isNewVendor},{label:'Review & Submit',active:currentStep===3,completed:false}].filter(step=>!step.required||step.required===isNewVendor);const validateCurrentStep=()=>{const newErrors={};if(currentStep===0){if(!formData.title.trim())newErrors.title='Title is required';if(!formData.supplier)newErrors.supplier='Supplier is required';if(!formData.purchaseType)newErrors.purchaseType='Purchase type is required';if(!formData.subsidiary)newErrors.subsidiary='Subsidiary is required';if(!formData.description.trim())newErrors.description='Description is required';// Validate line items\nconst lineItemErrors=formData.lineItems.map(item=>{const itemErrors={};if(!item.amount||parseFloat(item.amount)<=0)itemErrors.amount='Valid amount is required';if(!item.desc.trim())itemErrors.desc='Description is required';return itemErrors;});if(lineItemErrors.some(errors=>Object.keys(errors).length>0)){newErrors.lineItems=lineItemErrors;}}if(currentStep===1&&isNewVendor){if(!formData.supplierInfo.companyName.trim())newErrors.companyName='Company name is required';if(!formData.supplierInfo.contactName.trim())newErrors.contactName='Contact name is required';if(!formData.supplierInfo.email.trim())newErrors.email='Email is required';}if(currentStep===2&&isNewVendor){if(!formData.security.riskLevel)newErrors.riskLevel='Risk level is required';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleNext=()=>{// Sync newVendorName to formData.supplierInfo.companyName if needed\nif(formData.supplier==='new_vendor'&&newVendorName&&!formData.supplierInfo.companyName){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{supplierInfo:_objectSpread(_objectSpread({},prev.supplierInfo),{},{companyName:newVendorName})}));}if(validateCurrentStep()){if(currentStep<steps.length-1){setCurrentStep(currentStep+1);}else{handleSubmit();}}};const handleBack=()=>{if(currentStep>0){setCurrentStep(currentStep-1);}else{onNavigate('home');}};const handleSaveDraft=()=>{saveDraft(formData);onNavigate('home');};const handleSubmit=()=>{if(validateCurrentStep()){// Save as submitted request (in real app, this would go to backend)\nconsole.log('Submitting request:',formData);clearCurrentDraft();onNavigate('home');}};const handleSupplierChange=value=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{supplier:value}));setIsNewVendor(value==='new_vendor');if(value!=='new_vendor')setNewVendorName('');};const handleLineItemsChange=items=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{lineItems:items}));};const renderStepContent=()=>{switch(currentStep){case 0:return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(FormInput,{label:\"Request Title\",value:formData.title,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{title:e.target.value})),placeholder:\"e.g., Zoom Premium Licenses for Sales Team\",required:true,className:errors.title?'border-red-500':''}),errors.title&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:errors.title}),/*#__PURE__*/_jsx(FormSelect,{label:\"Supplier\",value:formData.supplier,onChange:handleSupplierChange,options:SUPPLIERS,placeholder:\"Select supplier\",required:true,searchPlaceholder:\"Search suppliers...\",action:{label:'Add new vendor',onClick:()=>handleSupplierChange('new_vendor')},onActionWithSearch:search=>{setNewVendorName(search);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{supplier:'new_vendor'}));setIsNewVendor(true);},selectedDisplay:formData.supplier==='new_vendor'&&newVendorName?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-2\",children:[newVendorName,/*#__PURE__*/_jsx(Badge,{text:\"New vendor\",color:\"bg-green-100 text-green-800\"})]}):undefined}),errors.supplier&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:errors.supplier}),/*#__PURE__*/_jsx(FormSelect,{label:\"Purchase Type\",value:formData.purchaseType,onChange:value=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{purchaseType:value})),options:PURCHASE_TYPES,placeholder:\"Select purchase type\",required:true}),errors.purchaseType&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:errors.purchaseType}),/*#__PURE__*/_jsx(FormSelect,{label:\"Subsidiary\",value:formData.subsidiary,onChange:value=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{subsidiary:value})),options:SUBSIDIARIES,placeholder:\"Select subsidiary\",required:true}),errors.subsidiary&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:errors.subsidiary}),/*#__PURE__*/_jsx(FormTextarea,{label:\"Description\",value:formData.description,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),placeholder:\"Describe the purpose and details of this purchase request\",required:true}),errors.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:errors.description}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-2 font-medium text-gray-600\",children:\"Line Items\"}),/*#__PURE__*/_jsx(LineItemsTable,{items:formData.lineItems,onItemChange:handleLineItemsChange,maxItems:20})]})]});case 1:if(!isNewVendor)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(FormInput,{label:\"Company Name\",value:formData.supplierInfo.companyName,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{supplierInfo:_objectSpread(_objectSpread({},prev.supplierInfo),{},{companyName:e.target.value})})),placeholder:\"Enter company name\",required:true}),errors.companyName&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:errors.companyName}),/*#__PURE__*/_jsx(FormInput,{label:\"Contact Name\",value:formData.supplierInfo.contactName,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{supplierInfo:_objectSpread(_objectSpread({},prev.supplierInfo),{},{contactName:e.target.value})})),placeholder:\"Enter contact person name\",required:true}),errors.contactName&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:errors.contactName}),/*#__PURE__*/_jsx(FormInput,{label:\"Email\",type:\"email\",value:formData.supplierInfo.email,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{supplierInfo:_objectSpread(_objectSpread({},prev.supplierInfo),{},{email:e.target.value})})),placeholder:\"Enter contact email\",required:true}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:errors.email}),/*#__PURE__*/_jsx(FormInput,{label:\"Phone\",value:formData.supplierInfo.phone,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{supplierInfo:_objectSpread(_objectSpread({},prev.supplierInfo),{},{phone:e.target.value})})),placeholder:\"Enter contact phone\"}),/*#__PURE__*/_jsx(FormTextarea,{label:\"Address\",value:formData.supplierInfo.address,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{supplierInfo:_objectSpread(_objectSpread({},prev.supplierInfo),{},{address:e.target.value})})),placeholder:\"Enter company address\"}),/*#__PURE__*/_jsx(FormInput,{label:\"Tax ID\",value:formData.supplierInfo.taxId,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{supplierInfo:_objectSpread(_objectSpread({},prev.supplierInfo),{},{taxId:e.target.value})})),placeholder:\"Enter tax identification number\"})]});case 2:if(!isNewVendor)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(FormSelect,{label:\"Risk Level\",value:formData.security.riskLevel,onChange:value=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{security:_objectSpread(_objectSpread({},prev.security),{},{riskLevel:value})})),options:[{value:'low',label:'Low Risk'},{value:'medium',label:'Medium Risk'},{value:'high',label:'High Risk'}],placeholder:\"Select risk level\",required:true}),errors.riskLevel&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:errors.riskLevel}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.security.complianceRequired,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{security:_objectSpread(_objectSpread({},prev.security),{},{complianceRequired:e.target.checked})})),className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Compliance review required\"})]})}),/*#__PURE__*/_jsx(FormTextarea,{label:\"Security Notes\",value:formData.security.securityNotes,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{security:_objectSpread(_objectSpread({},prev.security),{},{securityNotes:e.target.value})})),placeholder:\"Any additional security considerations or notes\"})]});case 3:return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-800 mb-4\",children:\"Request Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Title:\"}),\" \",formData.title]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Supplier:\"}),\" \",formData.supplier]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Type:\"}),\" \",formData.purchaseType]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Subsidiary:\"}),\" \",formData.subsidiary]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Description:\"}),\" \",formData.description]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Total Items:\"}),\" \",formData.lineItems.length]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Total Amount:\"}),\" USD \",formData.lineItems.reduce((sum,item)=>sum+(parseFloat(item.amount)||0)*(parseInt(item.quantity)||1),0).toFixed(2)]})]})]})});default:return null;}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(Sidebar,{active:\"home\",onNavClick:key=>console.log('Nav:',key)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-64 bg-white border-r border-gray-200 p-6\",children:[/*#__PURE__*/_jsx(BackLink,{onClick:handleBack,children:\"Back\"}),/*#__PURE__*/_jsx(Stepper,{steps:steps,onStepClick:setCurrentStep})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col\",children:[/*#__PURE__*/_jsx(Header,{userName:\"YacovProcPayer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-800 mb-2\",children:(_steps$currentStep=steps[currentStep])===null||_steps$currentStep===void 0?void 0:_steps$currentStep.label}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[currentStep===0&&'Enter the basic details of your purchase request',currentStep===1&&'Provide information about the new supplier',currentStep===2&&'Complete security assessment for the new vendor',currentStep===3&&'Review your request before submission']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg border border-gray-200 p-8\",children:[renderStepContent(),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mt-8 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleSaveDraft,children:\"Save Draft\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[currentStep>0&&/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleBack,children:\"Back\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleNext,children:currentStep===steps.length-1?'Submit Request':'Next'})]})]})]})]})})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","Sidebar","Header","Button","BackLink","Stepper","FormInput","FormSelect","FormTextarea","LineItemsTable","Badge","SUPPLIERS","PURCHASE_TYPES","SUBSIDIARIES","saveDraft","getDraft","generateDraftId","saveCurrentDraft","clearCurrentDraft","jsx","_jsx","jsxs","_jsxs","RequestForm","_ref","_steps$currentStep","onNavigate","draftId","aiData","currentStep","setCurrentStep","formData","setFormData","id","title","supplier","purchaseType","subsidiary","description","lineItems","currency","amount","quantity","desc","supplierInfo","companyName","contactName","email","phone","address","taxId","security","riskLevel","complianceRequired","securityNotes","errors","setErrors","isNewVendor","setIsNewVendor","newVendorName","setNewVendorName","existingDraft","prev","_objectSpread","steps","label","active","completed","required","filter","step","validateCurrentStep","newErrors","trim","lineItemErrors","map","item","itemErrors","parseFloat","some","Object","keys","length","handleNext","handleSubmit","handleBack","handleSaveDraft","console","log","handleSupplierChange","value","handleLineItemsChange","items","renderStepContent","className","children","onChange","e","target","placeholder","options","searchPlaceholder","action","onClick","onActionWithSearch","search","selectedDisplay","text","color","undefined","onItemChange","maxItems","type","checked","reduce","sum","parseInt","toFixed","onNavClick","key","onStepClick","userName","variant"],"sources":["C:/Users/yacov.gorovoy/Documents/Cursor-workspace/procurement-prototype/src/pages/RequestForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Sidebar from '../components/Sidebar';\r\nimport Header from '../components/Header';\r\nimport Button from '../components/Button';\r\nimport BackLink from '../components/BackLink';\r\nimport Stepper from '../components/Stepper';\r\nimport FormInput from '../components/FormInput';\r\nimport FormSelect from '../components/FormSelect';\r\nimport FormTextarea from '../components/FormTextarea';\r\nimport LineItemsTable from '../components/LineItemsTable';\r\nimport Badge from '../components/Badge';\r\nimport { \r\n  SUPPLIERS, \r\n  PURCHASE_TYPES, \r\n  SUBSIDIARIES, \r\n  saveDraft, \r\n  getDraft, \r\n  generateDraftId,\r\n  saveCurrentDraft,\r\n  clearCurrentDraft\r\n} from '../utils/mockData';\r\n\r\nexport default function RequestForm({ onNavigate, draftId, aiData }) {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [formData, setFormData] = useState({\r\n    id: draftId || generateDraftId(),\r\n    title: '',\r\n    supplier: '',\r\n    purchaseType: '',\r\n    subsidiary: '',\r\n    description: '',\r\n    lineItems: [{ currency: 'USD', amount: '', quantity: '1', desc: '' }],\r\n    supplierInfo: {\r\n      companyName: '',\r\n      contactName: '',\r\n      email: '',\r\n      phone: '',\r\n      address: '',\r\n      taxId: ''\r\n    },\r\n    security: {\r\n      riskLevel: '',\r\n      complianceRequired: false,\r\n      securityNotes: ''\r\n    }\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const [isNewVendor, setIsNewVendor] = useState(false);\r\n  const [newVendorName, setNewVendorName] = useState('');\r\n\r\n  useEffect(() => {\r\n    // Load existing draft if draftId provided\r\n    if (draftId) {\r\n      const existingDraft = getDraft(draftId);\r\n      if (existingDraft) {\r\n        setFormData(existingDraft);\r\n        setIsNewVendor(existingDraft.supplier === 'new_vendor');\r\n      }\r\n    }\r\n    \r\n    // Load AI data if provided\r\n    if (aiData) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        title: aiData.title || '',\r\n        supplier: aiData.supplier || '',\r\n        purchaseType: aiData.purchaseType || '',\r\n        subsidiary: aiData.subsidiary || '',\r\n        description: aiData.description || '',\r\n        lineItems: aiData.lineItems || [{ currency: 'USD', amount: '', quantity: '1', desc: '' }]\r\n      }));\r\n      setIsNewVendor(aiData.supplier === 'new_vendor');\r\n    }\r\n  }, [draftId, aiData]);\r\n\r\n  useEffect(() => {\r\n    // Save current draft to session storage\r\n    saveCurrentDraft(formData);\r\n  }, [formData]);\r\n\r\n  const steps = [\r\n    { label: 'Purchase details', active: currentStep === 0, completed: currentStep > 0 },\r\n    { label: 'Supplier info', active: currentStep === 1, completed: currentStep > 1, required: isNewVendor },\r\n    { label: 'Security', active: currentStep === 2, completed: currentStep > 2, required: isNewVendor },\r\n    { label: 'Review & Submit', active: currentStep === 3, completed: false }\r\n  ].filter(step => !step.required || step.required === isNewVendor);\r\n\r\n  const validateCurrentStep = () => {\r\n    const newErrors = {};\r\n    \r\n    if (currentStep === 0) {\r\n      if (!formData.title.trim()) newErrors.title = 'Title is required';\r\n      if (!formData.supplier) newErrors.supplier = 'Supplier is required';\r\n      if (!formData.purchaseType) newErrors.purchaseType = 'Purchase type is required';\r\n      if (!formData.subsidiary) newErrors.subsidiary = 'Subsidiary is required';\r\n      if (!formData.description.trim()) newErrors.description = 'Description is required';\r\n      \r\n      // Validate line items\r\n      const lineItemErrors = formData.lineItems.map(item => {\r\n        const itemErrors = {};\r\n        if (!item.amount || parseFloat(item.amount) <= 0) itemErrors.amount = 'Valid amount is required';\r\n        if (!item.desc.trim()) itemErrors.desc = 'Description is required';\r\n        return itemErrors;\r\n      });\r\n      if (lineItemErrors.some(errors => Object.keys(errors).length > 0)) {\r\n        newErrors.lineItems = lineItemErrors;\r\n      }\r\n    }\r\n    \r\n    if (currentStep === 1 && isNewVendor) {\r\n      if (!formData.supplierInfo.companyName.trim()) newErrors.companyName = 'Company name is required';\r\n      if (!formData.supplierInfo.contactName.trim()) newErrors.contactName = 'Contact name is required';\r\n      if (!formData.supplierInfo.email.trim()) newErrors.email = 'Email is required';\r\n    }\r\n    \r\n    if (currentStep === 2 && isNewVendor) {\r\n      if (!formData.security.riskLevel) newErrors.riskLevel = 'Risk level is required';\r\n    }\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleNext = () => {\r\n    // Sync newVendorName to formData.supplierInfo.companyName if needed\r\n    if (formData.supplier === 'new_vendor' && newVendorName && !formData.supplierInfo.companyName) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        supplierInfo: { ...prev.supplierInfo, companyName: newVendorName }\r\n      }));\r\n    }\r\n    if (validateCurrentStep()) {\r\n      if (currentStep < steps.length - 1) {\r\n        setCurrentStep(currentStep + 1);\r\n      } else {\r\n        handleSubmit();\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    if (currentStep > 0) {\r\n      setCurrentStep(currentStep - 1);\r\n    } else {\r\n      onNavigate('home');\r\n    }\r\n  };\r\n\r\n  const handleSaveDraft = () => {\r\n    saveDraft(formData);\r\n    onNavigate('home');\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (validateCurrentStep()) {\r\n      // Save as submitted request (in real app, this would go to backend)\r\n      console.log('Submitting request:', formData);\r\n      clearCurrentDraft();\r\n      onNavigate('home');\r\n    }\r\n  };\r\n\r\n  const handleSupplierChange = (value) => {\r\n    setFormData(prev => ({ ...prev, supplier: value }));\r\n    setIsNewVendor(value === 'new_vendor');\r\n    if (value !== 'new_vendor') setNewVendorName('');\r\n  };\r\n\r\n  const handleLineItemsChange = (items) => {\r\n    setFormData(prev => ({ ...prev, lineItems: items }));\r\n  };\r\n\r\n  const renderStepContent = () => {\r\n    switch (currentStep) {\r\n      case 0:\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <FormInput\r\n              label=\"Request Title\"\r\n              value={formData.title}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\r\n              placeholder=\"e.g., Zoom Premium Licenses for Sales Team\"\r\n              required\r\n              className={errors.title ? 'border-red-500' : ''}\r\n            />\r\n            {errors.title && <p className=\"text-red-500 text-sm\">{errors.title}</p>}\r\n            \r\n            <FormSelect\r\n              label=\"Supplier\"\r\n              value={formData.supplier}\r\n              onChange={handleSupplierChange}\r\n              options={SUPPLIERS}\r\n              placeholder=\"Select supplier\"\r\n              required\r\n              searchPlaceholder=\"Search suppliers...\"\r\n              action={{ label: 'Add new vendor', onClick: () => handleSupplierChange('new_vendor') }}\r\n              onActionWithSearch={\r\n                (search) => {\r\n                  setNewVendorName(search);\r\n                  setFormData(prev => ({ ...prev, supplier: 'new_vendor' }));\r\n                  setIsNewVendor(true);\r\n                }\r\n              }\r\n              selectedDisplay={\r\n                formData.supplier === 'new_vendor' && newVendorName\r\n                  ? <span className=\"flex items-center gap-2\">\r\n                      {newVendorName}\r\n                      <Badge text=\"New vendor\" color=\"bg-green-100 text-green-800\" />\r\n                    </span>\r\n                  : undefined\r\n              }\r\n            />\r\n            {errors.supplier && <p className=\"text-red-500 text-sm\">{errors.supplier}</p>}\r\n            \r\n            <FormSelect\r\n              label=\"Purchase Type\"\r\n              value={formData.purchaseType}\r\n              onChange={(value) => setFormData(prev => ({ ...prev, purchaseType: value }))}\r\n              options={PURCHASE_TYPES}\r\n              placeholder=\"Select purchase type\"\r\n              required\r\n            />\r\n            {errors.purchaseType && <p className=\"text-red-500 text-sm\">{errors.purchaseType}</p>}\r\n            \r\n            <FormSelect\r\n              label=\"Subsidiary\"\r\n              value={formData.subsidiary}\r\n              onChange={(value) => setFormData(prev => ({ ...prev, subsidiary: value }))}\r\n              options={SUBSIDIARIES}\r\n              placeholder=\"Select subsidiary\"\r\n              required\r\n            />\r\n            {errors.subsidiary && <p className=\"text-red-500 text-sm\">{errors.subsidiary}</p>}\r\n            \r\n            <FormTextarea\r\n              label=\"Description\"\r\n              value={formData.description}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\r\n              placeholder=\"Describe the purpose and details of this purchase request\"\r\n              required\r\n            />\r\n            {errors.description && <p className=\"text-red-500 text-sm\">{errors.description}</p>}\r\n            \r\n            <div>\r\n              <label className=\"block mb-2 font-medium text-gray-600\">Line Items</label>\r\n              <LineItemsTable\r\n                items={formData.lineItems}\r\n                onItemChange={handleLineItemsChange}\r\n                maxItems={20}\r\n              />\r\n            </div>\r\n          </div>\r\n        );\r\n        \r\n      case 1:\r\n        if (!isNewVendor) return null;\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <FormInput\r\n              label=\"Company Name\"\r\n              value={formData.supplierInfo.companyName}\r\n              onChange={(e) => setFormData(prev => ({ \r\n                ...prev, \r\n                supplierInfo: { ...prev.supplierInfo, companyName: e.target.value }\r\n              }))}\r\n              placeholder=\"Enter company name\"\r\n              required\r\n            />\r\n            {errors.companyName && <p className=\"text-red-500 text-sm\">{errors.companyName}</p>}\r\n            \r\n            <FormInput\r\n              label=\"Contact Name\"\r\n              value={formData.supplierInfo.contactName}\r\n              onChange={(e) => setFormData(prev => ({ \r\n                ...prev, \r\n                supplierInfo: { ...prev.supplierInfo, contactName: e.target.value }\r\n              }))}\r\n              placeholder=\"Enter contact person name\"\r\n              required\r\n            />\r\n            {errors.contactName && <p className=\"text-red-500 text-sm\">{errors.contactName}</p>}\r\n            \r\n            <FormInput\r\n              label=\"Email\"\r\n              type=\"email\"\r\n              value={formData.supplierInfo.email}\r\n              onChange={(e) => setFormData(prev => ({ \r\n                ...prev, \r\n                supplierInfo: { ...prev.supplierInfo, email: e.target.value }\r\n              }))}\r\n              placeholder=\"Enter contact email\"\r\n              required\r\n            />\r\n            {errors.email && <p className=\"text-red-500 text-sm\">{errors.email}</p>}\r\n            \r\n            <FormInput\r\n              label=\"Phone\"\r\n              value={formData.supplierInfo.phone}\r\n              onChange={(e) => setFormData(prev => ({ \r\n                ...prev, \r\n                supplierInfo: { ...prev.supplierInfo, phone: e.target.value }\r\n              }))}\r\n              placeholder=\"Enter contact phone\"\r\n            />\r\n            \r\n            <FormTextarea\r\n              label=\"Address\"\r\n              value={formData.supplierInfo.address}\r\n              onChange={(e) => setFormData(prev => ({ \r\n                ...prev, \r\n                supplierInfo: { ...prev.supplierInfo, address: e.target.value }\r\n              }))}\r\n              placeholder=\"Enter company address\"\r\n            />\r\n            \r\n            <FormInput\r\n              label=\"Tax ID\"\r\n              value={formData.supplierInfo.taxId}\r\n              onChange={(e) => setFormData(prev => ({ \r\n                ...prev, \r\n                supplierInfo: { ...prev.supplierInfo, taxId: e.target.value }\r\n              }))}\r\n              placeholder=\"Enter tax identification number\"\r\n            />\r\n          </div>\r\n        );\r\n        \r\n      case 2:\r\n        if (!isNewVendor) return null;\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <FormSelect\r\n              label=\"Risk Level\"\r\n              value={formData.security.riskLevel}\r\n              onChange={(value) => setFormData(prev => ({ \r\n                ...prev, \r\n                security: { ...prev.security, riskLevel: value }\r\n              }))}\r\n              options={[\r\n                { value: 'low', label: 'Low Risk' },\r\n                { value: 'medium', label: 'Medium Risk' },\r\n                { value: 'high', label: 'High Risk' }\r\n              ]}\r\n              placeholder=\"Select risk level\"\r\n              required\r\n            />\r\n            {errors.riskLevel && <p className=\"text-red-500 text-sm\">{errors.riskLevel}</p>}\r\n            \r\n            <div>\r\n              <label className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={formData.security.complianceRequired}\r\n                  onChange={(e) => setFormData(prev => ({ \r\n                    ...prev, \r\n                    security: { ...prev.security, complianceRequired: e.target.checked }\r\n                  }))}\r\n                  className=\"mr-2\"\r\n                />\r\n                <span className=\"text-sm font-medium text-gray-700\">Compliance review required</span>\r\n              </label>\r\n            </div>\r\n            \r\n            <FormTextarea\r\n              label=\"Security Notes\"\r\n              value={formData.security.securityNotes}\r\n              onChange={(e) => setFormData(prev => ({ \r\n                ...prev, \r\n                security: { ...prev.security, securityNotes: e.target.value }\r\n              }))}\r\n              placeholder=\"Any additional security considerations or notes\"\r\n            />\r\n          </div>\r\n        );\r\n        \r\n      case 3:\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"bg-gray-50 rounded-lg p-6\">\r\n              <h3 className=\"font-medium text-gray-800 mb-4\">Request Summary</h3>\r\n              <div className=\"space-y-3 text-sm\">\r\n                <div><span className=\"font-medium\">Title:</span> {formData.title}</div>\r\n                <div><span className=\"font-medium\">Supplier:</span> {formData.supplier}</div>\r\n                <div><span className=\"font-medium\">Type:</span> {formData.purchaseType}</div>\r\n                <div><span className=\"font-medium\">Subsidiary:</span> {formData.subsidiary}</div>\r\n                <div><span className=\"font-medium\">Description:</span> {formData.description}</div>\r\n                <div><span className=\"font-medium\">Total Items:</span> {formData.lineItems.length}</div>\r\n                <div><span className=\"font-medium\">Total Amount:</span> USD {formData.lineItems.reduce((sum, item) => \r\n                  sum + (parseFloat(item.amount) || 0) * (parseInt(item.quantity) || 1), 0\r\n                ).toFixed(2)}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n        \r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen bg-gray-50\">\r\n      <Sidebar active=\"home\" onNavClick={key => console.log('Nav:', key)} />\r\n      <div className=\"flex-1 flex\">\r\n        <div className=\"w-64 bg-white border-r border-gray-200 p-6\">\r\n          <BackLink onClick={handleBack}>Back</BackLink>\r\n          <Stepper steps={steps} onStepClick={setCurrentStep} />\r\n        </div>\r\n        \r\n        <div className=\"flex-1 flex flex-col\">\r\n          <Header userName=\"YacovProcPayer\" />\r\n          \r\n          <div className=\"flex-1 p-8\">\r\n            <div className=\"max-w-4xl mx-auto\">\r\n              <div className=\"mb-8\">\r\n                <h1 className=\"text-2xl font-bold text-gray-800 mb-2\">\r\n                  {steps[currentStep]?.label}\r\n                </h1>\r\n                <p className=\"text-gray-600\">\r\n                  {currentStep === 0 && 'Enter the basic details of your purchase request'}\r\n                  {currentStep === 1 && 'Provide information about the new supplier'}\r\n                  {currentStep === 2 && 'Complete security assessment for the new vendor'}\r\n                  {currentStep === 3 && 'Review your request before submission'}\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"bg-white rounded-lg border border-gray-200 p-8\">\r\n                {renderStepContent()}\r\n                \r\n                <div className=\"flex justify-between mt-8 pt-6 border-t border-gray-200\">\r\n                  <Button variant=\"secondary\" onClick={handleSaveDraft}>\r\n                    Save Draft\r\n                  </Button>\r\n                  \r\n                  <div className=\"flex space-x-4\">\r\n                    {currentStep > 0 && (\r\n                      <Button variant=\"secondary\" onClick={handleBack}>\r\n                        Back\r\n                      </Button>\r\n                    )}\r\n                    <Button \r\n                      variant=\"primary\" \r\n                      onClick={handleNext}\r\n                    >\r\n                      {currentStep === steps.length - 1 ? 'Submit Request' : 'Next'}\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}