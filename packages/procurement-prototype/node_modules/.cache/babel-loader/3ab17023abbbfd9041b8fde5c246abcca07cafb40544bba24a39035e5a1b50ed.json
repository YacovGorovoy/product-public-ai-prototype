{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yacov.gorovoy\\\\Documents\\\\Cursor-workspace\\\\procurement-prototype\\\\src\\\\pages\\\\RequestApprovalScreen.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Sidebar from '../components/Sidebar';\nimport Header from '../components/Header';\nimport BackLink from '../components/BackLink';\nimport RequestSummaryHeader from '../components/RequestSummaryHeader';\nimport ProcessFlow from '../components/ProcessFlow';\nimport Tabs from '../components/Tabs';\nimport Typography from '../components/Typography';\nimport FormInput from '../components/FormInput';\nimport FormSelect from '../components/FormSelect';\nimport FormTextarea from '../components/FormTextarea';\nimport DatePicker from '../components/DatePicker';\nimport FileUploadInput from '../components/FileUploadInput';\nimport LineItemsTable from '../components/LineItemsTable';\nimport CommentsSection from '../components/CommentsSection';\nimport Button from '../components/Button';\nimport Badge from '../components/Badge';\nimport { localDB } from '../utils/localDB';\nimport { PURCHASE_TYPES, SUBSIDIARIES } from '../utils/mockData';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RequestApprovalScreen({\n  onNavigate,\n  requestId\n}) {\n  _s();\n  var _request$approvalFlow2, _request$approvalFlow3, _request$approvalFlow4, _request$purchaseDeta, _request$purchaseDeta2, _request$purchaseDeta3, _request$purchaseDeta4, _request$purchaseDeta5, _request$vendorInfo, _request$vendorInfo2, _request$vendorInfo3, _request$vendorInfo4, _request$legal3, _request$legal3$contr, _request$legal4, _request$legal4$contr, _request$legal5, _request$legal6, _request$legal7, _request$legal8;\n  const [request, setRequest] = useState(null);\n  const [activeTab, setActiveTab] = useState('purchase');\n  const [loading, setLoading] = useState(true);\n  const [sidebarExpanded, setSidebarExpanded] = useState(true);\n  const [showApprovalModal, setShowApprovalModal] = useState(false);\n  const [approvalAction, setApprovalAction] = useState(null);\n\n  // Load request data\n  useEffect(() => {\n    if (requestId) {\n      const requestData = localDB.getById(requestId);\n      if (requestData) {\n        setRequest(requestData);\n      }\n      setLoading(false);\n    }\n  }, [requestId]);\n\n  // Handle field updates\n  const handleFieldUpdate = (field, value) => {\n    if (!request) return;\n    const updatedRequest = {\n      ...request\n    };\n\n    // Update based on field path\n    if (field.startsWith('purchaseDetails.')) {\n      const subField = field.replace('purchaseDetails.', '');\n      updatedRequest.purchaseDetails = {\n        ...updatedRequest.purchaseDetails,\n        [subField]: value\n      };\n    } else if (field.startsWith('vendorInfo.')) {\n      const subField = field.replace('vendorInfo.', '');\n      updatedRequest.vendorInfo = {\n        ...updatedRequest.vendorInfo,\n        [subField]: value\n      };\n    } else if (field.startsWith('security.')) {\n      const subField = field.replace('security.', '');\n      updatedRequest.security = {\n        ...updatedRequest.security,\n        [subField]: value\n      };\n    } else if (field.startsWith('legal.')) {\n      const subField = field.replace('legal.', '');\n      updatedRequest.legal = {\n        ...updatedRequest.legal,\n        [subField]: value\n      };\n    } else if (field.startsWith('finance.')) {\n      const subField = field.replace('finance.', '');\n      updatedRequest.finance = {\n        ...updatedRequest.finance,\n        [subField]: value\n      };\n    } else {\n      updatedRequest[field] = value;\n    }\n    setRequest(updatedRequest);\n    localDB.update(requestId, updatedRequest);\n  };\n\n  // Handle line items update\n  const handleLineItemsUpdate = lineItems => {\n    if (!request) return;\n    const updatedRequest = {\n      ...request\n    };\n    updatedRequest.purchaseDetails.lineItems = lineItems;\n    updatedRequest.lineItems = lineItems;\n    setRequest(updatedRequest);\n    localDB.update(requestId, updatedRequest);\n  };\n\n  // Handle comments\n  const handleAddComment = comment => {\n    if (!request) return;\n    const newComment = {\n      id: `comment-${Date.now()}`,\n      user: {\n        email: 'yacov.gorovoy+brandonhyde@tipalti.com'\n      },\n      timestamp: 'Just now',\n      message: comment\n    };\n    const updatedRequest = {\n      ...request,\n      comments: [...request.comments, newComment]\n    };\n    setRequest(updatedRequest);\n    localDB.update(requestId, updatedRequest);\n  };\n\n  // Handle approval/rejection\n  const handleApprovalAction = action => {\n    setApprovalAction(action);\n    setShowApprovalModal(true);\n  };\n  const confirmApprovalAction = () => {\n    if (!request || !approvalAction) return;\n    const updatedRequest = {\n      ...request\n    };\n    if (approvalAction === 'approve') {\n      // Update approval flow\n      const currentStepIndex = updatedRequest.approvalFlow.steps.findIndex(step => step.status === 'current');\n      if (currentStepIndex !== -1) {\n        updatedRequest.approvalFlow.steps[currentStepIndex].status = 'completed';\n        updatedRequest.approvalFlow.steps[currentStepIndex].completedAt = new Date().toISOString();\n        updatedRequest.approvalFlow.steps[currentStepIndex].tooltip = `Approved ${new Date().toLocaleDateString()}`;\n\n        // Move to next step or complete\n        if (currentStepIndex + 1 < updatedRequest.approvalFlow.steps.length) {\n          updatedRequest.approvalFlow.steps[currentStepIndex + 1].status = 'current';\n        } else {\n          updatedRequest.status = 'Completed';\n          updatedRequest.statusLabel = 'COMPLETED';\n        }\n      }\n    } else if (approvalAction === 'reject') {\n      updatedRequest.status = 'Rejected';\n      updatedRequest.statusLabel = 'REJECTED';\n    }\n    setRequest(updatedRequest);\n    localDB.update(requestId, updatedRequest);\n    setShowApprovalModal(false);\n    setApprovalAction(null);\n  };\n\n  // Get tab counts for pending items\n  const getTabCounts = () => {\n    var _request$security, _request$legal, _request$legal2, _request$legal2$contr;\n    if (!request) return {};\n    const counts = {};\n\n    // Security tab count\n    if (!((_request$security = request.security) !== null && _request$security !== void 0 && _request$security.soc2File)) {\n      counts.security = 1;\n    }\n\n    // Legal tab count\n    let legalCount = 0;\n    if (!((_request$legal = request.legal) !== null && _request$legal !== void 0 && _request$legal.contract)) legalCount++;\n    if (!((_request$legal2 = request.legal) !== null && _request$legal2 !== void 0 && (_request$legal2$contr = _request$legal2.contractPeriod) !== null && _request$legal2$contr !== void 0 && _request$legal2$contr.startDate)) legalCount++;\n    counts.legal = legalCount;\n    return counts;\n  };\n\n  // Get mentionable users for comments\n  const getMentionableUsers = () => {\n    var _request$approvalFlow;\n    if (!request) return [];\n    const users = [];\n\n    // Add approvers from approval flow\n    if ((_request$approvalFlow = request.approvalFlow) !== null && _request$approvalFlow !== void 0 && _request$approvalFlow.steps) {\n      request.approvalFlow.steps.forEach(step => {\n        if (step.approver && step.approver !== '4 possible approvers') {\n          users.push({\n            email: `${step.approver.toLowerCase().replace(' ', '.')}@tipalti.com`,\n            name: step.approver\n          });\n        }\n      });\n    }\n\n    // Add existing commenters\n    if (request.comments) {\n      request.comments.forEach(comment => {\n        var _comment$user;\n        if ((_comment$user = comment.user) !== null && _comment$user !== void 0 && _comment$user.email) {\n          const existingUser = users.find(u => u.email === comment.user.email);\n          if (!existingUser) {\n            users.push({\n              email: comment.user.email,\n              name: comment.user.email.split('@')[0].replace(/\\./g, ' ')\n            });\n          }\n        }\n      });\n    }\n    return users;\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex min-h-screen bg-gray-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-500\",\n          children: \"Loading request...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this);\n  }\n  if (!request) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex min-h-screen bg-gray-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-500\",\n          children: \"Request not found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this);\n  }\n  const tabCounts = getTabCounts();\n  const mentionableUsers = getMentionableUsers();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex min-h-screen bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      active: \"home\",\n      onNavClick: key => console.log('Nav:', key),\n      expanded: sidebarExpanded,\n      setExpanded: setSidebarExpanded\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex flex-col flex-1 ${sidebarExpanded ? 'ml-48' : 'ml-16'}`,\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        sectionTitle: \"Request Approval\",\n        companyName: \"Acme Corp\",\n        userAvatar: 'https://ui-avatars.com/api/?name=User&background=E0E7EF&color=374151&size=64',\n        userEmail: \"yacov.gorovoy@acmecorp.com\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-6 pb-0\",\n            children: /*#__PURE__*/_jsxDEV(BackLink, {\n              onClick: () => onNavigate('home'),\n              children: \"Back to requests\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-6\",\n            children: /*#__PURE__*/_jsxDEV(RequestSummaryHeader, {\n              title: `${request.title} (Request-${request.requestNumber})`,\n              requestNumber: request.requestNumber,\n              status: request.status === 'Pending approval' ? 'Pending Approval' : request.status,\n              statusColor: request.status === 'Pending approval' ? 'blue' : request.status === 'Completed' ? 'green' : 'gray',\n              amount: `${request.amount} ${request.currency}`,\n              vendor: request.vendor,\n              category: request.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-6 mt-6\",\n            children: [/*#__PURE__*/_jsxDEV(ProcessFlow, {\n              steps: ((_request$approvalFlow2 = request.approvalFlow) === null || _request$approvalFlow2 === void 0 ? void 0 : _request$approvalFlow2.steps) || []\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this), ((_request$approvalFlow3 = request.approvalFlow) === null || _request$approvalFlow3 === void 0 ? void 0 : (_request$approvalFlow4 = _request$approvalFlow3.reopenedSteps) === null || _request$approvalFlow4 === void 0 ? void 0 : _request$approvalFlow4.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"text-blue-600 hover:text-blue-800 text-sm\",\n                children: \"Hide previous approvals\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-6 mt-6\",\n            children: /*#__PURE__*/_jsxDEV(Tabs, {\n              tabs: [{\n                label: 'Purchase details',\n                key: 'purchase'\n              }, {\n                label: 'Vendor info',\n                key: 'vendor'\n              }, {\n                label: 'Security',\n                key: 'security',\n                count: tabCounts.security || 0\n              }, {\n                label: 'Legal',\n                key: 'legal',\n                count: tabCounts.legal || 0\n              }, {\n                label: 'Finance',\n                key: 'finance'\n              }],\n              activeTab: activeTab,\n              onTabClick: setActiveTab,\n              showCounts: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 p-6 pt-4\",\n            children: [activeTab === 'purchase' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-6\",\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h2\",\n                children: \"Purchase details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n                label: \"Title *\",\n                value: ((_request$purchaseDeta = request.purchaseDetails) === null || _request$purchaseDeta === void 0 ? void 0 : _request$purchaseDeta.title) || '',\n                variant: \"inline\",\n                readOnly: true,\n                onSave: value => handleFieldUpdate('purchaseDetails.title', value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormSelect, {\n                label: \"Purchase type *\",\n                value: ((_request$purchaseDeta2 = request.purchaseDetails) === null || _request$purchaseDeta2 === void 0 ? void 0 : _request$purchaseDeta2.purchaseType) || '',\n                options: PURCHASE_TYPES,\n                variant: \"inline\",\n                readOnly: true,\n                onSave: value => handleFieldUpdate('purchaseDetails.purchaseType', value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n                label: \"Vendor name *\",\n                value: ((_request$purchaseDeta3 = request.purchaseDetails) === null || _request$purchaseDeta3 === void 0 ? void 0 : _request$purchaseDeta3.vendorName) || '',\n                variant: \"inline\",\n                readOnly: true,\n                onSave: value => handleFieldUpdate('purchaseDetails.vendorName', value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormTextarea, {\n                label: \"Description *\",\n                value: ((_request$purchaseDeta4 = request.purchaseDetails) === null || _request$purchaseDeta4 === void 0 ? void 0 : _request$purchaseDeta4.description) || '',\n                variant: \"inline\",\n                readOnly: true,\n                onSave: value => handleFieldUpdate('purchaseDetails.description', value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h3\",\n                  className: \"mb-4\",\n                  children: \"Line items\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(LineItemsTable, {\n                  items: ((_request$purchaseDeta5 = request.purchaseDetails) === null || _request$purchaseDeta5 === void 0 ? void 0 : _request$purchaseDeta5.lineItems) || [],\n                  onItemChange: handleLineItemsUpdate,\n                  variant: \"inline\",\n                  readOnly: true,\n                  onEdit: () => {},\n                  onSave: items => handleLineItemsUpdate(items),\n                  onCancel: () => {}\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 17\n            }, this), activeTab === 'vendor' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-6\",\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h2\",\n                children: \"Vendor info\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n                label: \"Vendor name\",\n                value: ((_request$vendorInfo = request.vendorInfo) === null || _request$vendorInfo === void 0 ? void 0 : _request$vendorInfo.vendorName) || '',\n                variant: \"inline\",\n                readOnly: true,\n                onSave: value => handleFieldUpdate('vendorInfo.vendorName', value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n                label: \"Vendor email\",\n                value: ((_request$vendorInfo2 = request.vendorInfo) === null || _request$vendorInfo2 === void 0 ? void 0 : _request$vendorInfo2.vendorEmail) || '',\n                variant: \"inline\",\n                readOnly: true,\n                onSave: value => handleFieldUpdate('vendorInfo.vendorEmail', value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n                label: \"Vendor phone\",\n                value: ((_request$vendorInfo3 = request.vendorInfo) === null || _request$vendorInfo3 === void 0 ? void 0 : _request$vendorInfo3.vendorPhone) || '',\n                variant: \"inline\",\n                readOnly: true,\n                onSave: value => handleFieldUpdate('vendorInfo.vendorPhone', value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormTextarea, {\n                label: \"Vendor address\",\n                value: ((_request$vendorInfo4 = request.vendorInfo) === null || _request$vendorInfo4 === void 0 ? void 0 : _request$vendorInfo4.vendorAddress) || '',\n                variant: \"inline\",\n                readOnly: true,\n                onSave: value => handleFieldUpdate('vendorInfo.vendorAddress', value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 17\n            }, this), activeTab === 'security' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-6\",\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h2\",\n                children: \"Security\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FileUploadInput, {\n                label: \"SOC2 file *\",\n                onFileSelect: file => handleFieldUpdate('security.soc2File', file),\n                acceptedTypes: ['.pdf', '.doc', '.docx'],\n                maxSize: 5 * 1024 * 1024,\n                placeholder: \"Upload file...\",\n                required: true,\n                variant: \"inline\",\n                readOnly: true,\n                onSave: file => handleFieldUpdate('security.soc2File', file)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 17\n            }, this), activeTab === 'legal' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-6\",\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h2\",\n                children: \"Legal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FileUploadInput, {\n                label: \"Contract\",\n                onFileSelect: file => handleFieldUpdate('legal.contract', file),\n                acceptedTypes: ['.pdf', '.doc', '.docx'],\n                maxSize: 10 * 1024 * 1024,\n                placeholder: \"Upload file...\",\n                variant: \"inline\",\n                readOnly: true,\n                onSave: file => handleFieldUpdate('legal.contract', file)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n                variant: \"range\",\n                startDate: (_request$legal3 = request.legal) !== null && _request$legal3 !== void 0 && (_request$legal3$contr = _request$legal3.contractPeriod) !== null && _request$legal3$contr !== void 0 && _request$legal3$contr.startDate ? new Date(request.legal.contractPeriod.startDate) : null,\n                endDate: (_request$legal4 = request.legal) !== null && _request$legal4 !== void 0 && (_request$legal4$contr = _request$legal4.contractPeriod) !== null && _request$legal4$contr !== void 0 && _request$legal4$contr.endDate ? new Date(request.legal.contractPeriod.endDate) : null,\n                onChange: (start, end) => {\n                  handleFieldUpdate('legal.contractPeriod.startDate', start ? start.toISOString().split('T')[0] : null);\n                  handleFieldUpdate('legal.contractPeriod.endDate', end ? end.toISOString().split('T')[0] : null);\n                },\n                label: \"Contract period\",\n                placeholder: \"Select Date\",\n                inputVariant: \"inline\",\n                readOnly: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormSelect, {\n                label: \"Has auto-renewal clause? (Optional)\",\n                value: ((_request$legal5 = request.legal) === null || _request$legal5 === void 0 ? void 0 : _request$legal5.autoRenewalClause) || '',\n                options: [{\n                  label: 'Yes',\n                  value: 'yes'\n                }, {\n                  label: 'No',\n                  value: 'no'\n                }, {\n                  label: 'Not specified',\n                  value: 'not_specified'\n                }],\n                variant: \"inline\",\n                readOnly: true,\n                onSave: value => handleFieldUpdate('legal.autoRenewalClause', value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n                label: \"Service start date\",\n                value: ((_request$legal6 = request.legal) === null || _request$legal6 === void 0 ? void 0 : _request$legal6.serviceStartDate) || '',\n                variant: \"inline\",\n                readOnly: true,\n                onSave: value => handleFieldUpdate('legal.serviceStartDate', value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n                label: \"Service end date *\",\n                value: ((_request$legal7 = request.legal) === null || _request$legal7 === void 0 ? void 0 : _request$legal7.serviceEndDate) || '',\n                variant: \"inline\",\n                readOnly: true,\n                onSave: value => handleFieldUpdate('legal.serviceEndDate', value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n                label: \"Amortization Period *\",\n                value: ((_request$legal8 = request.legal) === null || _request$legal8 === void 0 ? void 0 : _request$legal8.amortizationPeriod) || '',\n                variant: \"inline\",\n                readOnly: true,\n                onSave: value => handleFieldUpdate('legal.amortizationPeriod', value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 17\n            }, this), activeTab === 'finance' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-6\",\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h2\",\n                children: \"Finance\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n                label: \"Budget\",\n                value: request.finance.budget,\n                variant: \"inline\",\n                readOnly: true,\n                onSave: value => handleFieldUpdate('finance.budget', value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n                label: \"Cost Center\",\n                value: request.finance.costCenter,\n                variant: \"inline\",\n                readOnly: true,\n                onSave: value => handleFieldUpdate('finance.costCenter', value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n                label: \"GL Account\",\n                value: request.finance.glAccount,\n                variant: \"inline\",\n                readOnly: true,\n                onSave: value => handleFieldUpdate('finance.glAccount', value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-6 border-t bg-white\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex space-x-4\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"secondary\",\n                  onClick: () => handleApprovalAction('reject'),\n                  className: \"flex items-center space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"16\",\n                    height: \"16\",\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    strokeWidth: \"2\",\n                    viewBox: \"0 0 24 24\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M6 18L18 6M6 6l12 12\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 512,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 511,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Reject\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 514,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 506,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"primary\",\n                  onClick: () => handleApprovalAction('approve'),\n                  className: \"flex items-center space-x-2 bg-yellow-500 hover:bg-yellow-600\",\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"16\",\n                    height: \"16\",\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    strokeWidth: \"2\",\n                    viewBox: \"0 0 24 24\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M5 13l4 4L19 7\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 523,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 522,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Approve\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 525,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 517,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-500\",\n                children: \"To approve, complete the form in Security, Legal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 529,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-80 bg-white border-l\",\n          children: /*#__PURE__*/_jsxDEV(CommentsSection, {\n            comments: request.comments,\n            mentionableUsers: mentionableUsers,\n            onAddComment: handleAddComment,\n            width: \"md\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this), showApprovalModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 max-w-md w-full mx-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h3\",\n            className: \"capitalize\",\n            children: approvalAction\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowApprovalModal(false),\n            className: \"text-gray-400 hover:text-gray-600\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"20\",\n              height: \"20\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M6 18L18 6M6 6l12 12\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: approvalAction === 'approve' ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Please complete mandatory fields before approving.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Are you sure you want to reject this request?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: confirmApprovalAction,\n            className: \"bg-yellow-500 hover:bg-yellow-600\",\n            children: \"Ok\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 235,\n    columnNumber: 5\n  }, this);\n}\n_s(RequestApprovalScreen, \"gGh5hEbYCKbgJcWt4mM1EBxD/cM=\");\n_c = RequestApprovalScreen;\nvar _c;\n$RefreshReg$(_c, \"RequestApprovalScreen\");","map":{"version":3,"names":["React","useState","useEffect","Sidebar","Header","BackLink","RequestSummaryHeader","ProcessFlow","Tabs","Typography","FormInput","FormSelect","FormTextarea","DatePicker","FileUploadInput","LineItemsTable","CommentsSection","Button","Badge","localDB","PURCHASE_TYPES","SUBSIDIARIES","jsxDEV","_jsxDEV","RequestApprovalScreen","onNavigate","requestId","_s","_request$approvalFlow2","_request$approvalFlow3","_request$approvalFlow4","_request$purchaseDeta","_request$purchaseDeta2","_request$purchaseDeta3","_request$purchaseDeta4","_request$purchaseDeta5","_request$vendorInfo","_request$vendorInfo2","_request$vendorInfo3","_request$vendorInfo4","_request$legal3","_request$legal3$contr","_request$legal4","_request$legal4$contr","_request$legal5","_request$legal6","_request$legal7","_request$legal8","request","setRequest","activeTab","setActiveTab","loading","setLoading","sidebarExpanded","setSidebarExpanded","showApprovalModal","setShowApprovalModal","approvalAction","setApprovalAction","requestData","getById","handleFieldUpdate","field","value","updatedRequest","startsWith","subField","replace","purchaseDetails","vendorInfo","security","legal","finance","update","handleLineItemsUpdate","lineItems","handleAddComment","comment","newComment","id","Date","now","user","email","timestamp","message","comments","handleApprovalAction","action","confirmApprovalAction","currentStepIndex","approvalFlow","steps","findIndex","step","status","completedAt","toISOString","tooltip","toLocaleDateString","length","statusLabel","getTabCounts","_request$security","_request$legal","_request$legal2","_request$legal2$contr","counts","soc2File","legalCount","contract","contractPeriod","startDate","getMentionableUsers","_request$approvalFlow","users","forEach","approver","push","toLowerCase","name","_comment$user","existingUser","find","u","split","className","children","fileName","_jsxFileName","lineNumber","columnNumber","tabCounts","mentionableUsers","active","onNavClick","key","console","log","expanded","setExpanded","sectionTitle","companyName","userAvatar","userEmail","onClick","title","requestNumber","statusColor","amount","currency","vendor","category","reopenedSteps","tabs","label","count","onTabClick","showCounts","variant","readOnly","onSave","purchaseType","options","vendorName","description","items","onItemChange","onEdit","onCancel","vendorEmail","vendorPhone","vendorAddress","onFileSelect","file","acceptedTypes","maxSize","placeholder","required","endDate","onChange","start","end","inputVariant","autoRenewalClause","serviceStartDate","serviceEndDate","amortizationPeriod","budget","costCenter","glAccount","width","height","fill","stroke","strokeWidth","viewBox","d","onAddComment","_c","$RefreshReg$"],"sources":["C:/Users/yacov.gorovoy/Documents/Cursor-workspace/procurement-prototype/src/pages/RequestApprovalScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Sidebar from '../components/Sidebar';\r\nimport Header from '../components/Header';\r\nimport BackLink from '../components/BackLink';\r\nimport RequestSummaryHeader from '../components/RequestSummaryHeader';\r\nimport ProcessFlow from '../components/ProcessFlow';\r\nimport Tabs from '../components/Tabs';\r\nimport Typography from '../components/Typography';\r\nimport FormInput from '../components/FormInput';\r\nimport FormSelect from '../components/FormSelect';\r\nimport FormTextarea from '../components/FormTextarea';\r\nimport DatePicker from '../components/DatePicker';\r\nimport FileUploadInput from '../components/FileUploadInput';\r\nimport LineItemsTable from '../components/LineItemsTable';\r\nimport CommentsSection from '../components/CommentsSection';\r\nimport Button from '../components/Button';\r\nimport Badge from '../components/Badge';\r\nimport { localDB } from '../utils/localDB';\r\nimport { PURCHASE_TYPES, SUBSIDIARIES } from '../utils/mockData';\r\n\r\nexport default function RequestApprovalScreen({ onNavigate, requestId }) {\r\n  const [request, setRequest] = useState(null);\r\n  const [activeTab, setActiveTab] = useState('purchase');\r\n  const [loading, setLoading] = useState(true);\r\n  const [sidebarExpanded, setSidebarExpanded] = useState(true);\r\n  const [showApprovalModal, setShowApprovalModal] = useState(false);\r\n  const [approvalAction, setApprovalAction] = useState(null);\r\n\r\n  // Load request data\r\n  useEffect(() => {\r\n    if (requestId) {\r\n      const requestData = localDB.getById(requestId);\r\n      if (requestData) {\r\n        setRequest(requestData);\r\n      }\r\n      setLoading(false);\r\n    }\r\n  }, [requestId]);\r\n\r\n  // Handle field updates\r\n  const handleFieldUpdate = (field, value) => {\r\n    if (!request) return;\r\n    \r\n    const updatedRequest = { ...request };\r\n    \r\n    // Update based on field path\r\n    if (field.startsWith('purchaseDetails.')) {\r\n      const subField = field.replace('purchaseDetails.', '');\r\n      updatedRequest.purchaseDetails = {\r\n        ...updatedRequest.purchaseDetails,\r\n        [subField]: value\r\n      };\r\n    } else if (field.startsWith('vendorInfo.')) {\r\n      const subField = field.replace('vendorInfo.', '');\r\n      updatedRequest.vendorInfo = {\r\n        ...updatedRequest.vendorInfo,\r\n        [subField]: value\r\n      };\r\n    } else if (field.startsWith('security.')) {\r\n      const subField = field.replace('security.', '');\r\n      updatedRequest.security = {\r\n        ...updatedRequest.security,\r\n        [subField]: value\r\n      };\r\n    } else if (field.startsWith('legal.')) {\r\n      const subField = field.replace('legal.', '');\r\n      updatedRequest.legal = {\r\n        ...updatedRequest.legal,\r\n        [subField]: value\r\n      };\r\n    } else if (field.startsWith('finance.')) {\r\n      const subField = field.replace('finance.', '');\r\n      updatedRequest.finance = {\r\n        ...updatedRequest.finance,\r\n        [subField]: value\r\n      };\r\n    } else {\r\n      updatedRequest[field] = value;\r\n    }\r\n    \r\n    setRequest(updatedRequest);\r\n    localDB.update(requestId, updatedRequest);\r\n  };\r\n\r\n  // Handle line items update\r\n  const handleLineItemsUpdate = (lineItems) => {\r\n    if (!request) return;\r\n    \r\n    const updatedRequest = { ...request };\r\n    updatedRequest.purchaseDetails.lineItems = lineItems;\r\n    updatedRequest.lineItems = lineItems;\r\n    \r\n    setRequest(updatedRequest);\r\n    localDB.update(requestId, updatedRequest);\r\n  };\r\n\r\n  // Handle comments\r\n  const handleAddComment = (comment) => {\r\n    if (!request) return;\r\n    \r\n    const newComment = {\r\n      id: `comment-${Date.now()}`,\r\n      user: { email: 'yacov.gorovoy+brandonhyde@tipalti.com' },\r\n      timestamp: 'Just now',\r\n      message: comment\r\n    };\r\n    \r\n    const updatedRequest = {\r\n      ...request,\r\n      comments: [...request.comments, newComment]\r\n    };\r\n    \r\n    setRequest(updatedRequest);\r\n    localDB.update(requestId, updatedRequest);\r\n  };\r\n\r\n  // Handle approval/rejection\r\n  const handleApprovalAction = (action) => {\r\n    setApprovalAction(action);\r\n    setShowApprovalModal(true);\r\n  };\r\n\r\n  const confirmApprovalAction = () => {\r\n    if (!request || !approvalAction) return;\r\n    \r\n    const updatedRequest = { ...request };\r\n    \r\n    if (approvalAction === 'approve') {\r\n      // Update approval flow\r\n      const currentStepIndex = updatedRequest.approvalFlow.steps.findIndex(step => step.status === 'current');\r\n      if (currentStepIndex !== -1) {\r\n        updatedRequest.approvalFlow.steps[currentStepIndex].status = 'completed';\r\n        updatedRequest.approvalFlow.steps[currentStepIndex].completedAt = new Date().toISOString();\r\n        updatedRequest.approvalFlow.steps[currentStepIndex].tooltip = `Approved ${new Date().toLocaleDateString()}`;\r\n        \r\n        // Move to next step or complete\r\n        if (currentStepIndex + 1 < updatedRequest.approvalFlow.steps.length) {\r\n          updatedRequest.approvalFlow.steps[currentStepIndex + 1].status = 'current';\r\n        } else {\r\n          updatedRequest.status = 'Completed';\r\n          updatedRequest.statusLabel = 'COMPLETED';\r\n        }\r\n      }\r\n    } else if (approvalAction === 'reject') {\r\n      updatedRequest.status = 'Rejected';\r\n      updatedRequest.statusLabel = 'REJECTED';\r\n    }\r\n    \r\n    setRequest(updatedRequest);\r\n    localDB.update(requestId, updatedRequest);\r\n    setShowApprovalModal(false);\r\n    setApprovalAction(null);\r\n  };\r\n\r\n  // Get tab counts for pending items\r\n  const getTabCounts = () => {\r\n    if (!request) return {};\r\n    \r\n    const counts = {};\r\n    \r\n    // Security tab count\r\n    if (!request.security?.soc2File) {\r\n      counts.security = 1;\r\n    }\r\n    \r\n    // Legal tab count\r\n    let legalCount = 0;\r\n    if (!request.legal?.contract) legalCount++;\r\n    if (!request.legal?.contractPeriod?.startDate) legalCount++;\r\n    counts.legal = legalCount;\r\n    \r\n    return counts;\r\n  };\r\n\r\n  // Get mentionable users for comments\r\n  const getMentionableUsers = () => {\r\n    if (!request) return [];\r\n    \r\n    const users = [];\r\n    \r\n    // Add approvers from approval flow\r\n    if (request.approvalFlow?.steps) {\r\n      request.approvalFlow.steps.forEach(step => {\r\n        if (step.approver && step.approver !== '4 possible approvers') {\r\n          users.push({\r\n            email: `${step.approver.toLowerCase().replace(' ', '.')}@tipalti.com`,\r\n            name: step.approver\r\n          });\r\n        }\r\n      });\r\n    }\r\n    \r\n    // Add existing commenters\r\n    if (request.comments) {\r\n      request.comments.forEach(comment => {\r\n        if (comment.user?.email) {\r\n          const existingUser = users.find(u => u.email === comment.user.email);\r\n          if (!existingUser) {\r\n            users.push({\r\n              email: comment.user.email,\r\n              name: comment.user.email.split('@')[0].replace(/\\./g, ' ')\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n    \r\n    return users;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex min-h-screen bg-gray-50\">\r\n        <div className=\"flex-1 flex items-center justify-center\">\r\n          <div className=\"text-gray-500\">Loading request...</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!request) {\r\n    return (\r\n      <div className=\"flex min-h-screen bg-gray-50\">\r\n        <div className=\"flex-1 flex items-center justify-center\">\r\n          <div className=\"text-gray-500\">Request not found</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const tabCounts = getTabCounts();\r\n  const mentionableUsers = getMentionableUsers();\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen bg-gray-50\">\r\n      {/* Left Sidebar */}\r\n      <Sidebar active=\"home\" onNavClick={key => console.log('Nav:', key)} expanded={sidebarExpanded} setExpanded={setSidebarExpanded} />\r\n      \r\n      <div className={`flex flex-col flex-1 ${sidebarExpanded ? 'ml-48' : 'ml-16'}`}>\r\n        {/* Header */}\r\n        <Header sectionTitle=\"Request Approval\" companyName=\"Acme Corp\" userAvatar={'https://ui-avatars.com/api/?name=User&background=E0E7EF&color=374151&size=64'} userEmail=\"yacov.gorovoy@acmecorp.com\" />\r\n        \r\n        {/* Main Content */}\r\n        <div className=\"flex flex-1\">\r\n          {/* Center Content */}\r\n          <div className=\"flex-1 flex flex-col\">\r\n            {/* Back Link */}\r\n            <div className=\"p-6 pb-0\">\r\n              <BackLink onClick={() => onNavigate('home')}>Back to requests</BackLink>\r\n            </div>\r\n            \r\n            {/* Request Summary Header */}\r\n            <div className=\"px-6\">\r\n              <RequestSummaryHeader\r\n                title={`${request.title} (Request-${request.requestNumber})`}\r\n                requestNumber={request.requestNumber}\r\n                status={request.status === 'Pending approval' ? 'Pending Approval' : request.status}\r\n                statusColor={request.status === 'Pending approval' ? 'blue' : request.status === 'Completed' ? 'green' : 'gray'}\r\n                amount={`${request.amount} ${request.currency}`}\r\n                vendor={request.vendor}\r\n                category={request.category}\r\n              />\r\n            </div>\r\n            \r\n            {/* Approval Flow */}\r\n            <div className=\"px-6 mt-6\">\r\n              <ProcessFlow steps={request.approvalFlow?.steps || []} />\r\n              {request.approvalFlow?.reopenedSteps?.length > 0 && (\r\n                <div className=\"mt-4\">\r\n                  <button className=\"text-blue-600 hover:text-blue-800 text-sm\">\r\n                    Hide previous approvals\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            {/* Tabs */}\r\n            <div className=\"px-6 mt-6\">\r\n              <Tabs\r\n                tabs={[\r\n                  { label: 'Purchase details', key: 'purchase' },\r\n                  { label: 'Vendor info', key: 'vendor' },\r\n                  { label: 'Security', key: 'security', count: tabCounts.security || 0 },\r\n                  { label: 'Legal', key: 'legal', count: tabCounts.legal || 0 },\r\n                  { label: 'Finance', key: 'finance' }\r\n                ]}\r\n                activeTab={activeTab}\r\n                onTabClick={setActiveTab}\r\n                showCounts={true}\r\n              />\r\n            </div>\r\n            \r\n            {/* Tab Content */}\r\n            <div className=\"flex-1 p-6 pt-4\">\r\n              {activeTab === 'purchase' && (\r\n                <div className=\"space-y-6\">\r\n                  <Typography variant=\"h2\">Purchase details</Typography>\r\n                  \r\n                  <FormInput\r\n                    label=\"Title *\"\r\n                    value={request.purchaseDetails?.title || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('purchaseDetails.title', value)}\r\n                  />\r\n                  \r\n                  <FormSelect\r\n                    label=\"Purchase type *\"\r\n                    value={request.purchaseDetails?.purchaseType || ''}\r\n                    options={PURCHASE_TYPES}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('purchaseDetails.purchaseType', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"Vendor name *\"\r\n                    value={request.purchaseDetails?.vendorName || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('purchaseDetails.vendorName', value)}\r\n                  />\r\n                  \r\n                  <FormTextarea\r\n                    label=\"Description *\"\r\n                    value={request.purchaseDetails?.description || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('purchaseDetails.description', value)}\r\n                  />\r\n                  \r\n                  <div>\r\n                    <Typography variant=\"h3\" className=\"mb-4\">Line items</Typography>\r\n                    <LineItemsTable\r\n                      items={request.purchaseDetails?.lineItems || []}\r\n                      onItemChange={handleLineItemsUpdate}\r\n                      variant=\"inline\"\r\n                      readOnly={true}\r\n                      onEdit={() => {}}\r\n                      onSave={(items) => handleLineItemsUpdate(items)}\r\n                      onCancel={() => {}}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n              \r\n              {activeTab === 'vendor' && (\r\n                <div className=\"space-y-6\">\r\n                  <Typography variant=\"h2\">Vendor info</Typography>\r\n                  \r\n                  <FormInput\r\n                    label=\"Vendor name\"\r\n                    value={request.vendorInfo?.vendorName || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('vendorInfo.vendorName', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"Vendor email\"\r\n                    value={request.vendorInfo?.vendorEmail || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('vendorInfo.vendorEmail', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"Vendor phone\"\r\n                    value={request.vendorInfo?.vendorPhone || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('vendorInfo.vendorPhone', value)}\r\n                  />\r\n                  \r\n                  <FormTextarea\r\n                    label=\"Vendor address\"\r\n                    value={request.vendorInfo?.vendorAddress || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('vendorInfo.vendorAddress', value)}\r\n                  />\r\n                </div>\r\n              )}\r\n              \r\n              {activeTab === 'security' && (\r\n                <div className=\"space-y-6\">\r\n                  <Typography variant=\"h2\">Security</Typography>\r\n                  \r\n                  <FileUploadInput\r\n                    label=\"SOC2 file *\"\r\n                    onFileSelect={(file) => handleFieldUpdate('security.soc2File', file)}\r\n                    acceptedTypes={['.pdf', '.doc', '.docx']}\r\n                    maxSize={5 * 1024 * 1024}\r\n                    placeholder=\"Upload file...\"\r\n                    required\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(file) => handleFieldUpdate('security.soc2File', file)}\r\n                  />\r\n                </div>\r\n              )}\r\n              \r\n              {activeTab === 'legal' && (\r\n                <div className=\"space-y-6\">\r\n                  <Typography variant=\"h2\">Legal</Typography>\r\n                  \r\n                  <FileUploadInput\r\n                    label=\"Contract\"\r\n                    onFileSelect={(file) => handleFieldUpdate('legal.contract', file)}\r\n                    acceptedTypes={['.pdf', '.doc', '.docx']}\r\n                    maxSize={10 * 1024 * 1024}\r\n                    placeholder=\"Upload file...\"\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(file) => handleFieldUpdate('legal.contract', file)}\r\n                  />\r\n                  \r\n                  <DatePicker\r\n                    variant=\"range\"\r\n                    startDate={request.legal?.contractPeriod?.startDate ? new Date(request.legal.contractPeriod.startDate) : null}\r\n                    endDate={request.legal?.contractPeriod?.endDate ? new Date(request.legal.contractPeriod.endDate) : null}\r\n                    onChange={(start, end) => {\r\n                      handleFieldUpdate('legal.contractPeriod.startDate', start ? start.toISOString().split('T')[0] : null);\r\n                      handleFieldUpdate('legal.contractPeriod.endDate', end ? end.toISOString().split('T')[0] : null);\r\n                    }}\r\n                    label=\"Contract period\"\r\n                    placeholder=\"Select Date\"\r\n                    inputVariant=\"inline\"\r\n                    readOnly={true}\r\n                  />\r\n                  \r\n                  <FormSelect\r\n                    label=\"Has auto-renewal clause? (Optional)\"\r\n                    value={request.legal?.autoRenewalClause || ''}\r\n                    options={[\r\n                      { label: 'Yes', value: 'yes' },\r\n                      { label: 'No', value: 'no' },\r\n                      { label: 'Not specified', value: 'not_specified' }\r\n                    ]}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('legal.autoRenewalClause', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"Service start date\"\r\n                    value={request.legal?.serviceStartDate || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('legal.serviceStartDate', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"Service end date *\"\r\n                    value={request.legal?.serviceEndDate || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('legal.serviceEndDate', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"Amortization Period *\"\r\n                    value={request.legal?.amortizationPeriod || ''}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('legal.amortizationPeriod', value)}\r\n                  />\r\n                </div>\r\n              )}\r\n              \r\n              {activeTab === 'finance' && (\r\n                <div className=\"space-y-6\">\r\n                  <Typography variant=\"h2\">Finance</Typography>\r\n                  \r\n                  <FormInput\r\n                    label=\"Budget\"\r\n                    value={request.finance.budget}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('finance.budget', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"Cost Center\"\r\n                    value={request.finance.costCenter}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('finance.costCenter', value)}\r\n                  />\r\n                  \r\n                  <FormInput\r\n                    label=\"GL Account\"\r\n                    value={request.finance.glAccount}\r\n                    variant=\"inline\"\r\n                    readOnly={true}\r\n                    onSave={(value) => handleFieldUpdate('finance.glAccount', value)}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            {/* Action Buttons */}\r\n            <div className=\"p-6 border-t bg-white\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex space-x-4\">\r\n                  <Button\r\n                    variant=\"secondary\"\r\n                    onClick={() => handleApprovalAction('reject')}\r\n                    className=\"flex items-center space-x-2\"\r\n                  >\r\n                    <svg width=\"16\" height=\"16\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n                      <path d=\"M6 18L18 6M6 6l12 12\"/>\r\n                    </svg>\r\n                    <span>Reject</span>\r\n                  </Button>\r\n                  \r\n                  <Button\r\n                    variant=\"primary\"\r\n                    onClick={() => handleApprovalAction('approve')}\r\n                    className=\"flex items-center space-x-2 bg-yellow-500 hover:bg-yellow-600\"\r\n                  >\r\n                    <svg width=\"16\" height=\"16\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n                      <path d=\"M5 13l4 4L19 7\"/>\r\n                    </svg>\r\n                    <span>Approve</span>\r\n                  </Button>\r\n                </div>\r\n                \r\n                <div className=\"text-sm text-gray-500\">\r\n                  To approve, complete the form in Security, Legal\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Right Sidebar - Comments */}\r\n          <div className=\"w-80 bg-white border-l\">\r\n            <CommentsSection\r\n              comments={request.comments}\r\n              mentionableUsers={mentionableUsers}\r\n              onAddComment={handleAddComment}\r\n              width=\"md\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Approval Modal */}\r\n      {showApprovalModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <Typography variant=\"h3\" className=\"capitalize\">{approvalAction}</Typography>\r\n              <button\r\n                onClick={() => setShowApprovalModal(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <svg width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n                  <path d=\"M6 18L18 6M6 6l12 12\"/>\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"mb-6\">\r\n              {approvalAction === 'approve' ? (\r\n                <p>Please complete mandatory fields before approving.</p>\r\n              ) : (\r\n                <p>Are you sure you want to reject this request?</p>\r\n              )}\r\n            </div>\r\n            \r\n            <div className=\"flex justify-end\">\r\n              <Button\r\n                variant=\"primary\"\r\n                onClick={confirmApprovalAction}\r\n                className=\"bg-yellow-500 hover:bg-yellow-600\"\r\n              >\r\n                Ok\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}